/*! For license information please see 632.bundle-a6d6532ee8d82d873655.js.LICENSE.txt */
"use strict";(self.webpackChunkawesomescreenshot_website=self.webpackChunkawesomescreenshot_website||[]).push([[632],{22917:(t,e,n)=>{n.d(e,{Z:()=>c});n(67294);var r=n(85893);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c=function(t){return(0,r.jsx)("svg",a(a({width:"1em",height:"1em",viewBox:"0 0 17 17",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:(0,r.jsx)("path",{d:"M16.524.775c.01.049.01.1 0 .149l-1.598 7.99a.381.381 0 0 1-.733.05l-.968-2.812L1.26 16.278a.381.381 0 0 1-.428.044l-.065-.044a.381.381 0 0 1-.044-.537l10.144-11.99-2.81-.946a.381.381 0 0 1 .048-.735L16.076.476a.381.381 0 0 1 .448.299Z",fill:"currentColor",fillRule:"evenodd"})}))}},87734:(t,e,n)=>{n.d(e,{Z:()=>c});n(67294);var r=n(85893);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c=function(t){return(0,r.jsx)("svg",a(a({width:"1em",height:"1em",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:(0,r.jsx)("ellipse",{cx:8,cy:8,rx:7.067,stroke:"currentColor",ry:6.067,strokeWidth:1.867,fill:"none",fillRule:"evenodd"})}))}},66241:(t,e,n)=>{n.d(e,{Z:()=>c});n(67294);var r=n(85893);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c=function(t){return(0,r.jsx)("svg",a(a({width:"1em",height:"1em",stroke:"currentColor",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:(0,r.jsx)("path",{d:"M.941 2.941h14.118v10.118H.941z",strokeWidth:1.882,fill:"none",fillRule:"evenodd"})}))}},10596:(t,e,n)=>{n.d(e,{Z:()=>c});n(67294);var r=n(85893);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c=function(t){return(0,r.jsx)("svg",a(a({width:"1em",height:"1em",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:(0,r.jsx)("path",{d:"M6.018.5C8.672 3.713 10 6.053 10 7.52c0 2.547-1.865 3.98-3.982 3.98S2 10.067 2 7.52c0-1.158.834-2.86 2.504-5.107l.345-.456c.119-.155.241-.312.367-.471L5.606 1c.133-.164.27-.33.412-.5Zm-.004 1.609-.169.215c-.119.152-.234.301-.345.448l-.323.433-.153.211-.29.41C3.577 5.497 3 6.75 3 7.518c0 1.796 1.261 2.95 3.018 2.95C7.764 10.469 9 9.324 9 7.519c0-.646-.403-1.634-1.212-2.925l-.243-.377c-.211-.322-.446-.66-.703-1.014l-.32-.433a37.274 37.274 0 0 0-.169-.223l-.339-.438Z",fill:"#FFF",fillRule:"nonzero",stroke:"#FFF",strokeWidth:.5})}))}},72633:(t,e,n)=>{n.d(e,{Z:()=>c});n(67294);var r=n(85893);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c=function(t){return(0,r.jsx)("svg",a(a({width:"1em",height:"1em",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:(0,r.jsx)("path",{d:"M3.344.5C1.495.5 0 1.946 0 3.726c0 1.718 1.394 3.125 3.148 3.22l.189.005.19-.005a3.41 3.41 0 0 0 1.56-.468l.197-.125.16-.11 2.072 1.68-2.17 1.761-.16-.101a3.414 3.414 0 0 0-1.842-.534C1.495 9.049 0 10.495 0 12.274c0 1.78 1.495 3.226 3.344 3.226 1.848 0 3.343-1.446 3.343-3.226 0-.385-.07-.761-.205-1.114l-.088-.21-.086-.182 2.357-1.913 5.06 4.104.136.101a1.778 1.778 0 0 0 2.097-.083L16 12.94 9.816 7.92l6.182-5.016-.034-.03a1.779 1.779 0 0 0-1.955-.18l-.14.086-.135.099-5.068 4.109-2.301-1.866.075-.179c.163-.383.247-.795.247-1.218C6.687 1.946 5.192.5 3.344.5Zm0 9.971c1.024 0 1.857.806 1.857 1.803 0 .998-.833 1.804-1.857 1.804-1.025 0-1.858-.806-1.858-1.804 0-.997.833-1.803 1.858-1.803Zm0-8.549c1.024 0 1.857.806 1.857 1.804 0 .997-.833 1.803-1.857 1.803-1.025 0-1.858-.806-1.858-1.803 0-.998.833-1.804 1.858-1.804Z",fillRule:"nonzero"})}))}},59259:(t,e,n)=>{n.d(e,{Z:()=>c});n(67294);var r=n(85893);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c=function(t){return(0,r.jsx)("svg",a(a({width:"1em",height:"1em",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:(0,r.jsx)("path",{d:"M4.08 5.903a.79.79 0 0 0-.693.15l-.078.073-1.98 1.98a4.537 4.537 0 0 0 6.246 6.576l.169-.16 1.982-1.98a.787.787 0 0 0-1.025-1.19l-.089.076-1.983 1.98a2.962 2.962 0 0 1-4.318-4.046l.131-.142 1.985-1.985a.788.788 0 0 0-.246-1.3l-.101-.032Zm6.623-.755a.789.789 0 0 0-1.026-.077l-.088.076-4.64 4.64a.787.787 0 0 0 1.025 1.19l.089-.076 4.64-4.64a.789.789 0 0 0 .076-1.025l-.076-.088Zm3.669-3.67a4.538 4.538 0 0 0-6.247-.16l-.169.16-1.959 1.96a.787.787 0 0 0 1.025 1.19l.089-.077 1.96-1.96a2.962 2.962 0 0 1 4.318 4.047l-.131.142-1.969 1.969a.787.787 0 0 0 1.026 1.19l.088-.076 1.969-1.97a4.537 4.537 0 0 0 0-6.415Z",fillRule:"nonzero"})}))}},65855:(t,e,n)=>{n.d(e,{Z:()=>c});n(67294);var r=n(85893);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c=function(t){return(0,r.jsx)("svg",a(a({width:"1em",height:"1em",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:(0,r.jsx)("path",{d:"M14.416.5c.323 0 .584.255.584.565v2.374l-1.482-1.434h-4.74l-.001 11.818h1.909c.45 0 .814.365.814.815v.048c0 .45-.365.814-.814.814l-1.314-.001-.01.001H5.314a.814.814 0 0 1-.814-.814v-.048c0-.45.365-.814.814-.814l1.908-.001V2.005h-4.74L1 3.44V1.065C1 .753 1.26.5 1.583.5Z",fillRule:"nonzero"})}))}},63134:(t,e,n)=>{n.d(e,{G9:()=>w,M9:()=>S});var r,o,i,a,s,c,l,u,f="transform",d=f+"Origin",h=function(t){var e=t.ownerDocument||t;!(f in t.style)&&"msTransform"in t.style&&(d=(f="msTransform")+"Origin");for(;e.parentNode&&(e=e.parentNode););if(o=window,l=new w,e){r=e,i=e.documentElement,a=e.body;var n=e.createElement("div"),s=e.createElement("div");a.appendChild(n),n.appendChild(s),n.style.position="static",n.style[f]="translate3d(0,0,1px)",u=s.offsetParent!==n,a.removeChild(n)}return e},p=[],m=[],y=function(t){return t.ownerSVGElement||("svg"===(t.tagName+"").toLowerCase()?t:null)},g=function t(e){return"fixed"===o.getComputedStyle(e).position||((e=e.parentNode)&&1===e.nodeType?t(e):void 0)},v=function t(e,n){if(e.parentNode&&(r||h(e))){var o=y(e),i=o?o.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",a=o?n?"rect":"g":"div",l=2!==n?0:100,u=3===n?100:0,f="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",d=r.createElementNS?r.createElementNS(i.replace(/^https/,"http"),a):r.createElement(a);return n&&(o?(c||(c=t(e)),d.setAttribute("width",.01),d.setAttribute("height",.01),d.setAttribute("transform","translate("+l+","+u+")"),c.appendChild(d)):(s||((s=t(e)).style.cssText=f),d.style.cssText=f+"width:0.1px;height:0.1px;top:"+u+"px;left:"+l+"px",s.appendChild(d))),d}throw"Need document and parent."},b=function(t,e){var n,r,i,a,h,g,b=y(t),x=t===b,S=b?p:m,j=t.parentNode;if(t===o)return t;if(S.length||S.push(v(t,1),v(t,2),v(t,3)),n=b?c:s,b)i=x?{x:0,y:0}:t.getBBox(),(r=t.transform?t.transform.baseVal:{}).numberOfItems?(a=(r=r.numberOfItems>1?function(t){for(var e=new w,n=0;n<t.numberOfItems;n++)e.multiply(t.getItem(n).matrix);return e}(r):r.getItem(0).matrix).a*i.x+r.c*i.y,h=r.b*i.x+r.d*i.y):(r=l,a=i.x,h=i.y),e&&"g"===t.tagName.toLowerCase()&&(a=h=0),(x?b:j).appendChild(n),n.setAttribute("transform","matrix("+r.a+","+r.b+","+r.c+","+r.d+","+(r.e+a)+","+(r.f+h)+")");else{if(a=h=0,u)for(r=t.offsetParent,i=t;i&&(i=i.parentNode)&&i!==r&&i.parentNode;)(o.getComputedStyle(i)[f]+"").length>4&&(a=i.offsetLeft,h=i.offsetTop,i=0);if("absolute"!==(g=o.getComputedStyle(t)).position)for(r=t.offsetParent;j&&j!==r;)a+=j.scrollLeft||0,h+=j.scrollTop||0,j=j.parentNode;(i=n.style).top=t.offsetTop-h+"px",i.left=t.offsetLeft-a+"px",i[f]=g[f],i[d]=g[d],i.position="fixed"===g.position?"fixed":"absolute",t.parentNode.appendChild(n)}return n},x=function(t,e,n,r,o,i,a){return t.a=e,t.b=n,t.c=r,t.d=o,t.e=i,t.f=a,t},w=function(){function t(t,e,n,r,o,i){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===o&&(o=0),void 0===i&&(i=0),x(this,t,e,n,r,o,i)}var e=t.prototype;return e.inverse=function(){var t=this.a,e=this.b,n=this.c,r=this.d,o=this.e,i=this.f,a=t*r-e*n||1e-10;return x(this,r/a,-e/a,-n/a,t/a,(n*i-r*o)/a,-(t*i-e*o)/a)},e.multiply=function(t){var e=this.a,n=this.b,r=this.c,o=this.d,i=this.e,a=this.f,s=t.a,c=t.c,l=t.b,u=t.d,f=t.e,d=t.f;return x(this,s*e+l*r,s*n+l*o,c*e+u*r,c*n+u*o,i+f*e+d*r,a+f*n+d*o)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(t){var e=this.a,n=this.b,r=this.c,o=this.d,i=this.e,a=this.f;return e===t.a&&n===t.b&&r===t.c&&o===t.d&&i===t.e&&a===t.f},e.apply=function(t,e){void 0===e&&(e={});var n=t.x,r=t.y,o=this.a,i=this.b,a=this.c,s=this.d,c=this.e,l=this.f;return e.x=n*o+r*a+c||0,e.y=n*i+r*s+l||0,e},t}();function S(t,e,n,s){if(!t||!t.parentNode||(r||h(t)).documentElement===t)return new w;var c=function(t){for(var e,n;t&&t!==a;)(n=t._gsap)&&n.uncache&&n.get(t,"x"),n&&!n.scaleX&&!n.scaleY&&n.renderTransform&&(n.scaleX=n.scaleY=1e-4,n.renderTransform(1,n),e?e.push(n):e=[n]),t=t.parentNode;return e}(t),l=y(t)?p:m,u=b(t,n),f=l[0].getBoundingClientRect(),d=l[1].getBoundingClientRect(),v=l[2].getBoundingClientRect(),x=u.parentNode,S=!s&&g(t),j=new w((d.left-f.left)/100,(d.top-f.top)/100,(v.left-f.left)/100,(v.top-f.top)/100,f.left+(S?0:o.pageXOffset||r.scrollLeft||i.scrollLeft||a.scrollLeft||0),f.top+(S?0:o.pageYOffset||r.scrollTop||i.scrollTop||a.scrollTop||0));if(x.removeChild(u),c)for(f=c.length;f--;)(d=c[f]).scaleX=d.scaleY=0,d.renderTransform(1,d);return e?j.inverse():j}},19915:(t,e,n)=>{n.d(e,{Z:()=>it});var r=n(50308),o=n.n(r),i=n(67294),a=n(1852),s=n(5551),c=n(45384),l=n(88091),u=n(67618),f=n(47481),d=n(85893);function h(t){var e=t.className,n=t.title,r=t.onClick,o=t.icon,i=e?"asp-control-btn ".concat(e):"asp-control-btn";return n||(i+=" notitle"),(0,d.jsx)("div",{className:i,"aria-label":n,onClick:r,children:(0,d.jsx)("div",{className:"asp-control-btn-icon",children:o})})}const p=(0,i.memo)(h);function m(){return(0,d.jsx)("div",{className:"asp-loading-block",children:(0,d.jsx)("svg",{"data-v-8211":"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:(0,d.jsxs)("g",{fill:"none",strokeWidth:"5",strokeMiterlimit:"10",stroke:"currentColor",children:[(0,d.jsx)("circle",{cx:"25",cy:"25",r:"20",opacity:".3"}),(0,d.jsx)("circle",{cx:"25",cy:"25",r:"20",strokeDasharray:"25,200",strokeLinecap:"round",className:"asp-loading-block-circle"})]})})})}const y=(0,i.memo)(m);var g=n(23279),v=n.n(g);function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const w=function(t){var e=t.videoRef,n=t.duration,r=t.currentSec,o=t.isCollapsed,a=t.handlePlayPercentageChange,s=t.handleSeekingStart,c=t.handleSeekingEnd,l=b((0,i.useState)(!1),2),f=l[0],h=l[1],p=b((0,i.useState)(!1),2),m=p[0],y=p[1],g=b((0,i.useState)(0),2),x=g[0],w=g[1],S=b((0,i.useState)(0),2),j=S[0],P=S[1],O=b((0,i.useState)(0),2),k=O[0],C=O[1],A=b((0,i.useState)(0),2),E=A[0],I=A[1],N=b((0,i.useState)(0),2),D=N[0],F=N[1],T=b((0,i.useState)([]),2),Z=T[0],R=T[1],B=(0,i.useRef)(null),L=(0,i.useRef)(null),V=((0,i.useRef)(null),(0,i.useRef)()),U=(0,i.useRef)(!1),z=(0,i.useRef)(0),M=(0,i.useRef)(0),_=(0,i.useRef)(0);(0,i.useEffect)((function(){var t=e.current;return t.addEventListener("progress",H,!1),function(){t.removeEventListener("progress",H,!1)}}),[]),(0,i.useEffect)((function(){var t=r/n;I(t),F(t*B.current.offsetWidth)}),[r]);var H=function(t){(0,u.kf)(t.target);for(var e=t.target.buffered,n=[],r=0;r<e.length;r++){var o=e.start(r)/t.target.duration,i=e.end(r)/t.target.duration-o,a=Math.ceil(100*o)+"%",s=Math.ceil(100*i)+"%";n.push({left:a,width:s})}R(n)},W=v()((function(){e.current.currentTime=_.current*n}),300),q=function(t){var e=t.pageX||t.changedTouches[0].pageX,n=B.current;if(U.current){var r=(M.current+(e-z.current))/n.offsetWidth;r>1&&(r=1),r<0&&(r=0),_.current=r,I(r),a(r),W()}},X=function t(){U.current=!1,h(!1),e.current.currentTime=_.current*n,c(),document.documentElement.removeEventListener("mousemove",q,!1),document.documentElement.removeEventListener("mouseup",t,!1),document.documentElement.removeEventListener("touchmove",q,!1),document.documentElement.removeEventListener("touchend",t,!1)},K=function(t){var e=B.current,n=((t.pageX||t.nativeEvent.changedTouches[0].pageX)-e.getBoundingClientRect().x)/e.offsetWidth;_.current=n,I(n),a(n),function(t,e){var n=t.pageX||t.changedTouches[0].pageX;U.current=!0,z.current=n,M.current=e*B.current.offsetWidth,h(!0),s()}(t,n),document.documentElement.addEventListener("mousemove",q,!1),document.documentElement.addEventListener("mouseup",X,!1),document.documentElement.addEventListener("touchmove",q,!1),document.documentElement.addEventListener("touchend",X,!1)};return(0,d.jsxs)("div",{className:"asp-progress-bar ".concat(f?"seeking":""),onMouseEnter:function(){o||y(!0)},onMouseLeave:function(){y(!1)},onMouseMove:function(t){var e=t.pageX||t.changedTouches[0].pageX;if(!V.current){var r=B.current,o=e-r.getBoundingClientRect().x,i=o-90,a=o/r.offsetWidth;i<0?i=0:i+180>r.offsetWidth&&(i=r.offsetWidth-180),o<20?o=20:o>r.offsetWidth-20&&(o=r.offsetWidth-20),C(a*n),w(o+"px"),P(a)}},children:[(0,d.jsx)("div",{className:"reaction-container"}),(0,d.jsxs)("div",{className:"asp-progress-track",ref:B,onMouseDown:K,onTouchStart:K,children:[(0,d.jsxs)("div",{className:"asp-progress-track-inner",children:[(0,d.jsx)("div",{className:"asp-progress-current",style:{transform:"scaleX(".concat(E,")")}}),(0,d.jsx)("div",{className:"asp-progress-locator-track  ".concat(m?"show":""),style:{transform:"scaleX(".concat(j,")")}})]}),(0,d.jsx)("div",{className:"asp-progress-indicator",style:{transform:"translateX(".concat(D,"px)")},ref:L,children:(0,d.jsx)("div",{className:"asp-progress-indicator-ball"})}),(0,d.jsx)("div",{className:"asp-buffer-blocks-container",children:Z.map((function(t,e){return(0,d.jsx)("div",{className:"asp-buffer-block",style:{left:t.left,width:t.width}},e)}))})]}),(0,d.jsx)("div",{className:"asp-progress-locator-time ".concat(m?"show":""),style:{transform:"translateX(".concat(x,")")},children:(0,u.z7)(k)})]})};var S=n(56262),j=n(99096);function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k(t){var e=t.reaction,n=t.left,r=t.playerRef,o=(t.onReactionAnimationEnd,t.handleOnClick),a=t.isAnimate,s=e.comment,c=P((0,i.useState)("translateX(0)"),2),l=c[0],u=c[1],h=P((0,i.useState)(!1),2),p=h[0],m=h[1],y=(0,i.useRef)(null);(0,i.useEffect)((function(){m(a||s.animation)}),[a,s.animation]);return(0,d.jsxs)("div",{className:"asp-reaction-icon-wrapper ".concat(p?"animate":""," ").concat(e.type),style:{left:n},onMouseEnter:function(){var t=r.current.getBoundingClientRect().x+r.current.getBoundingClientRect().width,e=y.current.getBoundingClientRect().x+y.current.getBoundingClientRect().width;e>t&&u("translateX(-"+(e-t+3)+"px)")},onMouseLeave:function(){u("translateX(0)")},onAnimationEnd:function(t){m(!1)},onClick:function(){return o(e)},children:["emoji"===e.type&&(0,d.jsx)("div",{className:"asp-reaction-icon",children:s.content}),"comment"===e.type&&(0,d.jsxs)("div",{className:"asp-reaction-icon asp-reaction-comment-icon",children:[(0,d.jsx)(f.Pg,{}),(0,d.jsx)("div",{className:"asp-reaction-comment-icon-count",children:e.count})]}),(0,d.jsx)("div",{className:"asp-reaction-panel",ref:y,style:{transform:l},children:(0,d.jsxs)("div",{className:"asp-reaction-comment-item ".concat(s.isEmoji?"emoji":""),children:[(0,d.jsxs)("div",{className:"avatar-area",title:s.userName,children:[(0,d.jsx)(j.Z,{username:s.userName,avatarUrl:s.userAvatar,size:"16"})," ",":"]}),(0,d.jsxs)("div",{className:"content-area",children:[(0,d.jsx)("div",{className:"content",dangerouslySetInnerHTML:{__html:s.content}}),e.count>1&&(0,d.jsxs)("div",{className:"asp-more-comment",children:["and ",e.count-1," other comments"]})]})]})})]})}const C=(0,i.memo)(k,(function(t,e){return(0,S.wU)(t.reaction,e.reaction)&&t.isAnimate===e.isAnimate}));var A=n(94184),E=n.n(A);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function N(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===I(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(t){var e,n=t.icon,r=t.children,o=t.className,a=D((0,i.useState)(!1),2),s=a[0],c=a[1],l=E()("asp-control-switch",(N(e={},o,""!==o),N(e,"hovered",s),e));return(0,d.jsxs)("div",{className:l,onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:[(0,d.jsx)(p,{icon:n}),(0,d.jsx)("div",{className:"asp-control-switch-panel",children:(0,d.jsx)("div",{className:"asp-control-switch-panel-inner",onClick:function(){return c(!1)},children:r})})]})}const Z=(0,i.memo)(T);function R(t){var e=t.onSpeedChange,n=t.speed;return(0,d.jsx)(Z,{className:"asp-speed-control-btn",icon:(0,d.jsx)("span",{className:"asp-control-btn-text-icon",children:n+"x"}),children:(0,d.jsx)("ul",{children:s.Ob.map((function(t){return(0,d.jsx)("li",{className:n===t?"selected":"",onClick:function(){return e(t)},children:t+"x"},t)}))})})}const B=(0,i.memo)(R,(function(t,e){return t.speed===e.speed}));function L(t){var e=t.currentSec,n=t.duration,r=t.centerd,o=(0,u.z7)(e);return(0,d.jsx)("div",{className:"asp-time ".concat(r?"centerd":""),children:o+" / "+n})}const V=(0,i.memo)(L);var U=n(74691),z=n.n(U);function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var H=n(80686),W=(0,u.QF)((function(){return localStorage.getItem.bind(localStorage)}),(function(){return null})),q=(0,u.QF)((function(){return localStorage.setItem.bind(localStorage)})),X=(0,u.QF)((function(){return localStorage.removeItem.bind(localStorage)})),K=(0,u.QF)((function(){return localStorage.clear.bind(localStorage)}));const G=new Proxy(Object.create(null),{get:function(t,e){return"getItem"===e?W:"setItem"===e?q:"removeItem"===e?X:"clear"===e?K:W(e)},set:function(t,e,n){return q(e,n),!0}});function Y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q(t){var e,n=t.onChange,r=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.storage,o=void 0===r?localStorage:r,a=n.serializer,s=void 0===a?JSON.stringify:a,l=n.deserializer,f=void 0===l?JSON.parse:l,d=M((0,i.useState)((function(){var n=o.getItem(t);return null===n?e:f(n)})),2),h=d[0],p=d[1];function m(e){var n=(0,u.LQ)(e)?e(h):e;p(n),null==n?o.removeItem(t):o.setItem(t,s(n))}return[h,(0,c.t)(m)]}("asp-volume",1,{storage:G}),o=Y(r,2),a=o[0],s=o[1],l=(0,i.useRef)(a),h=(0,i.useMemo)((function(){return 0===a}),[a]),m=(0,i.useRef)(null),y=(0,i.useRef)(new DOMRect),g=(0,i.useRef)(null);function v(t){var e=y.current,n=e.width,r=e.x,o=(t.clientX-r)/n,i=z()(o,0,1);s(i),l.current=i}return(0,i.useEffect)((function(){n(a)}),[a]),(0,H.z)(g,{onStart:function(t){if(0!==t.button)return!1;y.current=m.current.getBoundingClientRect(),v(t)},onMove:v}),(0,d.jsxs)("div",{className:"asp-volume-btn",children:[(0,d.jsx)(p,{className:"asp-volume-icon",title:h?"Unmute":"Mute",icon:(e=a,0===e?(0,d.jsx)(f.GK,{}):e<=.5?(0,d.jsx)(f.j4,{}):(0,d.jsx)(f.Nt,{})),onClick:function(){s(h?l.current||1:0)}}),(0,d.jsx)("div",{className:"asp-volume-progress-panel",ref:g,children:(0,d.jsx)("div",{className:"asp-volume-progress",ref:m,children:(0,d.jsx)("div",{className:"asp-volume-current",style:{width:100*a+"%"},children:(0,d.jsx)("div",{className:"asp-volume-indicator"})})})})]})}const $=(0,i.memo)(Q);function tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var nt=(0,i.forwardRef)((function(t,e){var n=tt((0,i.useState)("init"),2),r=n[0],h=n[1],m=tt((0,i.useState)(!1),2),g=m[0],v=m[1],b=tt((0,i.useState)("init"),2),x=b[0],S=b[1],j=tt((0,i.useState)(0),2),P=j[0],O=j[1],k=tt((0,i.useState)(!1),2),A=k[0],E=k[1],I=tt((0,i.useState)(!1),2),N=I[0],D=I[1],F=tt((0,i.useState)(!1),2),T=F[0],Z=F[1],R=tt((0,i.useState)(!1),2),L=R[0],U=R[1],z=tt((0,i.useState)(!1),2),M=z[0],_=z[1],H=tt((0,i.useState)(!1),2),W=H[0],q=H[1],X=tt((0,i.useState)(1),2),K=X[0],G=X[1],Y=tt((0,i.useState)(!1),2),J=Y[0],Q=Y[1],et=tt((0,i.useState)([]),2),nt=et[0],it=et[1],at=tt((0,i.useState)({width:0,height:0}),2),st=at[0],ct=at[1],lt="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,ut=(0,a.useMediaQuery)({query:"(max-width: 650px)"})&&lt,ft=(0,a.useMediaQuery)({query:"(max-width: 410px)"}),dt=tt((0,i.useState)(!1),2),ht=dt[0],pt=dt[1],mt=(0,i.useRef)(null),yt=(0,i.useRef)(null),gt=(0,i.useRef)(),vt=(0,i.useRef)(),bt=(0,i.useRef)(!1),xt=(0,i.useRef)(null),wt=(0,i.useRef)(!1),St=(0,i.useRef)(0),jt=(0,i.useRef)(),Pt=(0,i.useRef)(!1),Ot=(0,i.useRef)(!1),kt=t.src,Ct=t.comments,At=(0,i.useRef)(void 0),Et=(0,i.useRef)();(0,i.useImperativeHandle)(e,(function(){return{playVideo:Mt,seekTo:zt,getCurrentTime:_t,pause:Xt}})),(0,i.useEffect)((function(){Pt.current=A}),[A]),(0,i.useEffect)((function(){return mt.current.addEventListener("loadedmetadata",Dt,!1),mt.current.addEventListener("ended",Ft,!1),mt.current.addEventListener("timeupdate",Tt,!1),mt.current.addEventListener("waiting",Zt,!1),mt.current.addEventListener("play",Rt,!1),mt.current.addEventListener("canplay",Bt,!1),mt.current.addEventListener("pause",Lt,!1),mt.current.addEventListener("error",Vt,!1),yt.current.addEventListener("fullscreenchange",Ut,!1),yt.current.addEventListener("webkitfullscreenchange",Ut,!1),document.documentElement.addEventListener("keydown",It,!1),function(){mt.current.removeEventListener("loadedmetadata",Dt,!1),mt.current.removeEventListener("ended",Ft,!1),mt.current.removeEventListener("timeupdate",Tt,!1),mt.current.removeEventListener("waiting",Zt,!1),mt.current.removeEventListener("play",Rt,!1),mt.current.removeEventListener("canplay",Bt,!1),mt.current.removeEventListener("pause",Lt,!1),mt.current.removeEventListener("error",Vt,!1),yt.current.removeEventListener("fullscreenchange",Ut,!1),yt.current.removeEventListener("webkitfullscreenchange",Ut,!1),document.documentElement.removeEventListener("keydown",It,!1)}}),[]),(0,i.useEffect)((function(){Ct&&it(Nt(Ct))}),[Ct]);var It=function(t){var e=t.keyCode;(0,u.fr)(t.target);var n=t.target.tagName,r="true"===t.target.contentEditable;if("TEXTAREA"!==n&&"INPUT"!==n&&!r)switch(t.stopPropagation(),e){case 32:t.preventDefault(),mt.current.paused?qt():Xt();break;case 39:mt.current.ended||(O((function(t){return mt.current.currentTime=t+5,t+5})),_(!0));break;case 37:mt.current.ended||(O((function(t){return mt.current.currentTime=t-5,t-5})),q(!0))}},Nt=function(t){var e=t.map((function(t){return{id:t.id,isEmoji:t.isEmoji,content:t.content,userAvatar:t.userAvatar,createTime:t.createTime,userName:t.userName,time:t.timestamp,animation:t.animation}})),n={},r=[];for(var o in e.forEach((function(t){1===t.isEmoji?r.push({time:t.time,type:"emoji",comment:t}):n[t.time]?n[t.time].push(t):n[t.time]=[t]})),n)r.push({time:o,type:"comment",comment:n[o][0],count:n[o].length});return r.reverse()},Dt=function(t){(0,u.fr)(t.target),vt.current=t.target.duration,gt.current=(0,u.z7)(parseInt(t.target.duration)),h("loadedMetadata"),v(!0),ct({width:t.target.videoWidth,height:t.target.videoHeight})},Ft=function(){S("ended")},Tt=function(e){(0,u.fr)(e.target),bt.current||(O(e.target.currentTime),t.handleVideoTimeChange&&t.handleVideoTimeChange(e.target.currentTime))},Zt=function(){h("waiting")},Rt=function(){S("playing"),bt.current||Z(!0),Ht()},Bt=function(){h("canplay")},Lt=function(){S("paused"),mt.current.currentTime===mt.current.duration||bt.current||U(!0),E(!1)},Vt=function(){h("error")},Ut=function(){document.fullscreenElement||document.webkitIsFullScreen?D(!0):D(!1)},zt=function(t){mt.current.currentTime=t,O(t)},Mt=function(){"error"===r&&mt.current.load(),qt()},_t=function(){return mt.current.currentTime},Ht=function t(){var e,n;if(bt.current||null!==(e=mt.current)&&void 0!==e&&e.paused||null!==(n=mt.current)&&void 0!==n&&n.ended)St.current=0;else if(window.requestAnimationFrame(t),(new Date).getTime()-St.current>=1e3/60&&mt.current){var r=mt.current.currentTime;O(r),St.current=(new Date).getTime()}},Wt=(0,c.t)((function(){try{N?document.exitFullscreen?document.exitFullscreen().catch(o()):document.webkitExitFullscreen&&document.webkitExitFullscreen().catch(o()):yt.current.requestFullscreen?yt.current.requestFullscreen().catch(o()):yt.current.webkitRequestFullscreen?yt.current.webkitRequestFullscreen().catch(o()):mt.current.webkitEnterFullscreen&&mt.current.webkitEnterFullscreen()}catch(t){}})),qt=function(){xt.current||(xt.current=mt.current.play().then((function(){xt.current=null})).catch((function(){xt.current=null,Xt()}))),At.current=setTimeout((function(){E(!0),At.current=void 0}),5e3)},Xt=function(){wt.current||(xt.current?(wt.current=!0,xt.current.then((function(){mt.current&&mt.current.pause(),xt.current=null,wt.current=!1}))):mt.current.pause())},Kt=function(){S("playing"),O(0),mt.current.currentTime=0,qt(),E(!0)},Gt=(0,c.t)((function(t){mt.current.volume=t})),Yt=function(t){switch(t){case"forward":_(!1);break;case"back":q(!1);break;case"play":Z(!1);break;case"pause":U(!1)}},Jt=function(e){t.handleReactionIconAnimationEnd&&t.handleReactionIconAnimationEnd(e)},Qt=function(e){"comment"===e.type?t.handleScrollToComment&&t.handleScrollToComment(e.comment.id):(zt(e.time),"init"===x&&qt())},$t=(0,c.t)((function(){var e;Q(!J),null===(e=t.handleToggleTheaterMode)||void 0===e||e.call(t)}));function te(t){var e=0;return e=t?Number(t):vt.current,(0,d.jsx)("div",{className:"asp-reaction-container",children:nt.map((function(t){var n="";return n=0===Number(t.time)?"11px":t.time/e*yt.current.offsetWidth+20>yt.current.offsetWidth||Number(t.time)>=e?"calc(100% - 11px)":t.time/e*100+"%",(0,d.jsx)(C,{left:n,reaction:t,isAnimate:Math.ceil(t.time)===Math.ceil(P)&&A,playerRef:yt,onReactionAnimationEnd:Jt,handleOnClick:Qt},t.comment.id)}))})}return(0,d.jsxs)("div",{className:"as-video-player ".concat(A&&"paused"!==x?"collapsed":""),ref:yt,onMouseLeave:function(){"playing"===x&&(clearTimeout(At.current),At.current=setTimeout((function(){E(!0),At.current=void 0}),350))},onMouseMove:function(){ut||(A&&E(!1),clearTimeout(At.current),At.current=void 0,"playing"!==x||Ot.current||(At.current=setTimeout((function(){E(!0),At.current=void 0}),5e3)))},children:[(0,d.jsxs)("div",{className:"asp-video-container",onTouchStart:function(){if("ended"!==x&&(!ht||"paused"!==x)){if(pt(!0),E(!1),clearTimeout(At.current),At.current=void 0,ht)return pt(!1),void E(!0);clearTimeout(Et.current),Et.current=setTimeout((function(){pt(!1),E(!0)}),2e3)}},children:["ended"===x&&(0,d.jsx)("div",{className:"asp-replay-wrapper",children:(0,d.jsxs)("div",{className:"center",children:[(0,d.jsx)("div",{className:"asp-replay-btn",onClick:Kt,children:(0,d.jsx)(f.NK,{})}),t.replayLayer&&(0,d.jsx)("div",{className:"replay-layer",children:t.replayLayer})]})}),ut&&(ht||"paused"===x)&&(0,d.jsx)("div",{className:"asp-mobile-action-wrapper",children:(0,d.jsx)("div",{className:"asp-mobile-play-btn",onTouchStart:function(){"playing"===x?Xt():qt()},children:"playing"===x?(0,d.jsx)(f.fp,{}):(0,d.jsx)(f.o1,{})})}),"init"===x&&(0,d.jsxs)("div",{className:"asp-thumbnail-wrapper",children:[(0,d.jsx)("div",{className:"asp-thumbnail-bg"}),(0,d.jsx)("img",{src:t.thumbnailURI,className:"asp-video-thumbnail"}),(0,d.jsx)("div",{className:"play-btn",onClick:function(){t.increaseView&&t.increaseView(),qt()},children:(0,d.jsx)(f.o1,{})}),""!==t.duration||"init"!==r&&"error"!==r?te(t.duration):""]}),"error"===r&&(0,d.jsx)("div",{className:"asp-error-wrapper",children:(0,d.jsxs)("div",{className:"asp-error-message",children:["Something went wrong. ",(0,d.jsx)("a",{onClick:function(){h("init"),mt.current.load()},children:"Refresh"})]})}),("waiting"===r||"init"===r)&&(0,d.jsx)(y,{}),(0,d.jsxs)("div",{className:"video-box",onClick:function(){ut||(mt.current.paused?qt():Xt())},onDoubleClick:function(){Wt()},children:[(0,d.jsx)("div",{className:"asp-effect-btn asp-play-effect-btn ".concat(T?"animate":""),onAnimationEnd:function(){Yt("play")},children:(0,d.jsx)(f.o1,{})}),(0,d.jsx)("div",{className:"asp-effect-btn asp-pause-effect-btn ".concat(L?"animate":""),onAnimationEnd:function(){Yt("pause")},children:(0,d.jsx)(f.fp,{})}),(0,d.jsx)("div",{className:"asp-effect-btn asp-forward-effect-btn ".concat(M?"animate":""),onAnimationEnd:function(){Yt("forward")},children:(0,d.jsx)(f.$E,{})}),(0,d.jsx)("div",{className:"asp-effect-btn asp-back-effect-btn ".concat(W?"animate":""),onAnimationEnd:function(){Yt("back")},children:(0,d.jsx)(f.Qe,{})}),t.annotationLayer&&(0,d.jsx)("div",{className:"annotation-layer",children:t.annotationLayer(P,st)}),(0,d.jsx)("video",{id:"main-player",playsInline:!0,preload:"auto",ref:mt,src:kt})]})]}),g&&"error"!==r&&(0,d.jsxs)(d.Fragment,{children:[!ut&&(0,d.jsx)("div",{className:"asp-gradient"}),(0,d.jsxs)("div",{className:"asp-control-bar ".concat(A&&"paused"!==x?"collapsed":""),onMouseEnter:function(){clearTimeout(At.current),At.current=void 0,Ot.current=!0},onMouseLeave:function(){Ot.current=!1},children:[te(),(0,d.jsx)(w,{videoRef:mt,duration:vt.current,currentSec:P,isCollapsed:A,handlePlayPercentageChange:function(t){O(t*vt.current),"ended"===x&&qt()},handleSeekingStart:function(){bt.current=!0,jt.current=x,Xt()},handleSeekingEnd:function(){bt.current=!1,Ht(),"paused"!==jt.current&&qt()}}),(0,d.jsxs)("div",{className:"asp-controls",children:[(0,d.jsxs)("div",{className:"asp-left-control",children:[!ut&&(0,d.jsxs)(d.Fragment,{children:["paused"===x&&(0,d.jsx)(p,{className:"asp-play-btn",title:"Play",icon:(0,d.jsx)(f.U_,{}),onClick:qt}),"playing"===x&&(0,d.jsx)(p,{className:"asp-pause-btn",title:"Pause",icon:(0,d.jsx)(f.yi,{}),onClick:Xt}),"ended"===x&&(0,d.jsx)(p,{className:"asp-replay-btn",title:"Replay",icon:(0,d.jsx)(f.dz,{}),onClick:Kt}),(0,d.jsx)($,{onChange:Gt})]}),(N||ut)&&(0,d.jsx)(V,{currentSec:P,duration:gt.current})]}),!N&&!ut&&(0,d.jsx)(V,{currentSec:P,duration:gt.current,centerd:!0}),N&&t.handleAddReaction&&!ut&&(0,d.jsx)("div",{className:"asp-reaction-button-container",children:s.t5.map((function(e){return(0,d.jsx)("div",{className:"asp-reaction-button",onClick:function(){!function(e){t.handleAddReaction&&t.handleAddReaction(e)}(e)},children:e},e)}))}),(0,d.jsxs)("div",{className:"asp-right-control",children:[!ft&&(0,d.jsx)(B,{speed:K,onSpeedChange:function(t){mt.current.playbackRate=t,G(t)}}),t.handleToggleTheaterMode&&!ut&&(0,d.jsx)(ot,{onClick:$t,isTheaterMode:J}),!l.vU&&(0,d.jsx)(p,{title:"Toggle PIP",icon:(0,d.jsx)(f.ih,{}),onClick:function(){document.pictureInPictureElement?document.exitPictureInPicture():mt.current.requestPictureInPicture&&mt.current.requestPictureInPicture()}}),(0,d.jsx)(rt,{isFullscreen:N,onClick:Wt})]})]})]})]})]})})),rt=(0,i.memo)((function(t){var e=t.isFullscreen,n=t.onClick;return(0,d.jsx)(p,{className:e?"asp-exitfullscreen-btn":"asp-fullscreen-btn",icon:e?(0,d.jsx)(f.$Z,{}):(0,d.jsx)(f.Xt,{}),title:e?"Exit Full screen":"Full screen",onClick:n})})),ot=(0,i.memo)((function(t){var e=t.isTheaterMode,n=t.onClick;return(0,d.jsx)(p,{title:e?"Default view":"Theater mode",icon:e?(0,d.jsx)("div",{className:"asp-control-btn-inner-icon asp-default-mode-icon"}):(0,d.jsx)("div",{className:"asp-control-btn-inner-icon asp-theator-mode-icon"}),onClick:n})}));const it=nt},30481:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(67294),o=n(39857),i=n(33877),a=n(85893);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function p(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,t);var e,n,r,f=u(h);function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),p(d(e=f.call(this,t)),"annotationCanvas",null),p(d(e),"anns",[]),p(d(e),"annsHash",""),p(d(e),"onManagerRefer",(function(){return e.dataManager})),p(d(e),"onUpdateAnns",(function(t){e.annsHash!==t&&(e.anns=e.dataManager.buildAnnsForSimulator(),e.annotationCanvas&&e.annotationCanvas.repaintAnnotations(!0,e.anns))})),p(d(e),"onDbClick",(function(){})),p(d(e),"onClick",(function(t){if(t.target&&t.target.className&&("string"==typeof t.target.className||"object"==s(t.target.className)&&t.target.className.baseVal)){var e="string"==typeof t.target.className?t.target.className:t.target.className.baseVal;(e.indexOf("video-ann-text-link")>=0||e.indexOf("video-ann-link-ct")>=0||e.indexOf("video-ann-link-tspan")>=0)&&t.stopPropagation()}})),e.networkManager=new o.r(e.props.videoID),e.networkManager.resetBaseVersion(t.baseVersion),e.dataManager=new o.P(!0,{ref:e.onManagerRefer,updateAnns:e.onUpdateAnns}),e}return e=h,(n=[{key:"componentDidUpdate",value:function(t){var e=this;this.dataManager&&(t.videoID!==this.props.videoID&&this.dataManager.updateVideo&&this.dataManager.updateVideo(this.props.videoID),t.baseVersion!==this.props.baseVersion&&this.networkManager.resetBaseVersion&&this.networkManager.resetBaseVersion(this.props.baseVersion),this.networkManager&&this.networkManager.canRequestNetwork&&this.networkManager.canRequestNetwork()&&this.networkManager.loadAnnotations(this.props.shareKey,this.props.isOnlyBlurProcessing,(function(t,n,r){t&&(e.dataManager.parseData(n,r),n.actions&&Array.isArray(n.actions)&&e.networkManager.loadImageAnnotationURL(n.actions.filter((function(t){return"image"===t.type})).map((function(t){if(t.contentType)return"image/png"===t.contentType?t.contentImageKey+".png":t.contentImageKey+".jpg";t.contentImageKey})),e.props.shareKey,(function(t,n){t&&e.dataManager.updateImageUrl(n.data)})))})),this.props.currentSec!==t.currentSec&&this.dataManager.repaintAnnotations(this.props.currentSec,""))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var t=this;return(0,a.jsx)("div",{className:"annotation-wrapper",id:"annotation-bg",children:(0,a.jsx)(i.Z,{ref:function(e){t.annotationCanvas=e,t.anns&&e&&t.annotationCanvas.repaintAnnotations(!0,t.anns)},scale:1,width:this.props.videoDimension.width,height:this.props.videoDimension.height,onDbClick:this.onDbClick,onClick:this.onClick})})}}])&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),h}(r.Component)},33877:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(94184),o=n.n(r),i=n(67294),a=n(85893);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function p(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(f,t);var e,n,r,s=u(f);function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),p(d(e=s.call(this,t)),"canvas",null),p(d(e),"_selectedMd5",""),p(d(e),"updateProgress",(function(t){e.setState({currentTime:t})})),p(d(e),"selectAnnotation",(function(t,n){e.selectedAnn&&"blur"==e.selectedAnn.type&&e.canvas.current&&e.selectedAnn.referSimulatorItem.current&&e.canvas.current.prepend(e.selectedAnn.referSimulatorItem.current.getSVGEle()),t&&t.length>0?e.selectedAnn=e.state.anns.find((function(e){return e.md5==t})):e.selectedAnn=void 0,e._selectedMd5=t,e.setState({selectedMd5:t,selectedBlur:n}),e.selectedAnn&&e.canvas.current&&e.selectedAnn.referSimulatorItem.current&&e.canvas.current.append(e.selectedAnn.referSimulatorItem.current.getSVGEle())})),p(d(e),"resetDrawableRect",(function(t,n){e.setState({scale:n,videoWidth:t.width,videoHeight:t.height})})),p(d(e),"repaintAnnotations",(function(t,n){var r=d(e);e.setState({readonly:t,anns:n},(function(){r._selectedMd5&&r._selectedMd5.length>0&&!r.selectedAnn&&(r.selectedAnn=n.find((function(t){return t.md5==r._selectedMd5})),r.selectedAnn&&r.canvas.current&&r.selectedAnn.referSimulatorItem.current&&setTimeout((function(){var t=r.selectedAnn.referSimulatorItem.current.getSVGEle();r.canvas.current.append(t)}),100))}))})),e.state={videoWidth:t.width,videoHeight:t.height,scale:t.scale,selectedMd5:"",selectedBlur:!1,readonly:!1,currentTime:0,anns:[]},e.canvas=(0,i.createRef)(),e}return e=f,r=[{key:"getDerivedStateFromProps",value:function(t,e){var n={};return e.videoWidth!=t.width&&(n.videoWidth=t.width),e.videoHeight!=t.height&&(n.videoHeight=t.height),e.scale!=t.scale&&(n.scale=t.scale),n}}],(n=[{key:"render",value:function(){var t=this,e="0 0 ".concat(this.state.videoWidth," ").concat(this.state.videoHeight);return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:o()("svg-canvas",{selectedBlur:this.state.selectedBlur}),ref:this.canvas,width:this.state.videoWidth,height:this.state.videoHeight,onClick:this.props.onClick,onDoubleClick:this.props.onDbClick,viewBox:e,children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("filter",{xmlns:"http://www.w3.org/2000/svg",id:"dropshadow-0",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,a.jsxs)("feComponentTransfer",{in:"SourceAlpha",children:[(0,a.jsx)("feFuncR",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncG",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncB",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncA",{type:"identity",tableValues:"0.4"})]}),(0,a.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,a.jsx)("feOffset",{dx:"0",dy:"2",result:"shadow"}),(0,a.jsx)("feComposite",{in:"SourceGraphic",in2:"shadow",operator:"over"})]}),(0,a.jsxs)("filter",{xmlns:"http://www.w3.org/2000/svg",id:"dropshadow-1",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,a.jsxs)("feComponentTransfer",{in:"SourceAlpha",children:[(0,a.jsx)("feFuncR",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncG",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncB",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncA",{type:"identity",tableValues:"0.4"})]}),(0,a.jsx)("feGaussianBlur",{stdDeviation:"8"}),(0,a.jsx)("feOffset",{dx:"0",dy:"4",result:"shadow"}),(0,a.jsx)("feComposite",{in:"SourceGraphic",in2:"shadow",operator:"over"})]}),(0,a.jsxs)("filter",{xmlns:"http://www.w3.org/2000/svg",id:"dropshadow-2",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,a.jsxs)("feComponentTransfer",{in:"SourceAlpha",children:[(0,a.jsx)("feFuncR",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncG",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncB",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncA",{type:"identity",tableValues:"0.4"})]}),(0,a.jsx)("feGaussianBlur",{stdDeviation:"12"}),(0,a.jsx)("feOffset",{dx:"0",dy:"6",result:"shadow"}),(0,a.jsx)("feComposite",{in:"SourceGraphic",in2:"shadow",operator:"over"})]}),(0,a.jsxs)("filter",{xmlns:"http://www.w3.org/2000/svg",id:"dropshadow-3",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,a.jsxs)("feComponentTransfer",{in:"SourceAlpha",children:[(0,a.jsx)("feFuncR",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncG",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncB",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncA",{type:"identity",tableValues:"0.4"})]}),(0,a.jsx)("feGaussianBlur",{stdDeviation:"16"}),(0,a.jsx)("feOffset",{dx:"0",dy:"2",result:"shadow"}),(0,a.jsx)("feComposite",{in:"SourceGraphic",in2:"shadow",operator:"over"})]}),(0,a.jsxs)("filter",{xmlns:"http://www.w3.org/2000/svg",id:"dropshadow-4",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,a.jsxs)("feComponentTransfer",{in:"SourceAlpha",children:[(0,a.jsx)("feFuncR",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncG",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncB",{type:"discrete",tableValues:"0"}),(0,a.jsx)("feFuncA",{type:"identity",tableValues:"0.4"})]}),(0,a.jsx)("feGaussianBlur",{stdDeviation:"20"}),(0,a.jsx)("feOffset",{dx:"0",dy:"4",result:"shadow"}),(0,a.jsx)("feComposite",{in:"SourceGraphic",in2:"shadow",operator:"over"})]}),(0,a.jsx)("filter",{id:"blur",children:(0,a.jsx)("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blurred"})}),(0,a.jsx)("marker",{id:"arrow-FF0000",markerWidth:"10",markerHeight:"10",refX:"7",refY:"3",orient:"auto",markerUnits:"strokeWidth",viewBox:"0 0 10 10",children:(0,a.jsx)("path",{d:"M0,0 L0,6 L9,3 z",fill:"#FF0000"})}),(0,a.jsx)("marker",{id:"arrow-FF9900",markerWidth:"10",markerHeight:"10",refX:"7",refY:"3",orient:"auto",markerUnits:"strokeWidth",viewBox:"0 0 10 10",children:(0,a.jsx)("path",{d:"M0,0 L0,6 L9,3 z",fill:"#FF9900"})}),(0,a.jsx)("marker",{id:"arrow-0072E6",markerWidth:"10",markerHeight:"10",refX:"7",refY:"3",orient:"auto",markerUnits:"strokeWidth",viewBox:"0 0 10 10",children:(0,a.jsx)("path",{d:"M0,0 L0,6 L9,3 z",fill:"#0072E6"})}),(0,a.jsx)("marker",{id:"arrow-12DC00",markerWidth:"10",markerHeight:"10",refX:"7",refY:"3",orient:"auto",markerUnits:"strokeWidth",viewBox:"0 0 10 10",children:(0,a.jsx)("path",{d:"M0,0 L0,6 L9,3 z",fill:"#12DC00"})}),(0,a.jsx)("marker",{id:"arrow-CF00FF",markerWidth:"10",markerHeight:"10",refX:"7",refY:"3",orient:"auto",markerUnits:"strokeWidth",viewBox:"0 0 10 10",children:(0,a.jsx)("path",{d:"M0,0 L0,6 L9,3 z",fill:"#CF00FF"})}),(0,a.jsx)("marker",{id:"arrow-FFFFFF",markerWidth:"10",markerHeight:"10",refX:"7",refY:"3",orient:"auto",markerUnits:"strokeWidth",viewBox:"0 0 10 10",children:(0,a.jsx)("path",{d:"M0,0 L0,6 L9,3 z",fill:"#FFFFFF"})})]}),this.state.anns.map((function(e){return e&&e.code4Paint?e.code4Paint(t.state.readonly,{retrieveCanvas:function(){return t.canvas?t.canvas.current:null},currentTime:t.state.currentTime,selectedBlur:t.state.selectedBlur,selectedMd5:t._selectedMd5,scale:t.state.scale,onSelect:t.props.onSelect,onDragStart:t.props.onDragStart,onDragEnd:t.props.onDragEnd}):""})),(0,a.jsx)("use",{href:"#-1"})]})}}])&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(i.Component)},80686:(t,e,n)=>{n.d(e,{z:()=>s});var r=n(67294),o=n(3664),i=n(36331),a=n(88091);function s(t,e){var n=e.onMove,s=e.onEnd,c=e.onStart,l=(0,o.d)(c),u=(0,o.d)(n),f=(0,o.d)(s);(0,r.useEffect)((function(){var e=(0,i.Ql)(t);if(e){var n={x:0,y:0},r=new AbortController;return e.addEventListener("pointerdown",(function(t){var r,o=t.x,i=t.y;if(!1!==(null===(r=l.current)||void 0===r?void 0:r.call(this,t,{x:o,y:i}))){var s;n={x:o,y:i},t.preventDefault(),a.vU&&((s=document.createElement("div")).style.position="fixed",s.style.inset="0",s.style.zIndex="2147483647",document.documentElement.append(s)),e.setPointerCapture(t.pointerId);var c=new AbortController;e.addEventListener("pointermove",(function(t){var e,r=t.x,o=t.y,i=r-n.x,a=o-n.y;null===(e=u.current)||void 0===e||e.call(this,t,{x:r,y:o,dx:i,dy:a})}),{signal:c.signal,passive:!0}),e.addEventListener("pointerup",(function(t){var r,o,i=t.x,a=t.y,l=i-n.x,u=a-n.y;null===(r=s)||void 0===r||r.remove(),c.abort(),e.releasePointerCapture(t.pointerId),null===(o=f.current)||void 0===o||o.call(this,t,{x:i,y:a,dx:l,dy:u})}),{once:!0})}}),{signal:r.signal}),function(){return r.abort()}}}),[])}},45384:(t,e,n)=>{n.d(e,{t:()=>o});var r=n(67294);function o(t){var e=(0,r.useRef)(t);e.current=(0,r.useMemo)((function(){return t}),[t]);var n=(0,r.useRef)();return n.current||(n.current=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.current.apply(this,n)}),n.current}},3664:(t,e,n)=>{n.d(e,{d:()=>o});var r=n(67294);function o(t){var e=(0,r.useRef)(t);return e.current=t,e}},39857:(t,e,n)=>{n.d(e,{P:()=>Sn,r:()=>wn});n(15579);var r=n(60881),o=(n(50626),n(48086)),i=(n(47386),n(48889)),a=n(57119),s=n(28374),c=n(4976);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function f(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l(e)?e:String(e)}var p=f((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"canUndo",(function(){return e.editActionsUndo&&e.editActionsUndo.length>0})),d(this,"canRedo",(function(){return e.editActionsRedo&&e.editActionsRedo.length>0})),d(this,"doUndo",(function(t){var n=e.editActionsUndo.pop();n&&e.editActionsRedo.push(n),t&&t(n)})),d(this,"doRedo",(function(t){var n=e.editActionsRedo.pop();n&&e.editActionsUndo.push(n),t&&t(n)})),d(this,"doClear",(function(t){e.editActionsUndo=[],e.editActionsRedo=[],t&&t()})),d(this,"doAddNewAction",(function(t,n,r,o){e.editActionsUndo.push({actionType:t,md5:n,prevData:o,data:r}),e.editActionsRedo.length>0&&(e.editActionsRedo=[])})),this.editActionsUndo=[],this.editActionsRedo=[]}));d(p,"ACTION_TYPE_ADD","ADD"),d(p,"ACTION_TYPE_DELETE","DELETE"),d(p,"ACTION_TYPE_UPDATE","UPDATE");var m=n(67618),y=n(78718),g=n.n(y),v=n(79993),b=n(12956),x=(n(79133),n(32787)),w=n(67294),S=n(94184),j=n.n(S),P=n(66358),O=n(5826),k=n(85893);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===I(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}P.p8.registerPlugin(O._);var F=function(t,e){var n=e.createSVGPoint();n.x=t.clientX,n.y=t.clientY;var r=n.matrixTransform(e.getScreenCTM().inverse());return{x:r.x,y:r.y}},T=(0,w.forwardRef)((function(t,e){var n=N((0,w.useState)(null),2),r=n[0],o=n[1],i=N((0,w.useState)(null),2),a=i[0],c=i[1],l=N((0,w.useState)(null),2),u=l[0],f=l[1],d=N((0,w.useState)({width:t.width,height:t.height}),2),h=d[0],p=d[1],m=N((0,w.useState)({left:t.left,top:t.top}),2),y=m[0],g=m[1],b=N((0,w.useState)(t.scale),2),S=b[0],C=b[1],E=N((0,w.useState)(!1),2),D=E[0],T=E[1],Z=null,R=null,B=(0,w.useCallback)((function(e){if(null!==e){o(e);var n=e.querySelector(".video-ann-text-bg");Z=e.querySelector("textarea");var r=function(e){t.onSelect&&t.onSelect(t.md5,(function(t){return!t||(Y(),!1)}))};if(t.readonly)u&&u.disable(),Z&&Z.removeEventListener("click",r);else{var i=-1,s=-1,l=null,d=null,h=null,m=null,y=[];v.Z.isSafari()?((l=e.querySelector(".video-ann-text-ct")).addEventListener("click",r),n.addEventListener("click",r),y=[l,n]):((l=e.querySelector(".video-ann-text-foreign")).addEventListener("click",r),document.activeElement!=Z&&(Z.style.pointerEvents="none"),y=[l]);var b=e.querySelector(".topleft"),x=e.querySelector(".topright"),w=e.querySelector(".bottomleft"),S=e.querySelector(".bottomright");if(null==u){var j=O._.create(y,{type:"x,y",edgeResistance:1,inertia:!1,bounds:document.getElementById("vjs-annotation-bg"),onDrag:function(t){P.p8.to(b,{x:P.p8.getProperty(d,"x"),y:P.p8.getProperty(d,"y"),duration:0}),P.p8.to(x,{x:P.p8.getProperty(d,"x"),y:P.p8.getProperty(d,"y"),duration:0}),P.p8.to(w,{x:P.p8.getProperty(d,"x"),y:P.p8.getProperty(d,"y"),duration:0}),P.p8.to(S,{x:P.p8.getProperty(d,"x"),y:P.p8.getProperty(d,"y"),duration:0}),P.p8.to(n,{x:P.p8.getProperty(d,"x"),y:P.p8.getProperty(d,"y"),duration:0}),P.p8.to(l,{x:P.p8.getProperty(d,"x"),y:P.p8.getProperty(d,"y"),duration:0})},onDragStart:function(e){d=e.target,T(!0),(t.readonly||v.Z.isSafari())&&d&&"tspan"==d.tagName&&(d=l),i=n.x.baseVal.value,s=n.y.baseVal.value;var r=function(t){return t.target&&t.target.parentNode?(e="TEXTAREA"==t.target.nodeName||"tspan"==t.target.nodeName?t.target.parentNode.parentNode.className:t.target.parentNode.className)&&e.baseVal?e.baseVal:e:null;var e}(e);r&&r.indexOf(t.md5)>=0&&t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(e){var o={left:i+P.p8.getProperty(d,"x"),top:s+P.p8.getProperty(d,"y")};o.x=o.left,o.y=o.top,t.onDragEnd&&t.onDragEnd(e,t.md5,o),P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(l,{x:0,y:0,duration:0}),P.p8.to(b,{x:0,y:0,duration:0}),P.p8.to(x,{x:0,y:0,duration:0}),P.p8.to(w,{x:0,y:0,duration:0}),P.p8.to(S,{x:0,y:0,duration:0}),i=s=-1,Z.disabled=!0,l.removeEventListener("click",r),setTimeout((function(){Z.disabled=!1,l.addEventListener("click",r)}),200),d=null,T(!1)}});j&&j.length>0&&f(j[0])}var k=-1,C=-1,A=0,E=0,N=!1,D=!1,B=!1,L=!1,V=t.retrieveCanvas();if(null==a){var U=O._.create(".drag-area-".concat(t.md5),{type:"x,y",edgeResistance:1,intertia:!1,bounds:document.getElementById("vjs-annotation-bg"),onDrag:function(e){if((N||D||B||L)&&d){var n=F(e,V),r=(n.x,n.y,t.minSize);R&&(r=R.resizableTextArea.props.minSize);var o={duration:0},i={x:0,y:0,duration:0},a={x:0,y:0,duration:0},s={x:0,y:0,duration:0},c={x:0,y:0,duration:0};N&&(B?s.x=P.p8.getProperty(d,"x"):i.x=P.p8.getProperty(d,"x"),o.x=A+P.p8.getProperty(d,"x"),o.width=k-P.p8.getProperty(d,"x")),D&&(B?c.x=P.p8.getProperty(d,"x"):a.x=P.p8.getProperty(d,"x"),o.width=k+P.p8.getProperty(d,"x")),B&&(N?a.y=P.p8.getProperty(d,"y"):i.y=P.p8.getProperty(d,"y"),o.y=E+P.p8.getProperty(d,"y"),o.height=C-P.p8.getProperty(d,"y")),L&&(N?c.y=P.p8.getProperty(d,"y"):s.y=P.p8.getProperty(d,"y"),o.height=C+P.p8.getProperty(d,"y")),o.width<=r.width?(o.width=r.width,h={x:0,duration:0},N&&B?(o.x=P.p8.getProperty(x,"cx")-o.width,h.cx=o.x,s.cx=h.cx,s.x=0):N&&L?(o.x=P.p8.getProperty(x,"cx")-o.width,h.cx=o.x,i.cx=h.cx,i.x=0):D&&B?(h.cx=P.p8.getProperty(b,"cx")+o.width,c.cx=h.cx,c.x=0):D&&L&&(h.cx=P.p8.getProperty(w,"cx")+o.width,a.cx=h.cx,a.x=0),P.p8.to(d,h)):h&&(b.style.cx=null,x.style.cx=null,w.style.cx=null,S.style.cx=null),o.height<=r.height?(o.height=r.height,m={y:0,duration:0},N&&B?(o.y=P.p8.getProperty(w,"cy")-o.height,m.cy=o.y,a.cy=m.cy,a.y=0):N&&L?(m.cy=P.p8.getProperty(b,"cy")+o.height,c.cy=m.cy,c.y=0):D&&B?(o.y=P.p8.getProperty(w,"cy")-o.height,m.cy=o.y,i.cy=m.cy,i.y=0):D&&L&&(m.cy=P.p8.getProperty(x,"cy")+o.height,s.cy=m.cy,s.y=0),P.p8.to(d,m)):m&&(b.style.cy=null,x.style.cy=null,w.style.cy=null,S.style.cy=null),p({width:o.width,height:o.height}),g({left:o.x?o.x:A,top:o.y?o.y:E}),b!=d&&P.p8.to(b,i),x!=d&&P.p8.to(x,a),w!=d&&P.p8.to(w,s),S!=d&&P.p8.to(S,c)}else U.forEach((function(t,e){t.endDrag()}))},onDragStart:function(e,r,o,i,a){d=e.target,T(!0);var s=e.target.className;"object"==I(s)&&(s=s.baseVal),k=n.width.animVal.value,C=n.height.animVal.value,A=n.x.animVal.value,E=n.y.animVal.value,N=s.indexOf("left")>=0,D=s.indexOf("right")>=0,B=s.indexOf("top")>=0,L=s.indexOf("bottom")>=0,t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(e){k=C=-1,N=D=B=L=!1;var r={x:n.x.baseVal.value+P.p8.getProperty(n,"x"),y:n.y.baseVal.value+P.p8.getProperty(n,"y"),width:P.p8.getProperty(n,"width"),height:P.p8.getProperty(n,"height")};r.left=r.x,r.top=r.y,t.onDragEnd&&t.onDragEnd(e,t.md5,r,!0),P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(l,{x:0,y:0,duration:0}),P.p8.to(b,{x:0,y:0,duration:0}),b.style="transform-origin: 0px 0px; touch-action: none; user-select: none;",P.p8.to(x,{x:0,y:0,duration:0}),x.style="transform-origin: 0px 0px; touch-action: none; user-select: none;",P.p8.to(w,{x:0,y:0,duration:0}),w.style="transform-origin: 0px 0px; touch-action: none; user-select: none;",P.p8.to(S,{x:0,y:0,duration:0}),S.style="transform-origin: 0px 0px; touch-action: none; user-select: none;",d=null,m=null,h=null,T(!1)}});U&&U.length>0&&c(U)}P.p8.to(e,{x:0,y:0,duration:0}),P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(l,{x:0,y:0,duration:0}),P.p8.to(b,{x:0,y:0,duration:0}),P.p8.to(x,{x:0,y:0,duration:0}),P.p8.to(w,{x:0,y:0,duration:0}),P.p8.to(S,{x:0,y:0,duration:0})}}}),[t.isLittleMode,t.readonly]),L=(0,w.useCallback)((function(t){t&&(R=t)}),[t.md5,t.current]),V=N((0,w.useState)(t.show),2),U=V[0],z=V[1],M=N((0,w.useState)(t.content),2),_=M[0],H=M[1],W=N((0,w.useState)(t.format),2),q=W[0],X=W[1],K=function(){z(!0)},G=function(){z(!1)},Y=function(){if(!D){var e=document.querySelector("#video-ann-"+t.md5);e&&document.activeElement!=e&&(e.focus(),e&&(e.style.pointerEvents="auto"),e.selectionStart==e.selectionEnd&&0==e.selectionEnd&&e.setSelectionRange(e.value.length,e.value.length))}},J=function(t,e,n){null!=n.content&&null!=n.content&&H(n.content),n.format&&X(n.format),C(t),p({width:e.width,height:e.height}),g({left:n.left,top:n.top})},Q=function(){var e=r.cloneNode(!0);e.setAttribute("transform","matrix(1,0,0,1,0,0)"),e.style.opacity=1;var n=e.querySelector(".video-ann-text-foreign");e.removeChild(n),e.querySelectorAll(".select-circle").forEach((function(t,n){e.removeChild(t)}));var o=e.querySelector(".video-ann-text-bg");return o.setAttribute("x",0),o.setAttribute("y",0),o.setAttribute("ry",t.borderRadius),o.setAttribute("rx",t.borderRadius),o.setAttribute("style","filter:url(#dropshadow-".concat(t.assistIndex,")")),e.querySelectorAll("tspan").forEach((function(t,e){t.setAttribute("x",parseInt(t.getAttribute("x"))-y.left),t.setAttribute("y",parseInt(t.getAttribute("y"))-y.top)})),e.querySelector(".video-ann-text-ct").setAttribute("style",""),e};(0,w.useImperativeHandle)(e,(function(){return{refreshUI:J,getSVGEle:function(){return r},outerHTML:Q,focus:Y,show:K,hide:G}}));var $=q.color,tt="transparent";q.bgColor?tt=q.bgColor:q.isBg&&(tt=$,$="white");var et=t.isLink?"Insert a link":"Enter text here";t.isLink&&document.activeElement&&"video-ann-link-title-textarea"==document.activeElement.id&&(et="Add link text");var nt=[];_&&_.length>0&&(nt=_.split("\n")),nt.length<=0&&t.readonly&&nt.push(et);var rt="4px ".concat(t.txtDispOffsetX,"px");if(v.Z.isSafari()){var ot=s.ZP.round(t.txtDispOffsetX/S,1);rt="1px ".concat(ot,"px")}var it=6*S;it<6&&(it=6);var at=0,st=0,ct="start",lt=0;return"center"==q.align[1]?at=(h.height-t.minSize.height)/2:"bottom"==q.align[1]&&(at=h.height-t.minSize.height),"center"==q.align[0]?(st=(h.width-t.minSize.width)/2,ct="middle",lt=y.left+h.width/2):"right"==q.align[0]?(st=h.width-t.minSize.width,ct="end",lt=y.left+h.width-t.txtDispOffsetX):lt=y.left+t.txtDispOffsetX+st,(0,k.jsxs)("g",{className:j()("video-ann",t.md5,{show:U,isLink:t.isLink,readonly:t.readonly,selected:t.current==t.md5}),style:{opacity:t.selectedBlur?.1:1},ref:B,id:"svg-g-".concat(t.md5),children:[(0,k.jsx)("rect",{className:"video-ann-text-bg",x:y.left,y:y.top,rx:t.borderRadius,ry:t.borderRadius,strokeWidth:t.borderWidth,stroke:tt,min:1,max:10,value:9,style:{filter:"url(#dropshadow-".concat(t.assistIndex,")")},width:h.width,height:h.height,fill:tt}),t.readonly&&t.isLink?(0,k.jsx)("a",{xmlns:"http://www.w3.org/1999/xhtml",className:j()("video-ann-text-link","ct-"+$.substring(1)),xlinkTitle:t.link,type:"link",target:"_blank",xlinkHref:t.link,children:(0,k.jsx)("text",{className:"video-ann-link-ct",fill:$,fontFamily:q.fontFamily,fontSize:q.size,fontWeight:q.bold||"transparent"==tt?"900":"normal",fontStyle:q.italy?"italic":"normal",children:nt.map((function(e,n){return(0,k.jsx)("tspan",{className:"video-ann-link-tspan",stroke:"#FFFFFF"==$?"black":"white",strokeWidth:"transparent"==tt?t.strokeWidth:0,textAnchor:ct,style:{textDecoration:t.isLink?"underline":"none"},x:lt,y:y.top+t.txtDispOffsetY+n*q.size*1.5+at+4,children:e},n)}))})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("text",{className:"video-ann-text-ct",fill:$,style:{display:t.readonly||v.Z.isSafari()?"block":"none"},fontFamily:q.fontFamily,fontSize:q.size,fontWeight:q.bold||"transparent"==tt?"900":"normal",fontStyle:q.italy?"italic":"normal",children:nt.map((function(e,n){return(0,k.jsx)("tspan",{stroke:"#FFFFFF"==$?"black":"white",strokeWidth:"transparent"==tt?t.strokeWidth:0,textAnchor:ct,style:{textDecoration:t.isLink?"underline":"none"},x:lt,y:y.top+t.txtDispOffsetY+n*q.size*1.5+at+4,children:e},n)}))}),(0,k.jsx)("foreignObject",{x:y.left,y:y.top,className:"video-ann-text-foreign",width:h.width,height:h.height,strokeWidth:t.borderWidth,stroke:"transparent",style:{display:t.readonly||v.Z.isSafari()?"none":"block"},fill:tt,children:(0,k.jsx)(x.Z.TextArea,{placeholder:et,className:j()("video-ann-text-textarea","ct-"+$.substring(1)),id:"video-ann-".concat(t.md5),spellCheck:"false",tabIndex:5e3,style:{color:$,textDecoration:t.isLink?"underline ".concat(t.underlineWidth,"px ").concat($):"none",fontFamily:q.fontFamily,fontSize:q.size,textAlign:q.align[0],padding:rt,paddingTop:4+at,overflow:"auto",whiteSpace:"pre",background:tt,WebkitTextStroke:"transparent"==tt?"".concat(t.strokeWidth,"#FFFFFF"==$?"px #000000":"px #ffffff"):"unset",fontWeight:q.bold||"transparent"==tt?"900":"normal",fontStyle:q.italy?"italic":"normal"},readOnly:t.current!=t.md5,ref:L,minSize:A({},t.minSize),value:_,onFocus:function(){u&&u.disable()},onBlur:function(t){u&&u.enable(),t.target.style.pointerEvents="none"},onChange:function(e){t.handleChangeCt(e.target.value)}})})]}),(0,k.jsx)("circle",{className:j()("select-circle topleft","drag-area-".concat(t.md5)),r:it,cx:t.left,cy:t.top}),(0,k.jsx)("circle",{className:j()("select-circle topright","drag-area-".concat(t.md5)),r:it,cx:t.left+t.width,cy:t.top}),(0,k.jsx)("circle",{className:j()("select-circle bottomright","drag-area-".concat(t.md5)),r:it,cx:t.left+t.width,cy:t.top+t.height}),(0,k.jsx)("circle",{className:j()("select-circle bottomleft","drag-area-".concat(t.md5)),r:it,cx:t.left,cy:t.top+t.height})]},t.md5)})),Z=(0,w.forwardRef)((function(t,e){var n=N((0,w.useState)(t.show),2),r=n[0],o=n[1],i=N((0,w.useState)(null),2),a=i[0],s=i[1],c=N((0,w.useState)(null),2),l=c[0],u=c[1],f=N((0,w.useState)(t.format.blur),2),d=f[0],h=f[1],p=N((0,w.useState)({x:t.x,y:t.y}),2),m=p[0],y=p[1],g=null!=document.fullscreenElement,b=t.retrieveCanvas();v.Z.isFirefox()&&(0,w.useEffect)((function(){document.onfullscreenchange=function(t){var e=a.querySelector(".video-ann-blur-foreign");P.p8.to(e,{x:0,y:0,duration:0})}}),[a]);var x=(0,w.useCallback)((function(e){if(null!==e){s(e);var n=e.querySelector(".video-ann-blur-bg"),r=e.querySelector(".video-ann-blur-foreign"),o=e.querySelector(".topleft"),i=e.querySelector(".topright"),a=e.querySelector(".bottomleft"),c=e.querySelector(".bottomright");if(r||(r=n),t.readonly||g)l&&l.disable();else{var f=O._.create([n,r],{type:"x,y",edgeResistance:1,bounds:b,cursor:"move",activeCursor:"move",onClick:function(){t.onSelect(t.md5)},onDrag:function(t){P.p8.to(o,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0}),P.p8.to(i,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0}),P.p8.to(a,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0}),P.p8.to(c,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0}),P.p8.to(r,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0}),v.Z.isFirefox()&&y({x:n.x.baseVal.value+P.p8.getProperty(n,"x"),y:n.y.baseVal.value+P.p8.getProperty(n,"y")})},onDragStart:function(e,n,r,o,i){var a=F(e,b);a.x,a.y;t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(e){var s=P.p8.getProperty(n,"x"),l=P.p8.getProperty(n,"y"),u=P.p8.getProperty(n,"width"),f=P.p8.getProperty(n,"height");"object"==I(u)&&(u=u.baseVal.value),"object"==I(f)&&(f=f.baseVal.value),"object"==I(s)&&(s=s.baseVal.value),"object"==I(l)&&(l=l.baseVal.value);var d={x:n.x.baseVal.value+s,y:n.y.baseVal.value+l,width:u,height:f};d.left=d.x,d.top=d.y,d.right=d.x+d.width,d.bottom=d.y+d.height,t.onDragEnd&&t.onDragEnd(e,t.md5,d),P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(r,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(c,{x:0,y:0,duration:0})}});u(f[0]),P.p8.to(n,{x:0,y:0,duration:0});var d=-1,h=-1,p=!1,m=!1,x=!1,w=!1,S=null,j=null,k=O._.create(".drag-area-".concat(t.md5),{type:"x,y",edgeResistance:1,intertia:!1,bounds:document.getElementById("vjs-annotation-bg"),onDrag:function(t){if((p||m||x||w)&&S){var e=F(t,b),s=(e.x,e.y,{duration:0}),l={x:0,y:0,duration:0},u={x:0,y:0,duration:0},f={x:0,y:0,duration:0},g={x:0,y:0,duration:0};if(p&&(x?f.x=P.p8.getProperty(S,"x"):l.x=P.p8.getProperty(S,"x"),s.x=P.p8.getProperty(S,"x"),s.width=d-s.x),m&&(x?g.x=P.p8.getProperty(S,"x"):u.x=P.p8.getProperty(S,"x"),s.width=d+P.p8.getProperty(S,"x")),x&&(p?u.y=P.p8.getProperty(S,"y"):l.y=P.p8.getProperty(S,"y"),s.y=P.p8.getProperty(S,"y"),s.height=h-s.y),w&&(p?g.y=P.p8.getProperty(S,"y"):f.y=P.p8.getProperty(S,"y"),s.height=h+P.p8.getProperty(S,"y")),s.width<=32||s.height<=32)return null==j&&(j={x:0,y:0,duration:0},p&&x?(j.x=P.p8.getProperty(n,"x"),j.y=P.p8.getProperty(n,"y")):p&&w?(j.x=P.p8.getProperty(n,"x"),j.y=P.p8.getProperty(c,"y")):m&&x?(j.x=P.p8.getProperty(c,"x"),j.y=P.p8.getProperty(n,"y")):m&&w&&(j.x=P.p8.getProperty(i,"x"),j.y=P.p8.getProperty(a,"y"))),void P.p8.to(S,j);j=null,v.Z.isFirefox()&&y({x:n.x.baseVal.value+P.p8.getProperty(n,"x"),y:n.y.baseVal.value+P.p8.getProperty(n,"y")}),P.p8.to(n,s),P.p8.to(r,s),o!=S&&P.p8.to(o,l),i!=S&&P.p8.to(i,u),a!=S&&P.p8.to(a,f),c!=S&&P.p8.to(c,g)}else k.forEach((function(t,e){t.endDrag()}))},onDragStart:function(e,r,o,i,a){S=e.target;var s=e.target.className;"object"==I(s)&&(s=s.baseVal),d=n.width.animVal.value,h=n.height.animVal.value,p=s.indexOf("left")>=0,m=s.indexOf("right")>=0,x=s.indexOf("top")>=0,w=s.indexOf("bottom")>=0,t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(s){d=h=-1,p=m=x=w=!1;var l={x:n.x.baseVal.value+P.p8.getProperty(n,"x"),y:n.y.baseVal.value+P.p8.getProperty(n,"y"),width:P.p8.getProperty(n,"width"),height:P.p8.getProperty(n,"height")};l.left=l.x,l.top=l.y,l.right=l.x+l.width,l.bottom=l.y+l.height,t.onDragEnd&&t.onDragEnd(s,t.md5,l,!0),P.p8.to(e,{x:0,y:0,duration:0}),P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(r,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(c,{x:0,y:0,duration:0}),S=null}});P.p8.to(e,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(c,{x:0,y:0,duration:0})}}}),[t.readonly,g]),S=function(){o(!0)},C=function(){o(!1)},A=function(t){h(t)},E=function(){return a.cloneNode(!0).querySelector(".video-ann-blur-foreign")};(0,w.useImperativeHandle)(e,(function(){return{refreshUI:A,getSVGEle:function(){return a},outerHTML:E,show:S,hide:C}}));var D=6*t.scale;return D<6&&(D=6),(0,k.jsxs)("g",{className:j()("video-ann",t.md5,{show:r,readonly:t.readonly||g,selected:t.current==t.md5}),ref:x,children:[v.Z.isSafari()?"":(0,k.jsx)("foreignObject",{className:"video-ann-blur-foreign",x:t.x,y:t.y,width:t.width,height:t.height,children:(0,k.jsx)("div",{xmlns:"http://www.w3.org/1999/xhtml",className:"video-ann-blur-div",style:{background:v.Z.isFirefox()?"".concat(0-m.x,"px ").concat(0-m.y,"px no-repeat -moz-element(#").concat(t.readonly?"main-player":"video-player_html5_api",")"):"",backdropFilter:"blur(".concat(d,"px)"),WebkitBackdropFilter:"blur(".concat(d,"px)"),filter:"blur(".concat(d,"px)")}})}),(0,k.jsx)("rect",{className:"video-ann-blur-bg",x:t.x,y:t.y,height:t.height,width:t.width,style:{strokeDasharray:"4, 6",opacity:t.current==t.md5||v.Z.isSafari()?1:0},rx:0,ry:0,strokeWidth:.5,stroke:v.Z.isSafari()?"transparent":"black",fill:v.Z.isSafari()?"#FFFFFF":"transparent"}),(0,k.jsx)("circle",{className:j()("select-circle topleft","drag-area-".concat(t.md5)),r:D,cx:t.x,cy:t.y}),(0,k.jsx)("circle",{className:j()("select-circle topright","drag-area-".concat(t.md5)),r:D,cx:t.x+t.width,cy:t.y}),(0,k.jsx)("circle",{className:j()("select-circle bottomright","drag-area-".concat(t.md5)),r:D,cx:t.x+t.width,cy:t.y+t.height}),(0,k.jsx)("circle",{className:j()("select-circle bottomleft","drag-area-".concat(t.md5)),r:D,cx:t.x,cy:t.y+t.height})]},t.md5)})),R=(0,w.forwardRef)((function(t,e){var n=N((0,w.useState)(t.show),2),r=n[0],o=n[1],i=N((0,w.useState)(t.format.alpha),2),a=i[0],s=i[1],c=N((0,w.useState)(t.format.color),2),l=c[0],u=c[1],f=N((0,w.useState)(t.format.border),2),d=f[0],h=f[1],p=N((0,w.useState)(t.format.shadow),2),m=p[0],y=p[1],g=N((0,w.useState)(null),2),v=g[0],b=g[1],x=N((0,w.useState)(null),2),S=x[0],C=x[1],A=t.retrieveCanvas(),E=(0,w.useCallback)((function(e){if(null!==e){b(e);var n=e.querySelector(".video-ann-image-bg"),r=e.querySelector(".video-ann-image-ct"),o=e.querySelector(".topleft"),i=e.querySelector(".topright"),a=e.querySelector(".bottomleft"),s=e.querySelector(".bottomright");if(t.readonly)S&&S.disable();else{var c=d>0&&!t.showPlaceholder?n:r,l=O._.create(c,{type:"x,y",edgeResistance:1,bounds:A,cursor:"move",activeCursor:"move",onClick:function(){t.onSelect(t.md5)},onDrag:function(t){P.p8.to(o,{x:P.p8.getProperty(c,"x"),y:P.p8.getProperty(c,"y"),duration:0}),P.p8.to(r,{x:P.p8.getProperty(c,"x"),y:P.p8.getProperty(c,"y"),duration:0}),P.p8.to(i,{x:P.p8.getProperty(c,"x"),y:P.p8.getProperty(c,"y"),duration:0}),P.p8.to(a,{x:P.p8.getProperty(c,"x"),y:P.p8.getProperty(c,"y"),duration:0}),P.p8.to(s,{x:P.p8.getProperty(c,"x"),y:P.p8.getProperty(c,"y"),duration:0}),P.p8.to(n,{x:P.p8.getProperty(c,"x"),y:P.p8.getProperty(c,"y"),duration:0})},onDragStart:function(e,n,r,o,i){var a=F(e,A);a.x,a.y;t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(e){var c=P.p8.getProperty(r,"x"),l=P.p8.getProperty(r,"y"),u=P.p8.getProperty(r,"width"),f=P.p8.getProperty(r,"height");"object"==I(u)&&(u=u.baseVal.value),"object"==I(f)&&(f=f.baseVal.value),"object"==I(c)&&(c=c.baseVal.value),"object"==I(l)&&(l=l.baseVal.value);var d={x:r.x.baseVal.value+c,y:r.y.baseVal.value+l,width:u,height:f};d.left=d.x,d.top=d.y,d.right=d.x+d.width,d.bottom=d.y+d.height,t.onDragEnd&&t.onDragEnd(e,t.md5,d),P.p8.to(r,{x:0,y:0,duration:0}),P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(s,{x:0,y:0,duration:0})}});C(l[0]),P.p8.to(r,{x:0,y:0,duration:0});var u=-1,f=-1,h=!1,p=!1,m=!1,y=!1,g=null,v=null,x=O._.create(".drag-area-".concat(t.md5),{type:"x,y",edgeResistance:1,intertia:!1,bounds:document.getElementById("vjs-annotation-bg"),onDrag:function(e){if((h||p||m||y)&&g){var c=F(e,A),l=(c.x,c.y,{duration:0}),b={x:0,y:0,duration:0},w={x:0,y:0,duration:0},S={x:0,y:0,duration:0},j={x:0,y:0,duration:0};h&&(l.x=P.p8.getProperty(g,"x"),l.width=u-l.x),p&&(l.width=u+P.p8.getProperty(g,"x")),m&&(l.y=P.p8.getProperty(g,"y"),l.height=f-l.y),y&&(l.height=f+P.p8.getProperty(g,"y"));var O=t.imageSize.width/l.width,k=t.imageSize.height/l.height,C=O<k?O:k,E=t.imageSize.width/C,I=t.imageSize.height/C,N=E-l.width,D=I-l.height;if(h&&(m?(S.x=P.p8.getProperty(g,"x")-N,b.x=S.x,b.y=P.p8.getProperty(g,"y")-D,w.y=b.y):(b.x=P.p8.getProperty(g,"x")-N,S.x=b.x,S.y=P.p8.getProperty(g,"y")+D,j.y=S.y),l.x=b.x,l.y=b.y),p&&(m?(j.x=P.p8.getProperty(g,"x")+N,w.x=j.x,w.y=P.p8.getProperty(g,"y")-D,b.y=w.y,l.y=w.y):(w.x=P.p8.getProperty(g,"x")+N,j.x=w.x,j.y=P.p8.getProperty(g,"y")+D,S.y=j.y)),l.width=E,l.height=I,l.width<=6||l.height<=6)return null==v&&(v={x:0,y:0,duration:0},h&&m?(v.x=P.p8.getProperty(r,"x"),v.y=P.p8.getProperty(r,"y")):h&&y?(v.x=P.p8.getProperty(r,"x"),v.y=P.p8.getProperty(s,"y")):p&&m?(v.x=P.p8.getProperty(s,"x"),v.y=P.p8.getProperty(r,"y")):p&&y&&(v.x=P.p8.getProperty(i,"x"),v.y=P.p8.getProperty(a,"y"))),void P.p8.to(g,v);v=null,P.p8.to(r,l),n&&P.p8.to(n,{duration:0,x:l.x,y:l.y,height:l.height+d,width:l.width+d}),P.p8.to(o,b),P.p8.to(i,w),P.p8.to(a,S),P.p8.to(s,j)}else x.forEach((function(t,e){t.endDrag()}))},onDragStart:function(e,n,o,i,a){g=e.target;var s=e.target.className;"object"==I(s)&&(s=s.baseVal),u=r.width.animVal.value,f=r.height.animVal.value,h=s.indexOf("left")>=0,p=s.indexOf("right")>=0,m=s.indexOf("top")>=0,y=s.indexOf("bottom")>=0,t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(c){u=f=-1,h=p=m=y=!1;var l={x:r.x.baseVal.value+P.p8.getProperty(r,"x"),y:r.y.baseVal.value+P.p8.getProperty(r,"y"),width:P.p8.getProperty(r,"width"),height:P.p8.getProperty(r,"height")};l.left=l.x,l.top=l.y,l.right=l.x+l.width,l.bottom=l.y+l.height,t.onDragEnd&&t.onDragEnd(c,t.md5,l,!0),P.p8.to(e,{x:0,y:0,duration:0}),P.p8.to(r,{x:0,y:0,duration:0}),n&&P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(s,{x:0,y:0,duration:0}),g=null}});P.p8.to(e,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(s,{x:0,y:0,duration:0})}}}),[t.readonly,t.imageSize,d,t.showPlaceholder]),D=function(){o(!0)},T=function(){o(!1)},Z=function(t,e,n,r){s(t),h(e||0),u(n||0),y(r||0)};(0,w.useImperativeHandle)(e,(function(){return{refreshUI:Z,getSVGEle:function(){return v},show:D,hide:T}}));var R=6*t.scale;return R<6&&(R=6),(0,k.jsxs)("g",{className:j()("video-ann",t.md5,{show:r,readonly:t.readonly,selected:t.current==t.md5}),style:{opacity:t.selectedBlur?.1:1},ref:E,children:[(0,k.jsx)("image",{href:t.showPlaceholder?"../images/svg/pic_loading.svg":t.imageURL,className:"video-ann-image-ct",style:{filter:m>0?"url(#dropshadow-".concat(m-1+Math.floor(d/4),")"):"",opacity:a},x:t.left,y:t.top,height:t.height,width:t.width}),!t.showPlaceholder&&d>0?(0,k.jsx)("rect",{className:"video-ann-image-bg",x:t.left-d/2,y:t.top-d/2,height:t.height+d,width:t.width+d,rx:0,ry:0,strokeWidth:d+2,stroke:l,fill:"transparent"}):"",(0,k.jsx)("circle",{className:j()("select-circle topleft","drag-area-".concat(t.md5)),r:R,cx:t.left,cy:t.top}),(0,k.jsx)("circle",{className:j()("select-circle topright","drag-area-".concat(t.md5)),r:R,cx:t.left+t.width,cy:t.top}),(0,k.jsx)("circle",{className:j()("select-circle bottomright","drag-area-".concat(t.md5)),r:R,cx:t.left+t.width,cy:t.top+t.height}),(0,k.jsx)("circle",{className:j()("select-circle bottomleft","drag-area-".concat(t.md5)),r:R,cx:t.left,cy:t.top+t.height})]},t.md5)})),B=(0,w.forwardRef)((function(t,e){var n=N((0,w.useState)(t.show),2),r=n[0],o=n[1],i=N((0,w.useState)(null),2),a=i[0],s=i[1],c=N((0,w.useState)(null),2),l=c[0],u=c[1],f=N((0,w.useState)(t.format.color),2),d=f[0],h=f[1],p=N((0,w.useState)(t.format.weight),2),m=p[0],y=p[1],g=m/2,v=(0,w.useCallback)((function(e){if(null!==e){s(e);var n=e.querySelector(".video-ann-rect-bg"),r=t.retrieveCanvas(),o=e.querySelector(".topleft"),i=e.querySelector(".topright"),a=e.querySelector(".bottomleft"),c=e.querySelector(".bottomright"),f=m/2;if(t.readonly)l&&l.disable();else{var d=O._.create(n,{type:"x,y",edgeResistance:1,bounds:r,cursor:"move",activeCursor:"move",onClick:function(){t.onSelect(t.md5)},onDrag:function(t){P.p8.to(o,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0}),P.p8.to(i,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0}),P.p8.to(a,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0}),P.p8.to(c,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0})},onDragStart:function(e,n,o,i,a){var s=F(e,r);s.x,s.y;t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(e){var r=P.p8.getProperty(n,"x"),s=P.p8.getProperty(n,"y"),l=P.p8.getProperty(n,"width"),u=P.p8.getProperty(n,"height");"object"==I(l)&&(l=l.baseVal.value),"object"==I(u)&&(u=u.baseVal.value),"object"==I(r)&&(r=r.baseVal.value),"object"==I(s)&&(s=s.baseVal.value);var d={x:n.x.baseVal.value+r-f,y:n.y.baseVal.value+s-f,width:l+m,height:u+m};d.left=d.x,d.top=d.y,d.right=d.x+d.width,d.bottom=d.y+d.height,t.onDragEnd&&t.onDragEnd(e,t.md5,d),P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(c,{x:0,y:0,duration:0})}});u(d[0]),P.p8.to(n,{x:0,y:0,duration:0});var h=-1,p=-1,y=!1,g=!1,v=!1,b=!1,x=null,w=null,S=O._.create(".drag-area-".concat(t.md5),{type:"x,y",edgeResistance:1,intertia:!1,bounds:document.getElementById("vjs-annotation-bg"),onDrag:function(t){if((y||g||v||b)&&x){var e=F(t,r),s=(e.x,e.y,{duration:0}),l={x:0,y:0,duration:0},u={x:0,y:0,duration:0},f={x:0,y:0,duration:0},d={x:0,y:0,duration:0};if(y&&(v?f.x=P.p8.getProperty(x,"x"):l.x=P.p8.getProperty(x,"x"),s.x=P.p8.getProperty(x,"x"),s.width=h-s.x),g&&(v?d.x=P.p8.getProperty(x,"x"):u.x=P.p8.getProperty(x,"x"),s.width=h+P.p8.getProperty(x,"x")),v&&(y?u.y=P.p8.getProperty(x,"y"):l.y=P.p8.getProperty(x,"y"),s.y=P.p8.getProperty(x,"y"),s.height=p-s.y),b&&(y?d.y=P.p8.getProperty(x,"y"):f.y=P.p8.getProperty(x,"y"),s.height=p+P.p8.getProperty(x,"y")),s.width<=6||s.height<=6)return null==w&&(w={x:0,y:0,duration:0},y&&v?(w.x=P.p8.getProperty(n,"x"),w.y=P.p8.getProperty(n,"y")):y&&b?(w.x=P.p8.getProperty(n,"x"),w.y=P.p8.getProperty(c,"y")):g&&v?(w.x=P.p8.getProperty(c,"x"),w.y=P.p8.getProperty(n,"y")):g&&b&&(w.x=P.p8.getProperty(i,"x"),w.y=P.p8.getProperty(a,"y"))),void P.p8.to(x,w);w=null,P.p8.to(n,s),o!=x&&P.p8.to(o,l),i!=x&&P.p8.to(i,u),a!=x&&P.p8.to(a,f),c!=x&&P.p8.to(c,d)}else S.forEach((function(t,e){t.endDrag()}))},onDragStart:function(e,r,o,i,a){x=e.target;var s=e.target.className;"object"==I(s)&&(s=s.baseVal),h=n.width.animVal.value,p=n.height.animVal.value,y=s.indexOf("left")>=0,g=s.indexOf("right")>=0,v=s.indexOf("top")>=0,b=s.indexOf("bottom")>=0,t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(r){h=p=-1,y=g=v=b=!1;var s={x:n.x.baseVal.value+P.p8.getProperty(n,"x")-f,y:n.y.baseVal.value+P.p8.getProperty(n,"y")-f,width:P.p8.getProperty(n,"width")+m,height:P.p8.getProperty(n,"height")+m};s.left=s.x,s.top=s.y,s.right=s.x+s.width,s.bottom=s.y+s.height,t.onDragEnd&&t.onDragEnd(r,t.md5,s,!0),P.p8.to(e,{x:0,y:0,duration:0}),P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(c,{x:0,y:0,duration:0}),x=null}});P.p8.to(e,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(c,{x:0,y:0,duration:0})}}}),[t.readonly,m]),b=function(){o(!0)},x=function(){o(!1)},S=function(t,e){h(e.format.color),g=e.format.weight/2,y(e.format.weight)},C=function(){var t=a.cloneNode(!0).querySelector(".video-ann-rect-bg");return t.setAttribute("x",g),t.setAttribute("y",g),t.setAttribute("style",""),t};(0,w.useImperativeHandle)(e,(function(){return{refreshUI:S,outerHTML:C,getSVGEle:function(){return a},show:b,hide:x}}));var A=6*t.scale;return A<m&&(A=m),(0,k.jsxs)("g",{className:j()("video-ann",t.md5,{show:r,readonly:t.readonly,selected:t.current==t.md5}),ref:v,style:{opacity:t.selectedBlur?.1:1},children:[(0,k.jsx)("rect",{className:j()("video-ann-rect-bg"),x:t.x+g,y:t.y+g,rx:2,ry:2,width:t.width-m,height:t.height-m,stroke:d,style:{width:t.width-m,height:t.height-m},strokeWidth:m,fill:"transparent"}),(0,k.jsx)("circle",{className:j()("select-circle topleft","drag-area-".concat(t.md5)),r:A,cx:t.x+g,cy:t.y+g}),(0,k.jsx)("circle",{className:j()("select-circle topright","drag-area-".concat(t.md5)),r:A,cx:t.x+t.width-g,cy:t.y+g}),(0,k.jsx)("circle",{className:j()("select-circle bottomright","drag-area-".concat(t.md5)),r:A,cx:t.x+t.width-g,cy:t.y+t.height-g}),(0,k.jsx)("circle",{className:j()("select-circle bottomleft","drag-area-".concat(t.md5)),r:A,cx:t.x+g,cy:t.y+t.height-g})]},t.md5)})),L=(0,w.forwardRef)((function(t,e){var n=N((0,w.useState)(t.show),2),r=n[0],o=n[1],i=N((0,w.useState)(null),2),a=i[0],s=i[1],c=N((0,w.useState)(null),2),l=c[0],u=c[1],f=N((0,w.useState)(t.format.color),2),d=f[0],h=f[1],p=N((0,w.useState)(t.format.weight),2),m=p[0],y=p[1],g=m/2,v=(0,w.useCallback)((function(e){if(null!==e){s(e);var n=e.querySelector(".video-ann-ellipse-bg");g=m/2;var r=t.retrieveCanvas(),o=e.querySelector(".topleft"),i=e.querySelector(".topright"),a=e.querySelector(".bottomleft"),c=e.querySelector(".bottomright");if(t.readonly)l&&l.disable();else{var f=O._.create(n,{type:"x,y",edgeResistance:1,cursor:"move",activeCursor:"move",bounds:document.getElementById("vjs-annotation-bg"),onClick:function(){t.onSelect(t.md5)},onDrag:function(t){P.p8.to(o,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0}),P.p8.to(i,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0}),P.p8.to(a,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0}),P.p8.to(c,{x:P.p8.getProperty(n,"x"),y:P.p8.getProperty(n,"y"),duration:0})},onDragStart:function(e,n,o,i,a){var s=F(e,r);s.x,s.y;t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(e){var r=P.p8.getProperty(n,"x"),s=P.p8.getProperty(n,"y"),l=P.p8.getProperty(n,"rx"),u=P.p8.getProperty(n,"ry");"object"==I(l)&&(l=l.baseVal.value),"object"==I(u)&&(u=u.baseVal.value),"object"==I(r)&&(r=r.baseVal.value),"object"==I(s)&&(s=s.baseVal.value);var f={x:n.cx.baseVal.value+r-l-g,y:n.cy.baseVal.value+s-u-g,width:2*l+m,height:2*u+m};f.left=f.x,f.top=f.y,f.right=f.x+f.width,f.bottom=f.y+f.height,t.onDragEnd&&t.onDragEnd(e,t.md5,f),P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(c,{x:0,y:0,duration:0})}});u(f[0]);var d=-1,h=-1,p=!1,y=!1,v=!1,b=!1,x=null,w=null,S=O._.create(".drag-area-".concat(t.md5),{type:"x,y",edgeResistance:1,intertia:!1,bounds:document.getElementById("vjs-annotation-bg"),onDrag:function(t){if((p||y||v||b)&&x){var e=F(t,r),s=(e.x,e.y,{duration:0}),l={x:0,y:0,duration:0},u={x:0,y:0,duration:0},f={x:0,y:0,duration:0},m={x:0,y:0,duration:0};if(p&&(v?f.x=P.p8.getProperty(x,"x"):l.x=P.p8.getProperty(x,"x"),s.x=P.p8.getProperty(x,"x")/2,s.rx=d-P.p8.getProperty(x,"x")/2),y&&(v?m.x=P.p8.getProperty(x,"x"):u.x=P.p8.getProperty(x,"x"),s.x=P.p8.getProperty(x,"x")/2,s.rx=d+P.p8.getProperty(x,"x")/2),v&&(p?u.y=P.p8.getProperty(x,"y"):l.y=P.p8.getProperty(x,"y"),s.y=P.p8.getProperty(x,"y")/2,s.ry=h-P.p8.getProperty(x,"y")/2),b&&(p?m.y=P.p8.getProperty(x,"y"):f.y=P.p8.getProperty(x,"y"),s.y=P.p8.getProperty(x,"y")/2,s.ry=h+P.p8.getProperty(x,"y")/2),s.rx<=3||s.ry<=3)return null==w&&(w={x:0,y:0,duration:0},p&&v?(w.x=P.p8.getProperty(a,"x"),w.y=P.p8.getProperty(i,"y")):p&&b?(w.x=P.p8.getProperty(o,"x"),w.y=P.p8.getProperty(c,"y")):y&&v?(w.x=P.p8.getProperty(c,"x"),w.y=P.p8.getProperty(o,"y")):y&&b&&(w.x=P.p8.getProperty(i,"x"),w.y=P.p8.getProperty(a,"y"))),void P.p8.to(x,w);w=null,P.p8.to(n,s),o!=x&&P.p8.to(o,l),i!=x&&P.p8.to(i,u),a!=x&&P.p8.to(a,f),c!=x&&P.p8.to(c,m)}else S.forEach((function(t,e){t.endDrag()}))},onDragStart:function(e,r,o,i,a){x=e.target;var s=e.target.className;"object"==I(s)&&(s=s.baseVal),d=n.rx.animVal.value,h=n.ry.animVal.value,p=s.indexOf("left")>=0,y=s.indexOf("right")>=0,v=s.indexOf("top")>=0,b=s.indexOf("bottom")>=0,t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(r){d=h=-1,p=y=v=b=!1;var s={x:n.cx.baseVal.value+P.p8.getProperty(n,"x")-P.p8.getProperty(n,"rx")-g,y:n.cy.baseVal.value+P.p8.getProperty(n,"y")-P.p8.getProperty(n,"ry")-g,width:2*P.p8.getProperty(n,"rx")+m,height:2*P.p8.getProperty(n,"ry")+m};s.left=s.x,s.top=s.y,s.right=s.x+s.width,s.bottom=s.y+s.height,t.onDragEnd&&t.onDragEnd(r,t.md5,s,!0),P.p8.to(e,{x:0,y:0,duration:0}),P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(c,{x:0,y:0,duration:0}),x=null}});P.p8.to(e,{x:0,y:0,duration:0}),P.p8.to(n,{x:0,y:0,duration:0}),P.p8.to(o,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),P.p8.to(c,{x:0,y:0,duration:0})}}}),[t.readonly,m]),b=function(){o(!0)},x=function(){o(!1)},S=function(t,e){h(e.format.color),g=e.format.weight/2,y(e.format.weight)},C=function(){var e=a.cloneNode(!0).querySelector(".video-ann-ellipse-bg");return e.setAttribute("cx",t.width/2),e.setAttribute("cy",t.height/2),e.setAttribute("style",""),e};(0,w.useImperativeHandle)(e,(function(){return{refreshUI:S,getSVGEle:function(){return a},outerHTML:C,show:b,hide:x}}));var A=6*t.scale;return A<m&&(A=m),(0,k.jsxs)("g",{className:j()("video-ann",t.md5,{show:r,readonly:t.readonly,selected:t.current==t.md5}),style:{opacity:t.selectedBlur?.1:1},ref:v,children:[(0,k.jsx)("ellipse",{className:j()("video-ann-ellipse-bg"),cx:t.x+t.width/2,cy:t.y+t.height/2,rx:t.width/2-g,ry:t.height/2-g,stroke:d,strokeWidth:m,style:{rx:t.width/2-g,ry:t.height/2-g,cx:t.x+t.width/2,cy:t.y+t.height/2},fill:"transparent"}),(0,k.jsx)("circle",{className:j()("select-circle topleft","drag-area-".concat(t.md5)),r:A,cx:t.x+g,cy:t.y+g}),(0,k.jsx)("circle",{className:j()("select-circle topright","drag-area-".concat(t.md5)),r:A,cx:t.x+t.width-g,cy:t.y+g}),(0,k.jsx)("circle",{className:j()("select-circle bottomright","drag-area-".concat(t.md5)),r:A,cx:t.x+t.width-g,cy:t.y+t.height-g}),(0,k.jsx)("circle",{className:j()("select-circle bottomleft","drag-area-".concat(t.md5)),r:A,cx:t.x+g,cy:t.y+t.height-g})]},t.md5)})),V=(0,w.forwardRef)((function(t,e){var n=N((0,w.useState)(t.show),2),r=n[0],o=n[1],i=N((0,w.useState)(null),2),a=i[0],s=i[1],c=N((0,w.useState)(null),2),l=c[0],u=c[1],f=N((0,w.useState)(t.format.color),2),d=f[0],h=f[1],p=N((0,w.useState)(t.format.weight),2),m=p[0],y=p[1],g=(0,w.useCallback)((function(e){null!==e&&(s(e),t.readonly?l&&l.disable():function(e,n){var r=e.querySelector(".video-ann-arrow-bg"),o=t.retrieveCanvas(),i=e.querySelector(".start"),a=e.querySelector(".end"),s=O._.create(r,{type:"x,y",edgeResistance:1,cursor:"move",activeCursor:"move",bounds:document.getElementById("vjs-annotation-bg"),onClick:function(){t.onSelect(t.md5)},onDrag:function(t){P.p8.to(i,{x:P.p8.getProperty(r,"x"),y:P.p8.getProperty(r,"y"),duration:0}),P.p8.to(a,{x:P.p8.getProperty(r,"x"),y:P.p8.getProperty(r,"y"),duration:0})},onDragStart:function(e,n,r,i,a){var s=F(e,o);s.x,s.y,t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(e){var n=P.p8.getProperty(r,"x"),o=P.p8.getProperty(r,"y");"object"==I(n)&&(n=n.baseVal.value),"object"==I(o)&&(o=o.baseVal.value);var s={left:r.x1.baseVal.value+n,top:r.y1.baseVal.value+o,right:r.x2.baseVal.value+n,bottom:r.y2.baseVal.value+o};t.onDragEnd&&t.onDragEnd(e,t.md5,s,!1),P.p8.to(r,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0})}});u(s[0]);var c=-1,l=-1,f=!1,d=!1,h=null,p=O._.create(".drag-area-".concat(t.md5),{type:"x,y",edgeResistance:1,intertia:!1,bounds:document.getElementById("vjs-annotation-bg"),onDrag:function(t){if((f||d)&&h){var e={duration:0};f?(e.x1=c+P.p8.getProperty(h,"x"),e.y1=l+P.p8.getProperty(h,"y")):d&&(e.x2=c+P.p8.getProperty(h,"x"),e.y2=l+P.p8.getProperty(h,"y")),P.p8.set(r,{attr:e})}else p.forEach((function(t,e){t.endDrag()}))},onDragStart:function(e,n,o,i,a){h=e.target;var s=e.target.className;"object"==I(s)&&(s=s.baseVal),f=s.indexOf("start")>=0,d=s.indexOf("end")>=0,f?(c=r.x1.baseVal.value,l=r.y1.baseVal.value):d&&(c=r.x2.baseVal.value,l=r.y2.baseVal.value),t.onDragStart&&t.onDragStart(e,t.md5)},onDragEnd:function(e){f=d;var n={left:r.x1.baseVal.value,top:r.y1.baseVal.value,right:r.x2.baseVal.value,bottom:r.y2.baseVal.value};t.onDragEnd&&t.onDragEnd(e,t.md5,n,!0),P.p8.to(r,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0}),h=null}});P.p8.to(r,{x:0,y:0,duration:0}),P.p8.to(i,{x:0,y:0,duration:0}),P.p8.to(a,{x:0,y:0,duration:0})}(e))}),[t.readonly,m]),v=function(){o(!0)},b=function(){o(!1)},x=function(t,e){h(e.format.color),y(e.format.weight)},S=function(t){var e=a.cloneNode(!0),n=e.querySelector(".start"),r=e.querySelector(".end");e.removeChild(n),e.removeChild(r);var o=e.querySelector(".video-ann-arrow-bg");o.setAttribute("x1",Math.abs(parseInt(o.getAttribute("x1"))-t.x)),o.setAttribute("y1",Math.abs(parseInt(o.getAttribute("y1"))-t.y)),o.setAttribute("x2",Math.abs(parseInt(o.getAttribute("x2"))-t.x)),o.setAttribute("y2",Math.abs(parseInt(o.getAttribute("y2"))-t.y)),o.setAttribute("style","");var i=document.createElementNS("http://www.w3.org/2000/svg","marker");i.setAttribute("markerWidth","10"),i.setAttribute("markerHeight","10"),i.setAttribute("id","arrow-"+d.substring(1)),i.setAttribute("refX","7"),i.setAttribute("refY","3"),i.setAttribute("orient","auto"),i.setAttribute("markerUnits","strokeWidth"),i.setAttribute("viewBox","0 0 10 10");var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d","M0,0 L0,6 L9,3 z"),s.setAttribute("fill",d),i.appendChild(s),e.appendChild(i),e};(0,w.useImperativeHandle)(e,(function(){return{refreshUI:x,getSVGEle:function(){return a},outerHTML:S,show:v,hide:b}}));var C=6*t.scale;return C<1.6*m&&(C=1.6*m),(0,k.jsxs)("g",{className:j()("video-ann",t.md5,{show:r,readonly:t.readonly,selected:t.current==t.md5}),ref:g,style:{opacity:t.selectedBlur?.1:1},id:"svg-g-".concat(t.md5),children:[(0,k.jsx)("line",{className:j()("video-ann-arrow-bg"),x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,stroke:d,strokeWidth:m,markerEnd:"url(#arrow-".concat(d.substring(1),")")}),(0,k.jsx)("circle",{className:j()("select-circle start","drag-area-".concat(t.md5)),r:C,cx:t.left,cy:t.top}),(0,k.jsx)("circle",{className:j()("select-circle end","drag-area-".concat(t.md5)),r:C,cx:t.right,cy:t.bottom})]},t.md5)})),U=(n(52927),n(9676)),z=(n(56787),n(99177)),M=(n(28897),n(85986)),_=(n(16154),n(47933)),H=(n(57432),n(27049)),W=(n(13062),n(71230)),q=(n(85624),n(71577)),X=(n(89032),n(15746)),K=(n(28763),n(34041)),G=(n(15285),n(71257)),Y=(n(86212),n(54680)),J=n(16165),Q=n(14856);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===$(i)?i:String(i)),r)}var o,i}function et(t,e){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},et(t,e)}function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ot(t);if(e){var o=ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(t,e){if(e&&("object"===$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ot(t){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ot(t)}var it=["rgb(255, 0, 0)","rgb(152, 0, 0)","rgb(255, 153, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 0, 0)","rgb(67, 67, 67)","rgb(102, 102, 102)","rgb(153, 153, 153)","rgb(183, 183, 183)","rgb(204, 204, 204)","rgb(217, 217, 217)","rgb(239, 239, 239)","rgb(243, 243, 243)","rgb(255, 255, 255)","rgb(0, 255, 255)","rgb(74, 134, 232)","rgb(0, 0, 255)","rgb(153, 0, 255)","rgb(255, 0, 255)","rgb(230, 184, 175)","rgb(244, 204, 204)","rgb(252, 229, 205)","rgb(255, 242, 204)","rgb(217, 234, 211)","rgb(208, 224, 227)","rgb(201, 218, 248)","rgb(207, 226, 243)","rgb(217, 210, 233)","rgb(234, 209, 220)","rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)","rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)","rgb(180, 167, 214)","rgb(213, 166, 189)","rgb(204, 65, 37)","rgb(224, 102, 102)","rgb(246, 178, 107)","rgb(255, 217, 102)","rgb(147, 196, 125)","rgb(118, 165, 175)","rgb(109, 158, 235)","rgb(111, 168, 220)","rgb(142, 124, 195)","rgb(194, 123, 160)","rgb(166, 28, 0)","rgb(204, 0, 0)","rgb(230, 145, 56)","rgb(241, 194, 50)","rgb(106, 168, 79)","rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)","rgb(166, 77, 121)","rgb(133, 32, 12)","rgb(153, 0, 0)","rgb(180, 95, 6)","rgb(191, 144, 0)","rgb(56, 118, 29)","rgb(19, 79, 92)","rgb(17, 85, 204)","rgb(11, 83, 148)","rgb(53, 28, 117)","rgb(116, 27, 71)","rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)","rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)","rgb(7, 55, 99)","rgb(32, 18, 77)","rgb(76, 17, 48)"],at=["#373C44","#838383","#F6F6F6","#FF0200","#FF9900","#0172E6","#11DC00","#FF5A44","#BD8C00","#0013C5","#00CAB5","#930EBF"];var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&et(t,e)}(i,t);var e,n,r,o=nt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),"little"===t.type?e.state={width:98,colors:at}:e.state={width:230,colors:it},e}return e=i,(n=[{key:"render",value:function(){var t=this,e=this.props,n=e.active,r=e.handleColorSelected,o=j()("editor-color-panel",{active:n}),i=function(t,e){r(t,e)};return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("div",{className:o,style:{width:this.state.width},children:this.state.colors.map((function(e,n){return(0,k.jsx)("div",{className:"color-item","data-color":e,style:{backgroundColor:e,borderColor:(r=e,"rgb(239, 239, 239)"===r||"rgb(243, 243, 243)"===r||"rgb(255, 255, 255)"===r||"#F6F6F6"===r||"rgb(252, 229, 205)"===r||"rgb(255, 242, 204)"===r?"#bdc1c6":"transparent")},onClick:i.bind(t,e,n)},e);var r}))})})}}])&&tt(e.prototype,n),r&&tt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(w.PureComponent);function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(n),!0).forEach((function(e){ft(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ft(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==ct(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ct(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const dt=function(t){return(0,k.jsxs)("svg",ut(ut({width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:[(0,k.jsxs)("g",{clipPath:"url(#video_editor_align_bottom_svg__a)",fill:"#fff",children:[(0,k.jsx)("rect",{x:11,y:10,width:2,height:10,rx:1,transform:"rotate(180 11 10)"}),(0,k.jsx)("rect",{x:20,y:17,width:20,height:4,rx:1,transform:"rotate(180 20 17)"})]}),(0,k.jsx)("defs",{children:(0,k.jsx)("clipPath",{id:"video_editor_align_bottom_svg__a",children:(0,k.jsx)("path",{fill:"#fff",transform:"rotate(180 10 10)",d:"M0 0h20v20H0z"})})})]}))};function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(n),!0).forEach((function(e){yt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==ht(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ht(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const gt=function(t){return(0,k.jsxs)("svg",mt(mt({width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:[(0,k.jsx)("rect",{y:2,width:20,height:4,rx:1,fill:"#fff"}),(0,k.jsx)("rect",{x:6,y:10,width:8,height:2,rx:1,fill:"#fff"}),(0,k.jsx)("rect",{x:2,y:16,width:16,height:2,rx:1,fill:"#fff"})]}))};function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(n),!0).forEach((function(e){wt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==vt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===vt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const St=function(t){return(0,k.jsxs)("svg",xt(xt({width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:[(0,k.jsx)("rect",{y:2,width:20,height:4,rx:1,fill:"#fff"}),(0,k.jsx)("rect",{y:10,width:8,height:2,rx:1,fill:"#fff"}),(0,k.jsx)("rect",{y:16,width:16,height:2,rx:1,fill:"#fff"})]}))};function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach((function(e){kt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==jt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===jt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ct=function(t){return(0,k.jsxs)("svg",Ot(Ot({width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:[(0,k.jsx)("rect",{y:2,width:20,height:4,rx:1,fill:"#fff"}),(0,k.jsx)("rect",{x:12,y:10,width:8,height:2,rx:1,fill:"#fff"}),(0,k.jsx)("rect",{x:4,y:16,width:16,height:2,rx:1,fill:"#fff"})]}))};function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){Nt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Nt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==At(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===At(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Dt=function(t){return(0,k.jsxs)("svg",It(It({width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:[(0,k.jsx)("rect",{x:9,y:10,width:2,height:10,rx:1,fill:"#fff"}),(0,k.jsx)("rect",{y:3,width:20,height:4,rx:1,fill:"#fff"})]}))};function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach((function(e){Rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Rt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Ft(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ft(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Bt=function(t){return(0,k.jsxs)("svg",Zt(Zt({width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:[(0,k.jsx)("rect",{x:9,width:2,height:5,rx:1,fill:"#fff"}),(0,k.jsx)("rect",{x:9,y:15,width:2,height:5,rx:1,fill:"#fff"}),(0,k.jsx)("rect",{y:8,width:20,height:4,rx:1,fill:"#fff"})]}))};function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(n),!0).forEach((function(e){zt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Lt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Lt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Mt=function(t){return(0,k.jsx)("svg",Ut(Ut({width:"1em",height:"1em",viewBox:"0 0 12 16",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:(0,k.jsx)("path",{d:"M0 16V0h6.24c1.08 0 1.92.12 2.64.36.72.242 1.32.723 1.8 1.324.48.602.72 1.564.72 2.406 0 .842-.24 1.684-.72 2.286a3.23 3.23 0 0 1-2.16 1.203c1.08.36 1.92.842 2.52 1.564.6.722.96 1.564.96 2.526 0 1.203-.36 2.286-1.2 3.128C9.96 15.639 8.76 16 7.08 16H0Zm2.76-9.263h3.48c.72 0 1.32-.24 1.68-.602.36-.36.6-.962.6-1.684s-.24-1.323-.72-1.684-.96-.481-1.56-.481H2.76v4.45Zm0 6.857h3.72c.84 0 1.44-.24 1.92-.602.48-.36.6-.962.6-1.684s-.24-1.203-.72-1.684c-.48-.481-1.08-.601-1.8-.601H2.76v4.571Z",fill:"#C8C8C8",fillRule:"nonzero"})}))};function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(n),!0).forEach((function(e){qt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==_t(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===_t(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Xt=function(t){return(0,k.jsx)("svg",Wt(Wt({width:"1em",height:"1em",viewBox:"0 0 11 16",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:(0,k.jsx)("path",{d:"M8.25 1.333 5.5 14.667h2.75V16H0v-1.333h2.75L5.5 1.333H2.75V0H11v1.333z",fill:"#C8C8C8",fillRule:"nonzero"})}))};function Kt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Gt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yt=Y.Z.TreeNode,Jt=x.Z.TextArea,Qt=[24,36,48,64,80,112],$t=[2,4,6,8,10],te=["#FF0000","#FF9900","#0072E6","#12DC00","#E7E7E7","transparent","transparent","transparent","transparent","transparent"],ee=["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#000000","#FF0000","#FF9900","#0072E6","#12DC00","#FFFFFF"],ne=(0,w.forwardRef)((function(t,e){var n=(0,w.createRef)(),r=(0,w.createRef)(),o=Kt(G.Z.useForm(),1)[0],i=Kt((0,w.useState)(t.italy),2),a=i[0],s=i[1],c=Kt((0,w.useState)(t.bold),2),l=c[0],u=c[1],f=Kt((0,w.useState)(t.color),2),d=f[0],h=f[1],p=Kt((0,w.useState)(t.bgColor),2),y=p[0],g=p[1],v=Kt((0,w.useState)(t.content),2),b=(v[0],v[1]),S=Kt((0,w.useState)(t.link),2),P=(S[0],S[1]),O=Kt((0,w.useState)({start:t.start,end:t.end}),2),C=O[0],A=O[1],E=Kt((0,w.useState)(t.align),2),I=E[0],N=E[1],D=Kt((0,w.useState)({min:t.timeRangeBySec?t.timeRangeBySec.min:0,max:t.timeRangeBySec?t.timeRangeBySec.max:t.maxTime}),2),F=D[0],T=D[1];(0,w.useEffect)((function(){o.setFieldsValue({link:t.link?t.link:"",content:t.content,size:t.size,start:t.start,end:t.end}),g(t.bgColor),P(t.link),h(t.color),s(t.italy),u(t.bold),b(t.content),N(t.align),T({min:t.timeRangeBySec?t.timeRangeBySec.min:0,max:t.timeRangeBySec?t.timeRangeBySec.max:t.maxTime}),A({start:t.start,end:t.end}),t.isLink&&o.validateFields(["link"]);var e=document.querySelector("#video-ann-text-input-start");e&&e.setAttribute("readonly",!0);var n=document.querySelector("#video-ann-text-input-end");n&&n.setAttribute("readonly",!0)}),[t.md5]);var Z=function(t){t?n&&n.current&&n.current.focus({cursor:"end"}):r&&r.current&&r.current.focus({cursor:"end"})},R=function(t,e,n,r,i){A({start:t,end:e}),o.setFieldsValue({size:n.size,content:r,link:i,start:t,end:e}),P(i),b(r),g(n.bgColor),h(n.color),s(n.italy),u(n.bold),N(n.align)},B=function(t,e){T({min:t,max:e})},L=function(){var e=!0;if(t.isLink){var n=o.getFieldError("link");if(!(e=!(n&&n.length>0))){var r=document.querySelector(".ant-form-item-explain-error");if(r){var i=r.className;r.className+=" video-ann-link-warn",setTimeout((function(){r.className=i}),500)}}}return e};(0,w.useImperativeHandle)(e,(function(){return{refreshUI:R,refreshRange:B,focus:Z,validate:L}}));var V=t.isLink||t.link&&t.link.length>0;return(0,k.jsxs)(G.Z,{className:"video-ann-property-form",form:o,initialValues:{link:t.link,size:t.size,content:t.content,start:C.start,end:C.end},layout:"vertical",children:[V?(0,k.jsx)(G.Z.Item,{name:"link",validateTrigger:["onChange","onBlur"],className:"video-ann-form-item",style:{marginBottom:"4px"},label:"URL",rules:[{required:!0,message:"You must input a URL starting with http or https in the link field."},{message:"Your URL must start with http:// or https://",pattern:/((https?|ftps?):\/\/)([-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*))/i}],children:(0,k.jsx)(x.Z,{className:"video-ann-property-textarea",tabIndex:5e3,onChange:function(e){o.setFieldsValue({link:e.target.value}),t.handleChangeLink(e.target.value)},ref:n,placeholder:"Insert a link"})}):"",(0,k.jsx)(G.Z.Item,{style:{marginBottom:"4px"},className:"video-ann-form-item",label:"Text",name:"content",children:(0,k.jsx)(Jt,{placeholder:V?"Add link text":"Enter text here",id:"video-ann-".concat(V?"link-title":"text","-textarea"),className:"video-ann-property-textarea customized-scrollbar",onChange:function(e){t.handleChangeCt(e.target.value)},spellCheck:"false",tabIndex:5001,ref:r,autoSize:{minRows:1,maxRows:9}})}),(0,k.jsxs)(W.Z,{gutter:16,className:"video-ann-row",children:[(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(G.Z.Item,{name:"size",className:"video-ann-form-item",style:{marginBottom:"16px"},label:"Text Format",children:(0,k.jsx)(K.Z,{className:"video-ann-property-select",dropdownClassName:"video-ann-property-dropdown",tabIndex:5002,onChange:function(e,n){var r=Math.floor(parseInt(n.key)/2);t.handleChangeFontSize(e,r)},children:Qt.map((function(t,e){return(0,k.jsxs)(K.Z.Option,{className:"video-ann-property-option",value:t,children:[t,"px"]},e)}))})})}),(0,k.jsxs)(X.Z,{span:12,children:[(0,k.jsx)(q.Z,{className:j()("video-ann-property-bold txt-fmt-btn",{selected:l}),disabled:"transparent"==y&&ee.indexOf(d)>=0,icon:(0,k.jsx)(J.Z,{component:Mt,style:{color:"white"}}),onClick:function(){t.handleChangeBold(!l),u(!l)},type:"text"}),(0,k.jsx)(q.Z,{className:j()("video-ann-property-italic txt-fmt-btn",{selected:a}),icon:(0,k.jsx)(J.Z,{component:Xt,style:{color:"white"}}),onClick:function(){t.handleChangeItalic(!a),s(!a)},type:"text"})]})]}),(0,k.jsx)(H.Z,{orientation:"left",className:"video-ann-property-divider",plain:!0,children:"Align"}),(0,k.jsxs)(W.Z,{style:{marginBottom:"12px",marginTop:"8px"},className:"video-ann-row",gutter:4,children:[(0,k.jsx)(X.Z,{span:12,children:(0,k.jsxs)(_.ZP.Group,{defaultValue:I[0],className:"video-ann-align-group",optionType:"button",onChange:function(e){t.handleChangeAlign(e.target.value,I[1])},buttonStyle:"solid",children:[(0,k.jsx)(_.ZP.Button,{className:"video-ann-align-btn",value:"left",children:(0,k.jsx)(J.Z,{className:"video-ann-align-icon",component:St,style:{color:"white"}})}),(0,k.jsx)(_.ZP.Button,{className:"video-ann-align-btn",value:"center",children:(0,k.jsx)(J.Z,{className:"video-ann-align-icon",component:gt,style:{color:"white"}})}),(0,k.jsx)(_.ZP.Button,{className:"video-ann-align-btn",value:"right",children:(0,k.jsx)(J.Z,{className:"video-ann-align-icon",component:Ct,style:{color:"white"}})})]})}),(0,k.jsx)(X.Z,{span:12,children:(0,k.jsxs)(_.ZP.Group,{defaultValue:I[1],className:"video-ann-align-group",optionType:"button",onChange:function(e){t.handleChangeAlign(I[0],e.target.value)},buttonStyle:"solid",children:[(0,k.jsx)(_.ZP.Button,{className:"video-ann-align-btn",value:"top",children:(0,k.jsx)(J.Z,{className:"video-ann-align-icon",component:Dt,style:{color:"white"}})}),(0,k.jsx)(_.ZP.Button,{className:"video-ann-align-btn",value:"center",children:(0,k.jsx)(J.Z,{className:"video-ann-align-icon",component:Bt,style:{color:"white"}})}),(0,k.jsx)(_.ZP.Button,{className:"video-ann-align-btn",value:"bottom",children:(0,k.jsx)(J.Z,{className:"video-ann-align-icon",component:dt,style:{color:"white"}})})]})})]}),(0,k.jsx)(H.Z,{orientation:"left",className:"video-ann-property-divider",plain:!0,children:"Color"}),(0,k.jsx)(W.Z,{style:{marginBottom:"12px",marginTop:"8px"},className:"video-ann-row",gutter:[12,10],children:te.map((function(e,n){var r=ee[n];return(0,k.jsx)(X.Z,{className:"gutter-row",children:(0,k.jsx)(q.Z,{className:j()("video-ann-property-color txt-color-btn",{"is-Link":V}),style:{backgroundColor:n>=5?"#303030":e,WebkitTextStroke:n>=5?9==n?"1px #000000":"1px #ffffff":"none",fontWeight:n>=5?900:500,borderColor:y==e&&d==r?4==n?"black":"white":e,color:r},onClick:function(){t.handleChangeColor(e,r),h(r),g(e)},type:n>=5?"text":"primary",children:"T"})},n)}))}),(0,k.jsxs)(W.Z,{className:"video-ann-row",gutter:24,children:[(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(G.Z.Item,{name:"start",className:"video-ann-form-item",label:"Start",children:(0,k.jsx)(M.Z,{className:"video-ann-property-input",min:F.min,max:C.end,step:.1,bordered:!0,id:"video-ann-text-input-start",formatter:function(t){return(0,m.ZX)(t)},parser:function(t){return(0,m.sZ)(t)},onChange:t.onChangeStart})})}),(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(G.Z.Item,{name:"end",className:"video-ann-form-item",label:"End",children:(0,k.jsx)(M.Z,{className:"video-ann-property-input",min:C.start+.1,max:F.max,id:"video-ann-text-input-end",bordered:!0,step:.1,formatter:function(t){return(0,m.ZX)(t)},parser:function(t){return(0,m.sZ)(t)},onChange:t.onChangeEnd})})})]})]})})),re=(0,w.forwardRef)((function(t,e){var n=Kt((0,w.useState)({start:t.start,end:t.end}),2),o=n[0],i=n[1],a=Kt((0,w.useState)({min:t.timeRangeBySec?t.timeRangeBySec.min:0,max:t.timeRangeBySec?t.timeRangeBySec.max:t.maxTime}),2),s=a[0],c=a[1];(0,w.useImperativeHandle)(e,(function(){return{refreshUI:u,refreshRange:f}}));var l=Kt(G.Z.useForm(),1)[0];(0,w.useEffect)((function(){l.setFieldsValue({start:t.start,end:t.end}),i({start:t.start,end:t.end}),c({min:t.timeRangeBySec?t.timeRangeBySec.min:0,max:t.timeRangeBySec?t.timeRangeBySec.max:t.maxTime});var e=document.querySelector("#video-ann-cut-input-start");e&&e.setAttribute("readonly",!0);var n=document.querySelector("#video-ann-cut-input-end");n&&n.setAttribute("readonly",!0)}),[t.md5]);var u=function(t,e){i({start:t,end:e}),l.setFieldsValue({start:t,end:e})},f=function(t,e){c({min:t,max:e})};return(0,k.jsxs)(G.Z,{className:"video-ann-property-form",form:l,initialValues:{start:o.start,end:o.end},layout:"vertical",children:[(0,k.jsx)(r.Z.Title,{className:"video-ann-form-desc",level:5,children:"Remove part of the video"}),(0,k.jsxs)(W.Z,{className:"video-ann-row",gutter:24,children:[(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(G.Z.Item,{className:"video-ann-form-item",name:"start",label:"Start",children:(0,k.jsx)(M.Z,{className:"video-ann-property-input",min:s.min,max:o.end,step:.1,bordered:!0,id:"video-ann-cut-input-start",formatter:function(t){return(0,m.ZX)(t)},parser:function(t){return(0,m.sZ)(t)},onChange:t.onChangeStart})})},0),(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(G.Z.Item,{className:"video-ann-form-item",name:"end",label:"End",children:(0,k.jsx)(M.Z,{className:"video-ann-property-input",min:o.start+.1,max:s.max,bordered:!0,step:.1,id:"video-ann-cut-input-end",formatter:function(t){return(0,m.ZX)(t)},parser:function(t){return(0,m.sZ)(t)},onChange:t.onChangeEnd})})},1)]})]})})),oe=(0,w.forwardRef)((function(t,e){var n=Kt((0,w.useState)(t.blur),2),r=n[0],o=n[1],i=Kt((0,w.useState)({start:t.start,end:t.end}),2),a=i[0],s=i[1],c=Kt((0,w.useState)({min:t.timeRangeBySec?t.timeRangeBySec.min:0,max:t.timeRangeBySec?t.timeRangeBySec.max:t.maxTime}),2),l=c[0],u=c[1];(0,w.useImperativeHandle)(e,(function(){return{refreshUI:d,refreshRange:h}}));var f=Kt(G.Z.useForm(),1)[0];(0,w.useEffect)((function(){f.setFieldsValue({start:t.start,end:t.end}),s({start:t.start,end:t.end}),o(t.blur),u({min:t.timeRangeBySec?t.timeRangeBySec.min:0,max:t.timeRangeBySec?t.timeRangeBySec.max:t.maxTime});var e=document.querySelector("#video-ann-blur-input-start");e&&e.setAttribute("readonly",!0);var n=document.querySelector("#video-ann-blur-input-end");n&&n.setAttribute("readonly",!0)}),[t.md5]);var d=function(e,n,r){s({start:e,end:n}),f.setFieldsValue({start:e,end:n}),o(t.blur)},h=function(t,e){u({min:t,max:e})};return(0,k.jsxs)(G.Z,{className:"video-ann-property-form",form:f,initialValues:{start:a.start,end:a.end},layout:"vertical",children:[v.Z.isSafari()?"":(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(H.Z,{orientation:"left",style:{marginTop:"4px"},className:"video-ann-property-divider",plain:!0,children:"Intensity"}),(0,k.jsxs)(W.Z,{className:"video-ann-row",gutter:24,style:{marginBottom:"6px",marginTop:"2px"},children:[(0,k.jsx)("span",{className:"video-ann-text",children:"Low"}),(0,k.jsx)(z.Z,{className:"video-ann-property-slider",min:2,max:20,step:2,tooltipVisible:!1,onChange:function(e){t.handleChangeBlur(e),o(e)},value:r}),(0,k.jsx)("span",{className:"video-ann-text",children:"High"})]})]}),(0,k.jsxs)(W.Z,{className:"video-ann-row",gutter:24,children:[(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(G.Z.Item,{className:"video-ann-form-item",name:"start",label:"Start",children:(0,k.jsx)(M.Z,{className:"video-ann-property-input",min:l.min,max:a.end,step:.1,bordered:!0,id:"video-ann-blur-input-start",formatter:function(t){return(0,m.ZX)(t)},parser:function(t){return(0,m.sZ)(t)},onChange:t.onChangeStart})})},0),(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(G.Z.Item,{className:"video-ann-form-item",name:"end",label:"End",children:(0,k.jsx)(M.Z,{className:"video-ann-property-input",min:a.start+.1,max:l.max,bordered:!0,step:.1,id:"video-ann-blur-input-end",formatter:function(t){return(0,m.ZX)(t)},parser:function(t){return(0,m.sZ)(t)},onChange:t.onChangeEnd})})},1)]})]})})),ie=["#FF0000","#FF9900","#0072E6","#12DC00","#CF00FF","#FFFFFF"],ae=(0,w.forwardRef)((function(t,e){var n=Kt((0,w.useState)(t.alpha),2),r=n[0],o=n[1],i=Kt((0,w.useState)(t.color),2),a=i[0],s=i[1],c=Kt((0,w.useState)(t.border),2),l=c[0],u=c[1],f=Kt((0,w.useState)(t.shadow),2),d=f[0],h=f[1],p=Kt((0,w.useState)(t.border>0),2),y=p[0],g=p[1],v=Kt((0,w.useState)(t.shadow>0),2),b=v[0],x=v[1],S=Kt((0,w.useState)(!1),2),P=S[0],O=S[1],C=Kt((0,w.useState)({start:t.start,end:t.end}),2),A=C[0],E=C[1],I=Kt((0,w.useState)({min:t.timeRangeBySec?t.timeRangeBySec.min:0,max:t.timeRangeBySec?t.timeRangeBySec.max:t.maxTime}),2),N=I[0],D=I[1];(0,w.useImperativeHandle)(e,(function(){return{refreshUI:T,refreshRange:Z}}));var F=Kt(G.Z.useForm(),1)[0];(0,w.useEffect)((function(){F.setFieldsValue({start:t.start,end:t.end}),E({start:t.start,end:t.end}),s(t.color),u(t.border),h(t.shadow),g(t.border>0),x(t.shadow>0),D({min:t.timeRangeBySec?t.timeRangeBySec.min:0,max:t.timeRangeBySec?t.timeRangeBySec.max:t.maxTime});var e=document.querySelector("#video-ann-image-input-start");e&&e.setAttribute("readonly",!0);var n=document.querySelector("#video-ann-image-input-end");n&&n.setAttribute("readonly",!0)}),[t.md5]);var T=function(t,e){E({start:t,end:e}),F.setFieldsValue({start:t,end:e})},Z=function(t,e){D({min:t,max:e})};return(0,k.jsxs)(G.Z,{className:"video-ann-property-form",form:F,initialValues:{start:A.start,end:A.end},layout:"vertical",children:[(0,k.jsx)(H.Z,{orientation:"left",style:{marginTop:6},className:"video-ann-property-divider",plain:!0,children:(0,k.jsx)(U.Z,{className:"video-ann-property-checkbox",checked:y,onChange:function(e){g(e.target.checked),e.target.checked?$t.includes(l)?t.handleChangeBorder(l):(u(4),t.handleChangeBorder(4)):t.handleChangeBorder(0)},children:"Border"})}),y?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(H.Z,{orientation:"left",className:"video-ann-property-divider",style:{marginTop:14},plain:!0,children:"Color"}),(0,k.jsx)(W.Z,{style:{marginBottom:"8px",marginTop:"8px"},gutter:11,children:(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(Q.PU,{className:j()("tool-color-picker multi-btn",{selected:P}),onPopupShown:function(t){O(t)},children:function(e,n){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"tool-current-color current",id:"tool-current-color",style:{backgroundColor:a},"data-color":a}),(0,k.jsx)("span",{className:"ant-select-arrow",unselectable:"on","aria-hidden":"true",style:{marginLeft:8,userSelect:"none"},children:(0,k.jsx)("span",{role:"img","aria-label":"down",className:"anticon anticon-down ant-select-suffix",children:(0,k.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"down",width:"1em",height:"1em",fill:"white","aria-hidden":"true",children:(0,k.jsx)("path",{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"})})})}),(0,k.jsx)(st,{active:e.isExpand,type:"little",handleColorSelected:function(e){n(),t.handleChangeColor(e),s(e)}})]})}})})}),(0,k.jsx)(H.Z,{orientation:"left",className:"video-ann-property-divider",plain:!0,children:"Size"}),(0,k.jsx)(Y.Z,{style:{width:"100%",height:"30px",marginBottom:"2px",marginTop:"8px"},value:l>0?l:void 0,className:"video-ann-property-select",dropdownClassName:"video-ann-property-dropdown",placeholder:"Please select",treeDefaultExpandAll:!0,onChange:function(e){t.handleChangeBorder(e),u(e)},children:$t.map((function(t){return(0,k.jsx)(Yt,{className:"video-ann-property-node",value:t,title:(0,k.jsx)("div",{className:"video-ann-property-line",style:{height:t+"px",marginTop:(28-t)/2+"px"}})},t)}))})]}):"",(0,k.jsx)(H.Z,{className:"video-ann-property-divider-sep"}),(0,k.jsx)(H.Z,{orientation:"left",className:"video-ann-property-divider",plain:!0,children:(0,k.jsx)(U.Z,{className:"video-ann-property-checkbox",checked:b,onChange:function(e){x(e.target.checked),e.target.checked?t.handleChangeShadow(d):t.handleChangeShadow(0)},children:"Shadow"})}),b?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(W.Z,{className:"video-ann-row",gutter:24,style:{marginBottom:"0",marginTop:"2px"},children:[(0,k.jsx)("span",{className:"video-ann-text",children:"Light"}),(0,k.jsx)(z.Z,{className:"video-ann-property-slider",min:0,max:3,step:1,tooltipVisible:!1,onChange:function(e){t.handleChangeShadow(e),h(e)},value:d}),(0,k.jsx)("span",{className:"video-ann-text",children:"Heavy"})]})}):"",(0,k.jsx)(H.Z,{className:"video-ann-property-divider-sep",style:{marginTop:b?8:14}}),(0,k.jsx)(H.Z,{orientation:"left",style:{marginTop:"4px"},className:"video-ann-property-divider",plain:!0,children:"Opacity"}),(0,k.jsxs)(W.Z,{className:"video-ann-row",gutter:24,style:{marginBottom:"6px",marginTop:"2px"},children:[(0,k.jsx)("span",{className:"video-ann-text",children:"Low"}),(0,k.jsx)(z.Z,{className:"video-ann-property-slider",min:.1,max:1,step:.1,tooltipVisible:!1,onChange:function(e){t.handleChangeAlpha(e),o(e)},value:r}),(0,k.jsx)("span",{className:"video-ann-text",children:"High"})]}),(0,k.jsxs)(W.Z,{className:"video-ann-row",gutter:24,children:[(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(G.Z.Item,{className:"video-ann-form-item",name:"start",label:"Start",children:(0,k.jsx)(M.Z,{className:"video-ann-property-input",min:N.min,max:A.end,step:.1,bordered:!0,id:"video-ann-image-input-start",formatter:function(t){return(0,m.ZX)(t)},parser:function(t){return(0,m.sZ)(t)},onChange:t.onChangeStart})})},0),(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(G.Z.Item,{className:"video-ann-form-item",name:"end",label:"End",children:(0,k.jsx)(M.Z,{className:"video-ann-property-input",min:A.start+.1,max:N.max,bordered:!0,step:.1,id:"video-ann-image-input-end",formatter:function(t){return(0,m.ZX)(t)},parser:function(t){return(0,m.sZ)(t)},onChange:t.onChangeEnd})})},1)]})]})})),se=(0,w.forwardRef)((function(t,e){var n=Kt(G.Z.useForm(),1)[0],r=Kt((0,w.useState)(t.color),2),o=r[0],i=r[1],a=Kt((0,w.useState)(t.weight),2),s=a[0],c=a[1],l=Kt((0,w.useState)({start:t.start,end:t.end}),2),u=l[0],f=l[1],d=Kt((0,w.useState)({min:t.timeRangeBySec?t.timeRangeBySec.min:0,max:t.timeRangeBySec?t.timeRangeBySec.max:t.maxTime}),2),h=d[0],p=d[1];(0,w.useEffect)((function(){n.setFieldsValue({start:t.start,end:t.end}),i(t.color),c(t.weight),f({start:t.start,end:t.end}),p({min:t.timeRangeBySec?t.timeRangeBySec.min:0,max:t.timeRangeBySec?t.timeRangeBySec.max:t.maxTime});var e=document.querySelector("#video-ann-shape-input-start");e&&e.setAttribute("readonly",!0);var r=document.querySelector("#video-ann-shape-input-end");r&&r.setAttribute("readonly",!0)}),[t.md5]);var y=function(t,e){p({min:t,max:e})},g=function(t,e,r){f({start:t,end:e}),n.setFieldsValue({start:t,end:e}),i(r.color),c(r.weight)};return(0,w.useImperativeHandle)(e,(function(){return{refreshRange:y,refreshUI:g}})),(0,k.jsxs)(G.Z,{className:"video-ann-property-form",initialValues:{start:u.start,end:u.end},form:n,layout:"vertical",children:[(0,k.jsx)(H.Z,{orientation:"left",className:"video-ann-property-divider",plain:!0,children:"Size"}),(0,k.jsx)(Y.Z,{style:{width:"100%",height:"30px",marginBottom:"16px",marginTop:"8px"},value:s,tabIndex:5001,className:"video-ann-property-select",dropdownClassName:"video-ann-property-dropdown",placeholder:"Please select",treeDefaultExpandAll:!0,onChange:function(e){t.handleChangeWeight(e)},children:[2,4,6,8,12].map((function(t){return(0,k.jsx)(Yt,{className:"video-ann-property-node",value:t,title:(0,k.jsx)("div",{className:"video-ann-property-line",style:{height:t+"px",marginTop:(28-t)/2+"px"}})},t)}))}),(0,k.jsx)(H.Z,{orientation:"left",className:"video-ann-property-divider",plain:!0,children:"Color"}),(0,k.jsx)(W.Z,{style:{marginBottom:"12px",marginTop:"8px"},gutter:11,children:ie.map((function(e,n){return(0,k.jsx)(X.Z,{className:"gutter-row",span:4,children:(0,k.jsx)(q.Z,{className:"video-ann-property-color shape-color-btn",style:{backgroundColor:e,borderColor:o==e?"white":e},onClick:function(){t.handleChangeColor(e),i(e)},type:"primary"})},e+n)}))}),(0,k.jsxs)(W.Z,{gutter:24,children:[(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(G.Z.Item,{className:"video-ann-form-item",name:"start",label:"Start",children:(0,k.jsx)(M.Z,{className:"video-ann-property-input",min:h.min,max:u.end,step:.1,bordered:!0,id:"video-ann-shape-input-start",formatter:function(t){return(0,m.ZX)(t)},parser:function(t){return(0,m.sZ)(t)},onChange:t.onChangeStart})})},0),(0,k.jsx)(X.Z,{span:12,children:(0,k.jsx)(G.Z.Item,{className:"video-ann-form-item",name:"end",label:"End",children:(0,k.jsx)(M.Z,{className:"video-ann-property-input",min:u.start+.1,max:h.max,id:"video-ann-shape-input-end",bordered:!0,step:.1,formatter:function(t){return(0,m.ZX)(t)},parser:function(t){return(0,m.sZ)(t)},onChange:t.onChangeEnd})})},1)]})]})})),ce=n(72633),le=n(59259),ue=n(65855),fe=n(66241),de=n(22917),he=n(87734),pe=n(10596);function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(n),!0).forEach((function(e){ve(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ve(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==me(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===me(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const be=function(t){return(0,k.jsx)("svg",ge(ge({width:"1em",height:"1em",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",role:"img"},t),{},{children:(0,k.jsx)("path",{d:"M10.5.5c.828 0 1.5.657 1.5 1.467v8.066c0 .81-.672 1.467-1.5 1.467h-9c-.828 0-1.5-.657-1.5-1.467V1.967C0 1.157.672.5 1.5.5h9ZM8.204 6.674 6.216 9.037l-.069.068a.915.915 0 0 1-1.201.01l-.07-.068L3.372 7.43 1.125 9.585v.448c0 .18.133.33.308.361l.067.006h9c.184 0 .337-.13.369-.3l.006-.067v-.93l-2.671-2.43ZM10.5 1.6h-9a.373.373 0 0 0-.369.3l-.006.067v6.18L2.748 6.59a.915.915 0 0 1 1.2-.053l.096.09 1.493 1.602 1.957-2.327a.914.914 0 0 1 1.187-.178l.08.057.04.035 2.074 1.885V1.967a.37.37 0 0 0-.308-.361L10.5 1.6Z",fill:"#currentColor",fillRule:"nonzero"})}))};function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(n),!0).forEach((function(e){De(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Se(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&je(t,e)}function je(t,e){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},je(t,e)}function Pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ce(t);if(e){var o=Ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oe(this,n)}}function Oe(t,e){if(e&&("object"===Ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ke(t)}function ke(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ce(t){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ce(t)}function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fe(r.key),r)}}function Ne(t,e,n){return e&&Ie(t.prototype,e),n&&Ie(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function De(t,e,n){return(e=Fe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fe(t){var e=function(t,e){if("object"!==Ae(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ae(e)?e:String(e)}function Te(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ze(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Re="#FF0000",Be=window.devicePixelRatio>1?48:36,Le=window.devicePixelRatio>1?64:48,Ve=280,Ue=160,ze=function(t){var e=1;if(t&&t.videoDuration>0){var n=s.ZP.round(50*t.videoDuration/t.processbarLength,4);n>1&&(e=n)}return e},Me=null,_e=function(t,e){Me||(Me=document.createElement("canvas"));var n=Me.getContext("2d");return n.font=e,n.measureText(t)},He={bold:!1,italy:!1,fontFamily:"'Open Sans', 'Noto Sans', sans-serif",size:Be,color:"#FFFFFF",bgColor:Re,align:["center","center"],isBg:!1},We={weight:6,rotate:0,color:Re},qe={alpha:1,rotate:0,shadow:1,border:0,color:Re},Xe={start:0,duration:0,format:We,screenPos:{width:0,height:0},left:0,top:0,right:0,bottom:0},Ke={content:"",start:0,format:He,screenPos:{width:0,height:0},duration:0,left:0,top:0,link:""},Ge={start:0,duration:0},Ye=function(){function t(e,n,r,o){var i=this;Ee(this,t),De(this,"onReferBar",(function(t){i.referBarItem=t})),this.info=(0,m.zs)(t.typeDef(n)),this.md5=this.info.md5||(0,m.D_)(),this.hash=(0,m.OT)(this.info),this.options=o,(!this.info.type||this.info.type.length<=0)&&(this.info.type=r),this.env=e,this.refreshSidebar=!1,this.refreshProcessBar=!1,this.refreshSimulator=!1,this._timeRangeBySec=null,this.referForm=(0,w.createRef)(),this.referSimulatorItem=(0,w.createRef)(),this.referBarItem=(0,w.createRef)()}return Ne(t,[{key:"duration",get:function(){return this.info.duration},set:function(t){this.info.duration=s.ZP.round(t,1)}},{key:"sortStart",get:function(){return this.start}},{key:"start",get:function(){return this.info.start},set:function(t){this.info.start=s.ZP.round(t,1)}},{key:"timeRangeBySec",get:function(){return this._timeRangeBySec},set:function(t){this._timeRangeBySec=(0,m.zs)(t),this.referForm&&this.referForm.current&&this.referForm.current.refreshRange&&this.referForm.current.refreshRange(t.min,t.max)}},{key:"end",get:function(){return s.ZP.plus(this.info.start,this.info.duration)}},{key:"type",get:function(){return this.info.type},set:function(t){this.info.type=t,this.hash=(0,m.OT)(this.info)}},{key:"getJSONInfo",value:function(){return JSON.stringify(this.info)}},{key:"refreshUI",value:function(){}},{key:"checkFormValidate",value:function(){return!(this.referForm&&this.referForm.current&&this.referForm.current.validate)||this.referForm.current.validate()}},{key:"onChangeStart",value:function(t){var e=this.end-t;this.options.onUpdate(this.md5,{start:t,duration:s.ZP.round(e,1)})}},{key:"onChangeEnd",value:function(t){this.start;this.options.onUpdate(this.md5,{duration:s.ZP.round(t-this.start,1)})}},{key:"unmount",value:function(){this.referBarItem&&this.referBarItem.current&&this.referBarItem.current.unmount&&this.referBarItem.current.unmount()}},{key:"focus",value:function(){}},{key:"updateInfo",value:function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("object"==Ae(n))if("format"==e){for(var r in this.info.format||(this.info.format={}),n)this.info.format[r]=n[r];this.refreshSidebar=!0,this.refreshSimulator=!0}else"screenPos"==e&&v.Z.isSafari()?(this.info[e]=(0,m.zs)(n),this.refreshSimulator=!0):this.info[e]=(0,m.zs)(n);else"duration"==e&&n>0||"start"==e&&n>=0?(this.refreshSidebar=!0,this.refreshProcessBar=!0):"content"==e?this.refreshSimulator=!0:"left"!=e&&"top"!=e&&"width"!=e&&"height"!=e||(this.refreshSimulator=!0),this.info[e]=n}this.hash=(0,m.OT)(this.info),this.refreshUI()}},{key:"clone",value:function(){return new t(this.env,this.info,this.type)}}],[{key:"typeDef",value:function(t){if(!t)return{};var e=t.start,n=t.duration;return"string"==typeof e&&(t.start=s.ZP.round(parseFloat(e),1)),"string"==typeof n&&(t.duration=s.ZP.round(parseFloat(n),1)),t}}]),t}(),Je=function(t){Se(n,t);var e=Pe(n);function n(t,r,o,i){var a;return Ee(this,n),De(ke(a=e.call(this,t,n.typeDef(r),o,i)),"canBeShown",(function(t){return a.start<=t&&a.end>=t})),De(ke(a),"repaint",(function(t,e){var n=function(){if("arrow"==a.info.cmd||"link"==a.type||"text"==a.type){var t={};t="arrow"==a.info.cmd?a.calculateActualPos(g()(a.info,["left","top","right","bottom"])):a.calculateActualPos(g()(a.info,["x","y","width","height"])),a.info.width=t.width,a.info.height=t.height,a.info.x=t.x,a.info.y=t.y}};a.referSimulatorItem&&a.referSimulatorItem.current?a.canBeShown(t)||e?(a.referSimulatorItem.current.show(),setTimeout(n,100)):a.referSimulatorItem.current.hide():e&&setTimeout((function(){a.referSimulatorItem&&a.referSimulatorItem.current&&(a.referSimulatorItem.current.show(),setTimeout(n,100))}),200)})),De(ke(a),"prepareUploadSnapshot",(function(t){var e=ke(a);return new Promise((function(n,r){e._snapshotKey=(0,m.D_)();var o=e.size,i=(0,m.zs)(o);if(i.x=0,i.y=0,e.info.snapshotType="image/png","arrow"==e.info.cmd){o.x=e.info.x,o.y=e.info.y;var a=1.6*e.info.format.weight,s=Math.abs(e.info.top-e.info.bottom),c=Math.abs(e.info.right-e.info.left),l=Math.hypot(1,3)*e.info.format.weight*3,u=Math.hypot(s,c),f=s/c,d=Math.atan(1/3),h=2*e.info.format.weight*s/u+a,p=a,y=2*e.info.format.weight*c/u+a,g=a,v=a+y,b=a+h;if(f>3)if(o.width<l)o.x-=y+(l-o.width)/2,e.info.x=o.x,i.width=l+v,i.height+=b,e.info.top>e.info.bottom?o.y-=h:o.y-=a,e.info.y=o.y;else{var x=Math.atan(1/f),w=l*Math.sin(d-x);e.info.right<e.info.left?o.x-=w+g:o.x-=y,e.info.x=o.x,i.width+=w+v,i.height+=b,e.info.top>e.info.bottom?o.y-=h:o.y-=a,e.info.y=o.y}else if(f<.3333)if(o.height<l)o.y-=h+(l-o.height)/2,e.info.y=o.y,i.height=l+b,i.width+=v,e.info.right<e.info.left?o.x-=y:o.x-=a,e.info.x=o.x;else{var S=Math.atan(f),j=l*Math.sin(d-S);e.info.top>e.info.bottom?o.y-=j+h:o.y-=j+p,e.info.y=o.y,i.height+=j+b,i.width+=v,e.info.right<e.info.left?o.x-=y:o.x-=a,e.info.x=o.x}else i.height+=b,i.width+=v,e.info.top>e.info.bottom?o.y-=h:o.y-=a,e.info.right<e.info.left?o.x-=y:o.x-=a,e.info.y=o.y,e.info.x=o.x}else"text"!=e.type&&"link"!=e.type||"transparent"!=e.info.format.bgColor&&(i.x=-10,i.y=-10,i.width+=20,i.height+=20,e.info.y=e.info.top-10,e.info.x=e.info.left-10);(0,m.zB)(e.referSimulatorItem.current.outerHTML(o),i,e.assistIndex,t,e.info.snapshotType,(function(t){e._localFile=new File([t],e.snapshotKey+".png"),n(e)}))}))})),De(ke(a),"dataforUpload",(function(){for(var t in a.info)if(a.info.hasOwnProperty(t)){var e=a.info[t];Number(e)===e&&e%1!=0&&(a.info[t]=s.ZP.round(e,1))}return we(we({},a.info),{},{md5:a.md5})})),De(ke(a),"codeForBar",(function(){})),a.displayWidth=0,a.displayHeight=0,a._formatChanged=!1,a._localFile=null,a._snapshotKey=null,a.uploadFailed=!1,a}return Ne(n,[{key:"formatChanged",get:function(){return this._formatChanged},set:function(t){this._formatChanged=t}},{key:"focus",value:function(){this.info.zIndex=(new Date).getTime()}},{key:"zIndex",get:function(){return"blur"==this.info.type?this.info.zIndex-1e10:this.info.zIndex}},{key:"color",get:function(){return this.info.format.bgColor||"text"!=this.type&&"link"!=this.type?this.info.format.color:"white"}},{key:"borderColor",get:function(){var t="rgba(231, 231, 231,0.4)";switch(this.info.format.bgColor){case"#FF0000":case"#CF00FF":t="rgba(255,255,255,0.4)";break;case"#FF9900":t="rgba(255,255,255,0.38)";break;case"#0072E6":t="rgba(255,255,255,0.2)";break;case"#12DC00":t="rgba(255,255,255,0.5)";break;case"#E7E7E7":t="rgba(255,255,255,1)"}return t}},{key:"assistIndex",get:function(){return-1}},{key:"snapshotKey",get:function(){return this._snapshotKey&&this._snapshotKey.length>0?this._snapshotKey:this.info.snapshotKey},set:function(t){this._snapshotKey=t}},{key:"snapshotType",get:function(){return this.info.snapshotType}},{key:"localSnapshotFile",get:function(){return this._localFile},set:function(t){this._localFile=t}},{key:"shouldbeUpload",value:function(){return!1}},{key:"updateSnapshotKey",value:function(){this._snapshotKey&&this._snapshotKey.length>0&&this._snapshotKey!=this.info.snapshotKey&&(this.info.snapshotKey=this._snapshotKey)}},{key:"refreshInfo",value:function(){return we(we({},this.info),{},{isLittleScreenMode:this.env.isLittleScreenMode})}},{key:"shouldUpdateImage",value:function(){return this.formatChanged||!this.info.snapshotKey||this.info.snapshotKey.length<=0}},{key:"calculateActualPos",value:function(){return Object.assign(this.size,g()(this.info,["x","y"]))}}],[{key:"typeDef",value:function(t){if(!t)return{};var e=t.zIndex,n=t.x,r=t.y,o=t.left,i=t.top;return"string"==typeof o&&(t.left=parseFloat(o)),"string"==typeof i&&(t.top=parseFloat(i)),void 0===n&&(t.x=t.left),void 0===r&&(t.y=t.top),void 0===e&&(t.zIndex=0),t}}]),n}(Ye),Qe=[3,4,8],$e=[1,2,4],tn=[2,4,6],en=[4,8,16],nn=function(t){Se(n,t);var e=Pe(n);function n(t,r,o,i){var a;Ee(this,n),De(ke(a=e.call(this,t,n.typeDef(r),o,i)),"calculatePosition",(function(t){return t&&(a.info.left=(t.width-a.displayWidth)/2,a.info.top=(t.height-a.displayHeight)/2,!a.info.scale&&a.info.screenPos&&(a.info.scale=t.width/a.info.screenPos.width),a.info.x=a.info.left-10,a.info.y=a.info.top-10,a.info.range={width:t.width,height:t.height}),ke(a)})),De(ke(a),"handleChangeFontSize",(function(t,e){a.formatChanged=!0,a.options.onUpdate(a.md5,{format:{size:t,borderWidth:Qe[e],strokeWidth:$e[e],borderRadius:en[e],assistIndex:e,underlineWidth:tn[e],paddingX:s.ZP.round(2*t/3,1)}})})),De(ke(a),"handleChangeItalic",(function(t){a.formatChanged=!0,a.options.onUpdate(a.md5,{format:{italy:t}})})),De(ke(a),"handleChangeAlign",(function(t,e){a.formatChanged=!0,a.options.onUpdate(a.md5,{format:{align:[t,e]}})})),De(ke(a),"handleChangeBold",(function(t){a.formatChanged=!0,a.options.onUpdate(a.md5,{format:{bold:t}})})),De(ke(a),"handleChangeColor",(function(t,e){a.formatChanged=!0,a.refreshProcessBar=!0,a.options.onUpdate(a.md5,{format:{color:e,bgColor:t}})})),De(ke(a),"handleChangeCt",(function(t){a.formatChanged=!0,a.refreshProcessBar=!0,a.refreshSidebar=!0,a.options.onUpdate(a.md5,{content:t})})),De(ke(a),"handleChangeLink",(function(t){a.formatChanged=!0,a.refreshProcessBar=!0,a.refreshSidebar=!0;var e={link:t};e.content=t,a.options.onUpdate(a.md5,e)})),De(ke(a),"canReset",(function(){return a.formatChanged})),De(ke(a),"reset",(function(t){a.options.onUpdate(a.md5,{content:"",format:He})})),De(ke(a),"code4Property",(function(t){return(0,k.jsx)(ne,we(we({start:a.start,end:a.end,ref:a.referForm,md5:a.md5,content:a.info.content,isLink:"link"==a.type},a.info.format),{},{link:a.info.link||a.info.format.link,timeRangeBySec:a.timeRangeBySec,maxTime:t,isLittleMode:a.env.isLittleScreenMode,handleChangeLink:function(t){a.formatChanged=!0,a.refreshProcessBar=!0,a.refreshSidebar=!0;var e={};null!=t.match(/((https?|ftps?):\/\/)([-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*))/i)?(e.link=t,(!a.info.content||a.info.content.length<=0)&&(e.content=t)):e.link=t,a.options.onUpdate(a.md5,e)},handleChangeCt:a.handleChangeCt,handleChangeFontSize:a.handleChangeFontSize,handleChangeItalic:a.handleChangeItalic,handleChangeBold:a.handleChangeBold,handleChangeColor:a.handleChangeColor,handleChangeAlign:a.handleChangeAlign,onChangeEnd:function(t){a.onChangeEnd(t)},onChangeStart:function(t){a.onChangeStart(t)}}))})),De(ke(a),"ctInBar",(function(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(J.Z,{className:"ct-symbol",style:{color:a.color},component:a.isLink?le.Z:ue.Z}),(0,k.jsx)("span",{id:"txt-ct-".concat(a.md5),className:"ct-txt",style:{textTecoration:a.isLink?"underline":""},children:a.info.content})]})})),De(ke(a),"code4Paint",(function(t,e){return(0,k.jsx)(T,we(we({width:a.displayWidth,height:a.displayHeight,minSize:a.minSize,readonly:t||null!=document.fullscreenElement,scale:e.scale,selectedBlur:e.selectedBlur,show:a.canBeShown(e.currentTime),ref:a.referSimulatorItem,current:e.selectedMd5,retrieveCanvas:e.retrieveCanvas,txtDispOffsetX:a.paddingX,txtDispOffsetY:4+1.05*a.info.format.size,md5:a.md5,handleChangeCt:function(t){a.isLink?null!=t.match(/((https?|ftps?):\/\/)([-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*))/i)?a.handleChangeLink(t):a.handleChangeCt(t):a.handleChangeCt(t)},onSelect:e.onSelect,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd},a.info),{},{borderWidth:a.borderWidth,strokeWidth:a.strokeWidth,assistIndex:a.assistIndex,borderRadius:a.borderRadius,underlineWidth:a.underlineWidth,isLittleMode:a.env.isLittleScreenMode,isLink:a.isLink}),a.md5)})),a.minSize={};var c=a.size;return a.displayWidth=c.width,a.displayHeight=c.height,a}return Ne(n,[{key:"bgColor",get:function(){return this.info.format?!this.info.format.bgColor&&this.info.format.color?this.info.format.color:"transparent"!=this.info.format.bgColor&&this.info.format.bgColor?this.info.format.bgColor:"#000000":"#FFFFFF"}},{key:"size",get:function(){var t=function(t,e){if(!t)return{};var n,r="".concat(e.italy?"italic":"normal"," ").concat(e.bold||!e.bgColor||"transparent"==e.bgColor?"900":"normal"," ").concat(e.size,"px ").concat(e.fontFamily),o=t.split("\n"),i=0,a=Te(o);try{for(a.s();!(n=a.n()).done;){var s=n.value,c=_e(s,r).width;c>i&&(i=c)}}catch(t){a.e(t)}finally{a.f()}return{width:i+6,height:o.length*e.size*1.5+o.length-1}}(this.info.content&&this.info.content.length>0?this.info.content:this.isLink?"Add link text":"Enter text here",this.info.format);return this.minSize={width:t.width+2*this.paddingX,height:t.height+8},this.info.width&&this.info.height?{width:this.info.width,height:this.info.height}:this.minSize}},{key:"strokeWidth",get:function(){return this.info.format.strokeWidth?this.info.format.strokeWidth:$e[this.assistIndex]}},{key:"borderWidth",get:function(){return this.info.format.borderWidth?this.info.format.borderWidth:Qe[this.assistIndex]}},{key:"underlineWidth",get:function(){return this.info.format.underlineWidth?this.info.format.underlineWidth:tn[this.assistIndex]}},{key:"borderRadius",get:function(){return this.info.format.borderRadius?this.info.format.borderRadius:en[this.assistIndex]}},{key:"assistIndex",get:function(){return this.info.format.assistIndex||0==this.info.format.assistIndex||(this.info.format.assistIndex=this.env.isLittleScreenMode?1:0),this.info.format.assistIndex}},{key:"paddingX",get:function(){return this.info.format.paddingX||(this.info.format.paddingX=s.ZP.round(2*this.info.format.size/3,1)),this.info.format.paddingX}},{key:"isLink",get:function(){return!!(this.info&&(this.info.link&&this.info.link.length>0||this.info.format.link&&this.info.format.link.length>0)||"link"==this.type)}},{key:"shouldbeUpload",value:function(){return this.info.content&&this.info.content.length>0&&(this.isLink&&this.info.link&&this.info.link.length>0||!this.isLink)}},{key:"refreshUI",value:function(){var t=this.size;this.info.width=t.width<this.minSize.width?this.minSize.width:t.width,this.info.height=t.height<this.minSize.height?this.minSize.height:t.height,this.info.left+this.info.width>this.info.range.width&&(this.info.left=this.info.range.width-this.info.width),this.info.top+this.info.height>this.info.range.height&&(this.info.top=this.info.range.height-this.info.height);var e=6*this.env.scale;this.info.left<e&&(this.info.left=e),this.info.top<e&&(this.info.top=e),this.info.width>=this.info.range.width-2*e&&(this.info.width=this.info.range.width-2*e),this.info.height>=this.info.range.height-2*e&&(this.info.height=this.info.range.height-2*e),this.info.y=this.info.top-10,this.info.x=this.info.left-10,this.referSimulatorItem&&this.referSimulatorItem.current&&this.refreshSimulator&&this.referSimulatorItem.current.refreshUI(this.env.scale,{width:this.info.width,height:this.info.height},this.info);var n=document.querySelector("#txt-ct-".concat(this.md5));n&&(n.innerText=this.info.content),this.referForm&&this.referForm.current&&this.refreshSidebar&&this.referForm.current.refreshUI(this.start,this.end,this.info.format,this.info.content,this.info.link)}},{key:"focus",value:function(){this.isLink&&this.info.content.length>0&&this.info.link.length>0||!this.isLink&&this.info.content.length>0||(this.isLink&&this.info.content.length>0||this.env.isLittleScreenMode?this.referForm&&this.referForm.current&&this.referForm.current.focus(this.isLink&&this.info.content.length>0):this.referSimulatorItem&&this.referSimulatorItem.current&&this.referSimulatorItem.current.focus())}}],[{key:"typeDef",value:function(t){if(!t)return{};var e=t.screenPos,n=t.x,r=t.y,o=t.format,i=t.left,a=t.top;return e&&("string"==typeof e.width&&(e.width=parseFloat(e.width)),"string"==typeof e.height&&(e.height=parseFloat(e.height))),o?"object"!=Ae(o.align)&&(o.align=["center","center"]):t.format=(0,m.zs)(He),n!=s.ZP.minus(i,10)&&(t.left=n),r!=s.ZP.minus(a,10)&&(t.top=r),t}},{key:"Create",value:function(t,e,r,o,i){var a=(0,m.zs)(Ke);return a.md5=e,a.start=s.ZP.round(t,1),a.start>t&&(a.start-=.1),a.duration=ze(o),a.start+a.duration>o.videoDuration&&(a.start=o.videoDuration-a.duration),a.format=(0,m.zs)(He),o.isLittleScreenMode&&(a.format.size=Le),a.screenPos=(0,m.zs)(o.screenPos),a.scale=o.scale,a.zIndex=(new Date).getTime(),new n(o,a,r,i).calculatePosition(o.videoBound)}}]),n}(Je),rn=function(t){Se(n,t);var e=Pe(n);function n(t,r,o){var i;Ee(this,n),De(ke(i=e.call(this,t,n.typeDef(r),"shape",o)),"calculatePosition",(function(t){return t&&(i.info.x=(t.width-Ve)/2,i.info.y=(t.height-Ue)/2,!i.info.scale&&i.info.screenPos&&(i.info.scale=t.width/i.info.screenPos.width),i.info.left=i.info.x,i.info.top=i.info.y,i.info.right=i.info.x+Ve,i.info.bottom=i.info.y+Ue,i.info.width=Ve,i.info.height=Ue,i.info.range={width:t.width,height:t.height}),ke(i)})),De(ke(i),"ctInBar",(function(){var t="#FFFFFF"==i.info.format.color?"#000000":"#FFFFFF";return"rect"==i.info.cmd?(0,k.jsx)(J.Z,{className:"ct-symbol",style:{color:t},component:fe.Z}):"ellipse"==i.info.cmd?(0,k.jsx)(J.Z,{className:"ct-symbol",style:{color:t},component:he.Z}):(0,k.jsx)(J.Z,{className:"ct-symbol",style:{color:t},component:de.Z})})),De(ke(i),"code4Paint",(function(t,e){var n={width:i.info.width,height:i.info.height,key:i.md5,readonly:t||null!=document.fullscreenElement,show:i.canBeShown(e.currentTime),ref:i.referSimulatorItem,current:e.selectedMd5,selectedBlur:e.selectedBlur,md5:i.md5,scale:e.scale,retrieveCanvas:e.retrieveCanvas,onSelect:e.onSelect,onDragStart:e.onDragStart,onDragEnd:function(t,n,r,o){o&&(i.formatChanged=!0),"arrow"==i.info.cmd&&i.calculateActualPos(r),e.onDragEnd(t,n,r)}};return"rect"==i.info.cmd?(0,k.jsx)(B,we(we({},n),i.info)):"ellipse"==i.info.cmd?(0,k.jsx)(L,we(we({},n),i.info)):(0,k.jsx)(V,we(we({},n),i.info))})),De(ke(i),"handleChangeColor",(function(t){i.formatChanged=!0,i.options.onUpdate(i.md5,{format:{color:t}})})),De(ke(i),"handleChangeWeight",(function(t){i.formatChanged=!0;var e=i.info.format.weight;i.options.onUpdate(i.md5,{width:i.info.width-e+t,height:i.info.height-e+t,format:{weight:t}}),"arrow"==i.info.cmd&&i.calculateActualPos(g()(i.info,["left","top","right","bottom"]))})),De(ke(i),"canReset",(function(){return i.formatChanged})),De(ke(i),"reset",(function(t){i.options.onUpdate(i.md5,{format:We})})),De(ke(i),"code4Property",(function(t){return(0,k.jsx)(se,we(we({start:i.start,end:i.end,md5:i.md5,ref:i.referForm,timeRangeBySec:i.timeRangeBySec},i.info.format),{},{maxTime:t,handleChangeWeight:i.handleChangeWeight,handleChangeColor:i.handleChangeColor,onChangeEnd:function(t){i.onChangeEnd(t)},onChangeStart:function(t){i.onChangeStart(t)}}))}));var a=i.size;return i.displayWidth=a.width,i.displayHeight=a.height,i.posHash="",i}return Ne(n,[{key:"bgColor",get:function(){return this.info.format.color}},{key:"size",get:function(){return this.info.width&&this.info.height?{width:this.info.width,height:this.info.height}:{width:this.info.right-this.info.left,height:this.info.bottom-this.info.top}}},{key:"calculateActualPos",value:function(t){var e=(0,m.OT)(t);if(this.posHash!=e){this.posHash=e;var n=document.querySelector("#svg-g-".concat(this.md5));if(n){var r=n.getBBox({markers:!0});return Object.assign(t,{x:r.x,y:r.y,width:r.width,height:r.height})}}return t.hasOwnProperty("x")&&t.hasOwnProperty("y")&&t.hasOwnProperty("width")&&t.hasOwnProperty("height")?t:g()(this.info,["x","y","width","height"])}},{key:"shouldbeUpload",value:function(){return this.info.right-this.info.left!=0&&this.info.bottom-this.info.top!=0}},{key:"refreshUI",value:function(){if(this.referSimulatorItem&&this.referSimulatorItem.current){var t=this.size;this.referSimulatorItem.current.refreshUI(t,this.info)}this.referForm&&this.referForm.current&&this.referForm.current.refreshUI(this.start,this.end,this.info.format)}}],[{key:"typeDef",value:function(t){if(!t)return{};var e=t.screenPos,n=t.width,r=t.height,o=t.left,i=t.top,a=t.right,c=t.bottom;return e&&("string"==typeof e.width&&(e.width=parseFloat(e.width)),"string"==typeof e.height&&(e.height=parseFloat(e.height))),"string"==typeof a&&(t.right=parseFloat(a)),"string"==typeof c&&(t.bottom=parseFloat(c)),n||(t.width=Math.abs(s.ZP.minus(a,o))),r||(t.height=Math.abs(s.ZP.minus(c,i))),t}},{key:"Create",value:function(t,e,r,o,i){var a=(0,m.zs)(Xe);return a.md5=r,a.cmd=t,a.start=s.ZP.round(e,1),a.start>e&&(a.start-=.1),a.duration=ze(o),a.start+a.duration>o.videoDuration&&(a.start=o.videoDuration-a.duration),a.format=(0,m.zs)(We),a.screenPos=(0,m.zs)(o.screenPos),a.zIndex=(new Date).getTime(),new n(o,a,i).calculatePosition(o.videoBound)}}]),n}(Je),on=function(t){Se(n,t);var e=Pe(n);function n(t,r,o){var i;Ee(this,n),De(ke(i=e.call(this,t,n.typeDef(r),"blur",o)),"calculatePosition",(function(t){return t&&(i.info.x=(t.width-Ve)/2,i.info.y=(t.height-Ue)/2,!i.info.scale&&i.info.screenPos&&(i.info.scale=t.width/i.info.screenPos.width),i.info.left=i.info.x,i.info.top=i.info.y,i.info.right=i.info.x+Ve,i.info.bottom=i.info.y+Ue,i.info.width=Ve,i.info.height=Ue,i.info.range={width:t.width,height:t.height},i.readOnly=!1),ke(i)})),De(ke(i),"ctInBar",(function(){return(0,k.jsx)(J.Z,{className:"ct-symbol",style:{color:i.color},component:pe.Z})})),De(ke(i),"code4Paint",(function(t,e){var n={width:i.info.width,height:i.info.height,key:i.md5,readonly:t||i.readOnly,show:i.canBeShown(e.currentTime),ref:i.referSimulatorItem,selectedBlur:e.selectedBlur,current:e.selectedMd5,md5:i.md5,scale:e.scale,retrieveCanvas:e.retrieveCanvas,onSelect:e.onSelect,onDragStart:e.onDragStart,onDragEnd:function(t,n,r,o){o&&(i.formatChanged=!0),e.onDragEnd(t,n,r)}};return(0,k.jsx)(Z,we(we({},n),i.info))})),De(ke(i),"handleChangeBlur",(function(t){i.formatChanged=!0,i.options.onUpdate(i.md5,{format:{blur:t}})})),De(ke(i),"code4Property",(function(t){return(0,k.jsx)(oe,{start:i.start,end:i.end,blur:i.info.format.blur,md5:i.md5,ref:i.referForm,timeRangeBySec:i.timeRangeBySec,maxTime:t,handleChangeBlur:i.handleChangeBlur,onChangeEnd:function(t){i.onChangeEnd(t)},onChangeStart:function(t){i.onChangeStart(t)}})}));var a=i.size;return i.displayWidth=a.width,i.displayHeight=a.height,i.posHash="",i.readOnly=!0,i.blurkey=(0,m.OT)([a,i.info.x,i.info.y,i.info.start,i.info.duration,i.info.format.blur]),i}return Ne(n,[{key:"bgColor",get:function(){return this.info.format.color}},{key:"color",get:function(){return"white"}},{key:"refreshUI",value:function(){this.blurkey=(0,m.OT)([this.size,this.info.x,this.info.y,this.info.start,this.info.duration,this.info.format.blur]),this.referForm&&this.referForm.current&&this.referForm.current.refreshUI(this.start,this.end,this.info.format.blur),this.referSimulatorItem&&this.referSimulatorItem.current&&this.referSimulatorItem.current.refreshUI(this.info.format.blur)}},{key:"size",get:function(){return this.info.width&&this.info.height?{width:this.info.width,height:this.info.height}:{width:this.info.right-this.info.left,height:this.info.bottom-this.info.top}}},{key:"shouldUpdateImage",value:function(){return!1}},{key:"shouldbeUpload",value:function(){return this.info.right-this.info.left!=0&&this.info.bottom-this.info.top!=0}}],[{key:"typeDef",value:function(t){if(!t)return{};var e=t.screenPos,n=t.width,r=t.height,o=t.left,i=t.top,a=t.right,c=t.bottom;return e&&("string"==typeof e.width&&(e.width=parseFloat(e.width)),"string"==typeof e.height&&(e.height=parseFloat(e.height))),"string"==typeof a&&(t.right=parseFloat(a)),"string"==typeof c&&(t.bottom=parseFloat(c)),n||(t.width=Math.abs(s.ZP.minus(a,o))),r||(t.height=Math.abs(s.ZP.minus(c,i))),t}},{key:"Create",value:function(t,e,r,o){var i=(0,m.zs)(Xe);return i.md5=e,i.start=s.ZP.round(t,1),i.start>t&&(i.start-=.1),i.format={blur:10,color:Re},i.duration=ze(r),i.start+i.duration>r.videoDuration&&(i.start=r.videoDuration-i.duration),i.screenPos=(0,m.zs)(r.screenPos),i.zIndex=(new Date).getTime(),new n(r,i,o).calculatePosition(r.videoBound)}}]),n}(Je),an=function(t){Se(n,t);var e=Pe(n);function n(t,r,o){var i;Ee(this,n),De(ke(i=e.call(this,t,n.typeDef(r),"image",o)),"trackURLImageSize",(function(t){var e=ke(i);return new Promise((function(n,r){(0,b.Z)({method:"get",url:t,responseType:"blob"}).then((function(t){e.localImageFile=new File([t.data],e.contentImageKey+".png"),e._localImageUrl=URL.createObjectURL(e.localImageFile),(0,m.Ad)(e.localImageFile,(function(t){e.imgSize=(0,m.zs)(t),n(e.imgSize)}))})).catch((function(n){e._localImageUrl=t;var o=document.createElement("IMG");o.onload=function(){e.imgSize={height:o.height,width:o.width}},o.src=t,r(n.message)}))}))})),De(ke(i),"prepareUploadSnapshot",(function(t){var e=ke(i);return new Promise((function(t,n){e._snapshotKey=(0,m.D_)(),e.localImageFile?(0,m.Ad)(e.localImageFile,(function(n,r){var o=document.createElement("canvas"),i=4*e.info.format.shadow;o.width=e.size.width+2*e.info.format.border+2*i,o.height=e.size.height+2*e.info.format.border+2*i;var a=o.getContext("2d",{alpha:!0});a.lineWidth=e.info.format.border,e.info.format.border>0&&(a.strokeStyle=e.info.format.color),a.globalAlpha=e.info.format.alpha,e.info.format.border>0&&a.strokeRect(e.info.format.border/2+i,e.info.format.border/2+i,o.width-e.info.format.border-2*i,o.height-e.info.format.border-2*i),a.shadowColor="rgba(0,0,0,0.4)",i>0?(a.filter="drop-shadow(0px 2px 4px rgba(0,0,0,0.4))",a.shadowBlur=i):(a.shadowBlur=0,a.filter="none"),a.drawImage(r,e.info.format.border+i,e.info.format.border+i,e.size.width,e.size.height),e.info.snapshotType="image/png",o.toBlob((function(n){e._localFile=new File([n],e.snapshotKey+".png"),t(e)}),e.info.snapshotType,.8)})):n("no local file")}))})),De(ke(i),"calculatePosition",(function(t,e){if(t){var n=t.width/e.width,r=t.height/e.height,o=1;(n<1||r<1)&&(o=n<r?n:r);var a=e.width*o,s=e.height*o;i.info.x=(t.width-a)/2,i.info.y=(t.height-s)/2,!i.info.scale&&i.info.screenPos&&(i.info.scale=t.width/i.info.screenPos.width),i.info.left=i.info.x,i.info.top=i.info.y,i.info.right=i.info.x+a,i.info.bottom=i.info.y+s,i.info.width=a,i.info.height=s,i.info.range={width:t.width,height:t.height}}return ke(i)})),De(ke(i),"dataforUpload",(function(){for(var t in i.info)if(i.info.hasOwnProperty(t)){var e=i.info[t];Number(e)===e&&e%1!=0&&(i.info[t]=s.ZP.round(e,1))}var n=0;return i.info.format.shadow>0&&(n=4*i.info.format.shadow),i.info.x=i.info.left-(i.info.format.border+n),i.info.y=i.info.top-(i.info.format.border+n),we(we({},i.info),{},{md5:i.md5})})),De(ke(i),"ctInBar",(function(){return(0,k.jsx)(J.Z,{className:"ct-symbol",style:{color:"#F6F6F6"!=i.bgColor?"white":"red"},component:be})})),De(ke(i),"code4Paint",(function(t,e){var n=ke(i),r={width:i.info.width,height:i.info.height,imageURL:i.displayImageUrl,showPlaceholder:null==i.localImageFile,key:i.md5,readonly:t||null!=document.fullscreenElement,show:i.canBeShown(e.currentTime),ref:i.referSimulatorItem,current:e.selectedMd5,selectedBlur:e.selectedBlur,md5:i.md5,imageSize:i.imgSize,scale:e.scale,retrieveCanvas:e.retrieveCanvas,onSelect:e.onSelect,onDragStart:e.onDragStart,onDragEnd:function(t,r,o,i){i&&(n.formatChanged=!0),e.onDragEnd(t,r,o)}};return(0,k.jsx)(R,we(we({},r),i.info))})),De(ke(i),"handleChangeAlpha",(function(t){i.formatChanged=!0,i.options.onUpdate(i.md5,{format:{alpha:t}})})),De(ke(i),"handleChangeShadow",(function(t){i.formatChanged=!0,i.options.onUpdate(i.md5,{format:{shadow:t}})})),De(ke(i),"handleChangeBorder",(function(t){i.formatChanged=!0,i.options.onUpdate(i.md5,{format:{border:t}})})),De(ke(i),"handleChangeColor",(function(t){i.formatChanged=!0,i.options.onUpdate(i.md5,{format:{color:t}})})),De(ke(i),"code4Property",(function(t){return(0,k.jsx)(ae,we(we({start:i.start,end:i.end,md5:i.md5,ref:i.referForm,timeRangeBySec:i.timeRangeBySec,maxTime:t},i.info.format),{},{handleChangeColor:i.handleChangeColor,handleChangeBorder:i.handleChangeBorder,handleChangeShadow:i.handleChangeShadow,handleChangeAlpha:i.handleChangeAlpha,onChangeEnd:function(t){i.onChangeEnd(t)},onChangeStart:function(t){i.onChangeStart(t)}}))})),i.imgSize=null,i._localImageUrl=null,i._localCtImageFile=null,r.tempImageSize&&(i.imgSize=(0,m.zs)(r.tempImageSize),delete i.info.tempImageSize);var a=i.size;return i.displayWidth=a.width,i.displayHeight=a.height,i.posHash="",r.tempImageSaveObj?(i.imageNeedSave=r.tempImageSaveObj.value,delete i.info.tempImageSaveObj):i.imageNeedSave=!1,i}return Ne(n,[{key:"displayImageUrl",get:function(){return this._localImageUrl}},{key:"contentImageServerKey",get:function(){return"image/png"==this.contentType?this.contentImageKey+".png":this.contentImageKey+".jpg"}},{key:"contentType",get:function(){return this.info.contentType},set:function(t){this.info.contentType=t,this.contentImageKey=(0,m.D_)()}},{key:"localImageFile",get:function(){return this._localCtImageFile},set:function(t){this._localCtImageFile=t}},{key:"contentImageKey",get:function(){return this.info.contentImageKey},set:function(t){this.info.contentImageKey=t}},{key:"bgColor",get:function(){return this.info.format.color}},{key:"refreshUI",value:function(){this.referForm&&this.referForm.current&&this.referForm.current.refreshUI(this.start,this.end),this.referSimulatorItem&&this.referSimulatorItem.current&&this.referSimulatorItem.current.refreshUI(this.info.format.alpha,this.info.format.border,this.info.format.color,this.info.format.shadow)}},{key:"size",get:function(){return this.info.width&&this.info.height?{width:this.info.width,height:this.info.height}:{width:this.info.right-this.info.left,height:this.info.bottom-this.info.top}}},{key:"shouldbeUpload",value:function(){return this.info.right-this.info.left!=0&&this.info.bottom-this.info.top!=0}},{key:"getJSONInfo",value:function(){return JSON.stringify(we({tempImageSize:this.imgSize,tempImageSaveObj:{value:this.imageNeedSave}},this.info))}},{key:"refreshInfo",value:function(){return we(we({},this.info),{},{imageSize:this.imgSize,isLittleScreenMode:this.env.isLittleScreenMode})}}],[{key:"typeDef",value:function(t){if(!t)return{};var e=t.screenPos,n=t.width,r=t.height,o=t.left,i=t.top,a=t.right,c=t.bottom;return e&&("string"==typeof e.width&&(e.width=parseFloat(e.width)),"string"==typeof e.height&&(e.height=parseFloat(e.height))),"string"==typeof a&&(t.right=parseFloat(a)),"string"==typeof c&&(t.bottom=parseFloat(c)),n||(t.width=Math.abs(s.ZP.minus(a,o))),r||(t.height=Math.abs(s.ZP.minus(c,i))),t}},{key:"Create",value:function(t,e,r,o,i,a){var c=(0,m.zs)(Xe);c.md5=o,c.format=qe,c.start=s.ZP.round(r,1),c.start>r&&(c.start=s.ZP.minus(c.start,.1)),c.contentType="image/png",c.duration=ze(i),c.start+c.duration>i.videoDuration&&(c.start=i.videoDuration-c.duration),c.screenPos=(0,m.zs)(i.screenPos),c.zIndex=(new Date).getTime();var l=new n(i,c,a);return t&&(l.localImageFile=t,l.contentType=t.type,l._localImageUrl=URL.createObjectURL(t),l.imgSize=e,l.calculatePosition(i.videoBound,e),l.imageNeedSave=!0),l}}]),n}(Je),sn=function(t){Se(n,t);var e=Pe(n);function n(t,r,o){var i;return Ee(this,n),De(ke(i=e.call(this,t,r,"cut",o)),"ctInBar",(function(){return(0,k.jsx)(J.Z,{className:"ct-symbol",style:{color:i.color},component:ce.Z})})),De(ke(i),"code4Property",(function(t){return(0,k.jsx)(re,{start:i.start,end:i.end,md5:i.md5,ref:i.referForm,timeRangeBySec:i.timeRangeBySec,maxTime:t,onChangeEnd:function(t){i.onChangeEnd(t)},onChangeStart:function(t){i.onChangeStart(t)}})})),i}return Ne(n,[{key:"bgColor",get:function(){return"transparent"}},{key:"refreshUI",value:function(){this.referForm&&this.referForm.current&&this.referForm.current.refreshUI(this.start,this.end)}}],[{key:"Create",value:function(t,e,r,o){var i=(0,m.zs)(Ge);return i.md5=e,i.duration=ze(r),i.start=s.ZP.round(t,1),i.start>t&&(i.start-=.1),new n(r,i,o)}}]),n}(Ye);function cn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ln(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ln(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){throw t})),f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){s=!0,i=t})),f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ln(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function un(t){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(t)}function fn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mn(r.key),r)}}function hn(t,e,n){return e&&dn(t.prototype,e),n&&dn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pn(t,e,n){return(e=mn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mn(t){var e=function(t,e){if("object"!==un(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===un(e)?e:String(e)}var yn=i.Z.confirm,gn=function(t,e,n){var r=s.ZP.round(n/e,4),o=[0],i=[];return t.length>1?(o=o.concat(t.map((function(t){return s.ZP.round(s.ZP.times(t.end,r),4)}))),(i=t.map((function(t){return s.ZP.round(s.ZP.times(t.start,r),4)}))).push(s.ZP.round(s.ZP.times(e,r),4)),i.shift()):i.push(s.ZP.round(s.ZP.times(e,r),4)),t.map((function(t,e){var n={left:o[e],right:i[e]+10};return t.timeRangeBySec={min:s.ZP.round(s.ZP.divide(n.left,r),1),max:s.ZP.round(s.ZP.divide(n.right-10,r),1)},{key:t.md5,md5:t.md5,type:t.type,content:t.ctInBar(),color:t.color,ref:t.onReferBar,borderColor:t.borderColor,bgColor:t.bgColor,left:s.ZP.round(s.ZP.times(t.start,r),4),width:s.ZP.round(s.ZP.times(t.duration,r)+10,4),timeRange:n}}))},vn=function t(e,n,r){if(e&&e.length>n+1){var o=e[n+1];if(o)return r<o.start?r:t(e,n+1,o.start+o.duration)}return r},bn=function t(e,n,r,o){if(e&&n-1>=0){var i=e[n-1];if(i){var a=i.start+i.duration;if(a>=o)return t(e,n-1,r,i.start);if(a>=o-r)return a}}return o-r},xn=function(){function t(e){var n=this;fn(this,t),pn(this,"annCanBeAdd",(function(t){if(!n.marks)return!1;var e=10*s.ZP.round(t.start,1),r=10*s.ZP.round(t.end,1)+1;return 0==n.marks.subarray(e,r).reduce((function(t,e){return t+e}))})),pn(this,"isEmpty",(function(){return 0===Object.keys(n.data).length})),pn(this,"isAnnInTrack",(function(t){return null!=n.data[t]})),pn(this,"checkValidTime",(function(t,e){if(n.marks){var r=10*s.ZP.round(t,1),o=10*s.ZP.round(t+e,1);if(0===n.marks.subarray(r,o).reduce((function(t,e){return t+e}))){var i=n.marks.indexOf(1,o);i=i<0?s.ZP.round((n.marks.length-1)/10,1):s.ZP.round((i-1)/10,1);for(var a=0,c=r;c>=0;c--)if(1==n.marks[c]){a=s.ZP.round(c/10,1);break}return{start:s.ZP.round(r/10,1),duration:e,timeRange:{left:a,right:i}}}var l=n.marks.join(""),u=new Uint8Array(Math.floor(10*e)).join(""),f=r,d=r,h=n.marks.length-1;if(1==n.marks[r]){if(-1===(f=l.indexOf(u,r)))return;d=f,-1===(h=n.marks.indexOf(1,f))&&(h=n.marks.length-1)}else{if(h=l.indexOf("1",r),-1===(f=l.lastIndexOf(u,h)))return;-1===(d=l.lastIndexOf("1",f))&&(d=0)}return{start:s.ZP.round(f/10,1),duration:e,timeRange:{left:s.ZP.round(d/10,1),right:s.ZP.round(h/10,1)}}}})),pn(this,"addAnn",(function(t){if(n.marks&&t&&t.md5){n.data[t.md5]=t;var e=10*s.ZP.round(t.start,1),r=10*s.ZP.round(t.end,1);n.marks.fill(1,e,r)}})),pn(this,"dataInfo",(function(){return Object.values(n.data).map((function(t){return t&&t.refreshInfo?t.refreshInfo():{}}))})),pn(this,"addAnns",(function(t){var e=t.length,r=n;return t.forEach((function(t,e){r.addAnn(t)})),Object.keys(n.data).length>=e})),pn(this,"annsForUpload",(function(t){return Object.keys(n.data).filter((function(e){return t.includes(e)}))})),pn(this,"updateTrack",(function(){for(var t in n.marks=new Uint8Array(s.ZP.round(10*n.duration,0)),n.data){var e=n.data[t];if(e){var r=10*s.ZP.round(e.start,1),o=10*s.ZP.round(e.end,1);n.marks.fill(1,r,o)}}})),pn(this,"removeAnn",(function(t){var e=n.data[t];if(e){if(n.marks){var r=10*s.ZP.round(e.start,1),o=10*s.ZP.round(e.end,1);n.marks.fill(0,r,o)}delete n.data[t]}})),this._duration=e,e&&(this.marks=new Uint8Array(s.ZP.round(10*e,0))),this.data={}}return hn(t,[{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t,this.marks=new Uint8Array(s.ZP.round(10*t,0))}}]),t}(),wn=function(){function t(e){var n=this;fn(this,t),pn(this,"updateVideo",(function(t){n.videoID=t,n.resetBaseVersion("")})),pn(this,"save",(function(t,e,r,o){var i=e.tracks,l=e.anns,u=e.deleteImages,f=e.cuts,d=[],h=[],p=[],y=n.baseVersion,g=n,v=!1;if(f.length>0){var b=0,x=function(t,e){if(!e||e.length<=0)return[];var n=e.sort((function(t,e){return t.sortStart-e.sortStart})).map((function(t){return[t.start,t.start+t.duration]})),r=[],o=0,i=n.length;return n.every((function(e,n){return o<e[0]&&r.push([o,e[0]]),!((o=o>e[1]?o:e[1])>=t||(i-1==n&&r.push([o,t]),0))})),r.filter((function(t){return s.ZP.minus(t[1],t[0])>.1}))}(t,f);if(x&&x.length>0&&(b=x.map((function(t){return t[1]-t[0]})).reduce((function(t,e){return t+e}))),b<1)return void yn({title:"Do you want to delete this item?",maskStyle:{zIndex:10500},zIndex:10500,icon:(0,k.jsx)(a.Z,{}),content:"Cutting an entire video is not allowed. If you want to delete the video, go back to the video details page.",onOk:function(){o&&o(!1)},onCancel:function(){o&&o(!1)}});v=!0,y=(0,m.D_)(),d.push((0,c.IQ2)(n.videoID,"cut",n.baseVersion,y,x.map((function(t){return{start:s.ZP.round(t[0],1),duration:s.ZP.round(t[1]-t[0],1)}})),[])),p=function(t,e,n){var r=[];return e.every((function(e,n){var o=e.info,i=o.start,a=o.duration;if(e.shouldbeUpload()){var c=i+a,l=0,u=0,f=t.length;t.every((function(t,e){if(i<t[0]){if((u<=i||0==e)&&(i=l),c<t[0])return(u<=c||0==e)&&(c=l),!1;if(c>=t[0]&&c<t[1])return c=l+(c-t[0]),!1;if(e===f-1)return c=l+(t[1]-t[0]),!1}else if(i>=t[0]&&i<t[1]){if(i=l+(i-t[0]),c<t[1])return c=l+(c-t[0]),!1;e===f-1&&(c=l+(t[1]-t[0]))}else e===f-1&&(i=l,c=l);return l+=t[1]-t[0],u=t[1],!0})),c-i>0&&(e.start=s.ZP.round(i,1),e.duration=s.ZP.round(s.ZP.minus(c,i),1),r.push(e))}return!0})),r}(x,l,n.env),h=p.filter((function(t){return t.shouldUpdateImage()})).map((function(t){return t.prepareUploadSnapshot(g.env)}))}else h=(p=l.filter((function(t){return t.shouldbeUpload()}))).filter((function(t){return t.shouldUpdateImage()})).map((function(t){return t.prepareUploadSnapshot(g.env)}));var w=function(t){t.length>0?Promise.all(t).then((function(t){p.forEach((function(t,e){t.updateSnapshotKey()})),g.uploadAnnotaions(p,i,u,y,r,v,o)})).catch((function(t){o&&o(!1,t)})):g.uploadAnnotaions(p,i,u,y,r,v,o)},S=p.filter((function(t){return"image"==t.type}));h&&h.length>0?Promise.all(h).then((function(t){t.length>0?n.uploadActionImages(t,S,(function(t,e){t?(e&&(d=d.concat(e)),w(d)):o&&o(!1,new Error("Network error, please try again later."))})):w(d)})).catch((function(t){o&&o(!1,t)})):S.length>0?n.uploadActionImages([],S,(function(t,e){t?(e&&(d=d.concat(e)),w(d)):o&&o(!1,new Error("Network error, please try again later."))})):w(d)})),pn(this,"uploadAnnotaions",(function(t,e,r,i,a,s,l){var u=t.filter((function(t){return"blur"!=t.type})).map((function(t){return t.dataforUpload()})),f=Object.values(t.filter((function(t){return"blur"==t.type})).reduce((function(t,e){return t[e.blurkey]=e.dataforUpload(),t}),{}));if(t.length>0||n.annsOriginalHash!=(0,m.OT)(t)){var d=[];if(f&&f.length>0){var h=(0,m.D_)();d.push((0,c.IQ2)(n.videoID,"blur",i,h,f,[])),i=h,!0}if(a){var p=u.map((function(t){return t.md5}));e=e.map((function(t){return t.annsForUpload(p)}));var y=(0,m.D_)();d.push((0,c.IQ2)(n.videoID,"annotation",i,y,u,e))}r&&r.length>0&&d.push((0,c.iQz)(n.videoID,r)),d.length>0?Promise.all(d).then((function(){l&&l(!0)})).catch((function(t){o.ZP.error("Something went wrong. Please try again later.",3),l&&l(!1,t)})):l&&l(!0)}else l&&l(!0)})),pn(this,"loadImageAnnotationURL",(function(t,e,r){!t||t.length<=0?r&&r(!1):(0,c.jTH)(n.videoID,t,e).then((function(t){r&&r(!0,t)})).catch((function(t){o.ZP.error("Image load failed"),r&&r(!1)}))})),pn(this,"uploadActionImages",(function(t,e,r){var o={},i=t.filter((function(t){return t.shouldUpdateImage()&&t.localSnapshotFile&&t.snapshotKey&&t.snapshotKey.length>0})).map((function(t){var e=t.snapshotKey+".png";return"image/jpeg"==t.snapshotType&&(e=t.snapshotKey+".jpg"),o[e]=t,e})),a=e.filter((function(t){return t.imageNeedSave})).map((function(t){var e=t.contentImageServerKey;return o[e]=t,e}));i.length<=0&&a.length<=0?r&&r(!0):(0,c.ajT)(n.videoID,i.concat(a)).then((function(t){var e=t.data;if(e){var n=[],s="https://awevideo.s3.amazonaws.com/";for(var l in window.location&&window.location.host&&window.location.host.indexOf("aws.cn")&&(s="https://awevideotest.s3.amazonaws.com/"),e)if(e.hasOwnProperty(l)){var u=e[l],f=o[l],d=null,h="";i.includes(l)&&(l.indexOf(".")>=0&&(l=l.split(".")[0]),d=f.localSnapshotFile,h=f.snapshotType),a.includes(l)&&(d=f.localImageFile,h=f.contentType),d&&n.push((0,c.p7n)({AWSAccessKeyId:"AKIAJSCJQ2NM3XLFPVKA",acl:"private",key:u.s3key,"Content-Type":h,policy:u.policy,signature:u.signature,file:d},(function(){}),u.bucket?"https://".concat(u.bucket,".s3.amazonaws.com/"):s))}n.length>0?r&&r(!0,n):r&&r(!1)}else r&&r(!1)})).catch((function(t){r&&r(!1,t)}))})),this.updateVideo(e)}return hn(t,[{key:"canRequestNetwork",value:function(){return!this.annotationLoaded&&!this.annotationLoading&&this.networkFailed<t.NETWORK_MAX_REQ}},{key:"resetBaseVersion",value:function(t){this.baseVersion=t,this.annotationLoaded=!1,this.annotationLoading=!1,this.networkFailed=0,this.currentVersion=""}},{key:"loadAnnotations",value:function(t,e,n){if(!this.videoID||this.videoID.length<=0)o.ZP.warning("Data Error: Invalid videoID, can't load annotations.",5);else{this.annotationLoading=!0;var r=this;(0,c.n6q)(this.videoID,this.baseVersion,t).then((function(t){r.annotationLoaded=!0,r.annotationLoading=!1;var e=t.actions;if(e&&e.length>0){var o=e[0];if(o){r.currentVersion=o.version;var i=JSON.parse(o.data);if(i)return void(n&&n(!0,i,"annotation"))}}n&&n(!0,{},"annotation")})).catch((function(t){r.annotationLoading=!1,r.networkFailed++,n&&n(!1,t)})),e&&(0,c.n6q)(this.videoID,this.baseVersion,t,"blur").then((function(t){var e=t.actions;if(e&&e.length>0){var r=e[0];if(r&&r.data&&r.data.length>2){var o=JSON.parse(r.data);if(o)return void(n&&n(!0,o,"blur"))}}n&&n(!0,{},"blur")}))}}}]),t}();pn(wn,"NETWORK_MAX_REQ",3);var Sn=hn((function t(e,n){var i=this;fn(this,t),pn(this,"reset",(function(){if(i.annotations&&Object.values(i.annotations).length>0)for(var t in i.annotations)i.annotations.hasOwnProperty(t)&&delete i.annotations[t];if(i.annotations={},i.cuts&&Object.values(i.cuts).length>0)for(var e in i.cuts)i.cuts.hasOwnProperty(e)&&delete i.cuts[e];i.cuts={},i.env={},i.currentVersion="",i.deleteImages={},i.imagesNeedFetch={},i.annsHash="",i.originAnnHash="",i.cutsHash="",i.unredoManager&&delete i.unredoManager,i.unredoManager=new p,i.annotationParseData=null,i.annotationBlurParseData=null,i.tracks=[],i.trackedAnnHash="",i.respSortedCuts=[]})),pn(this,"tracksHashSource",(function(t){return i.readonly||t?Object.values(i.annotations).map((function(t){return t.info})):i.tracks.map((function(t){return t.dataInfo()}))})),pn(this,"cutsHashSource",(function(){return Object.values(i.cuts).map((function(t){return t.info}))})),pn(this,"updateEnv",(function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];"object"===un(n)?i.env[e]=(0,m.zs)(n):i.env[e]=n,"videoDuration"==e&&t.videoDuration>0&&(i.annotationParseData||i.annotationBlurParseData?(i.parseData(i.annotationParseData),i.parseData(i.annotationBlurParseData),i.annotationParseData=null,i.annotationBlurParseData=null,i.annotationImageUrls&&i.updateImageUrl(i.annotationImageUrls)):(!i.tracks||i.tracks.length<=0)&&i.transferAnnsToTrack())}})),pn(this,"updateImageUrl",(function(t){if(i.annotationParseData)i.annotationImageUrls=t;else{var e=Object.values(i.annotations).map((function(e){var n=t[e.contentImageServerKey];return n?e.trackURLImageSize(n):{}}));i.annotationImageUrls=null;var n=i;Promise.all(e).then((function(t){n.annsHash=(0,m.OT)(n.tracksHashSource()),n.callbacks.updateAnns&&n.callbacks.updateAnns(n.annsHash,!1)})).catch((function(t){}))}})),pn(this,"getDatasToSave",(function(){return{tracks:i.tracks,anns:i.buildAnnsForSimulator(),deleteImages:Object.keys(i.deleteImages),cuts:Object.values(i.cuts)}})),pn(this,"parseData",(function(t,e){if(i.readonly||i.env.videoDuration&&!(i.env.videoDuration<=0)){if(t&&t.hasOwnProperty("actions")){var n=i.transferLocal(t.actions);if(i.readonly)i.annsHash=(0,m.OT)({random:Math.random()}),i.originAnnHash=i.annsHash;else if("annotation"==e)t.hasOwnProperty("tracks")&&t.tracks?i.transferLocalWithTrack(t.tracks):i.transferAnnsToTrack();else{var r=i;n.forEach((function(t,e){r.addAnnotaionToTrack(t)})),i.annsHash=(0,m.OT)(i.tracksHashSource(!0)),i.originAnnHash=i.annsHash}}i.callbacks.updateAnns&&i.callbacks.updateAnns(i.annsHash,!1)}else"annotation"==e?i.annotationParseData=t:i.annotationBlurParseData=t})),pn(this,"transferLocalWithTrack",(function(t){var e=i.env.videoDuration;i.tracks=[];var n=i;t.every((function(t,r){var o=new xn(e);return n.tracks.push(o),o.addAnns(t.map((function(t){return n.annotations[t]})))}))?(n.annsHash=(0,m.OT)(n.tracksHashSource(!0)),i.originAnnHash=i.annsHash):i.transferAnnsToTrack()})),pn(this,"transferLocal",(function(t){if(!t||t.length<=0)return[];var e=i;try{return i.getValidList(t).map((function(t){var n,r=t.type;return r||(t.link&&t.link.length>0?r="link":(!t.content||t.content.length<=0)&&(r="shape")),"shape"==r?(n=new rn(e.env,t,{onUpdate:e.onAnnActionChange}),e.annotations[n.md5]=n):"image"==r?(n=new an(e.env,t,{onUpdate:e.onAnnActionChange}),e.annotations[n.md5]=n):"blur"==r?(n=new on(e.env,t,{onUpdate:e.onAnnActionChange}),e.annotations[n.md5]=n):(n=new nn(e.env,t,r,{onUpdate:e.onAnnActionChange}),e.annotations[n.md5]=n),n}))}catch(t){}return[]})),pn(this,"refreshAnnScreenPos",(function(t,e){for(var n in i.annotations)if(i.annotations.hasOwnProperty(n)){var r=i.annotations[n];r&&r.updateInfo&&r.updateInfo({screenPos:t,range:e})}i.annsHash=(0,m.OT)(i.tracksHashSource())})),pn(this,"onAnnActionChange",(function(t,e){i.updateAction(t,e)})),pn(this,"addAnnotaionToTrack",(function(t){if(t){var e=i.tracks.filter((function(e){return e.annCanBeAdd(t)}));if(e&&e.length>0)e[0].addAnn(t);else{var n=new xn(i.env.videoDuration);i.tracks.push(n),n.addAnn(t)}}})),pn(this,"updateTrackForAnnotation",(function(t){var e=i.tracks.filter((function(e){return e.isAnnInTrack(t)}));e&&e.length>0&&e[0].updateTrack()})),pn(this,"createAction",(function(t,e,n){var r=(0,m.D_)(),a={};if("cut"==e){var s=Object.values(i.cuts).sort((function(t,e){return t.sortStart-e.sortStart})),c=function(t,e,n,r){var o=r.filter((function(e){return e.start<=t&&e.start+e.duration>=t}));if(o.length>0){var i=o[0],a=r.indexOf(i);(t=vn(r,a,i.start+i.duration))>=n&&(t=a>0?bn(r,a,e,i.start):i.start-e)}return t<0&&(t=0),t}(t,ze(i.env),i.env.videoDuration,s);i.cuts[r]=sn.Create(c,r,i.env,{onUpdate:i.onAnnActionChange}),a=i.cuts[r];var l=t!=c,u=(s=Object.values(i.cuts).sort((function(t,e){var n=t.sortStart-e.sortStart;return 0!=n?n:e.date-t.date}))).indexOf(a);if(s.length>u+1){var f=s[u+1].start-a.start;a.duration>f&&(a.duration=f)}else if(a.end>i.env.videoDuration)if(1==a.duration){var d=i.env.videoDuration-1;d<0?(a.start=0,a.duration=i.env.videoDuration):l&&a.start>d?a.duration=i.env.videoDuration-a.start:a.start=d}else a.duration=i.env.videoDuration-a.start;if(a.duration<=0||1==a.duration&&u>0&&a.end>=i.env.videoDuration&&a.start<s[u-1].end)return delete i.cuts[r],o.ZP.warning("Something went wrong. The video is too short.",3),"";i.cutsHash=(0,m.OT)(i.cutsHashSource())}else"text"==e||"link"==e?(i.annotations[r]=nn.Create(t,r,e,i.env,{onUpdate:i.onAnnActionChange}),setTimeout((function(){a.focus()}),700)):i.annotations[r]="image"==e?an.Create(n.file,n.size,t,r,i.env,{onUpdate:i.onAnnActionChange}):"blur"==e?on.Create(t,r,i.env,{onUpdate:i.onAnnActionChange}):rn.Create(n.cmd,t,r,i.env,{onUpdate:i.onAnnActionChange}),a=i.annotations[r],i.addAnnotaionToTrack(a),i.annsHash=(0,m.OT)(i.tracksHashSource());return i.unredoManager.doAddNewAction(p.ACTION_TYPE_ADD,r,a.getJSONInfo()),"cut"==e?i.callbacks.updateCuts&&i.callbacks.updateCuts(i.cutsHash,!0,r):i.callbacks.updateAnns&&i.callbacks.updateAnns(i.annsHash,!0,r),r})),pn(this,"updateAction",(function(t,e){var n=i.cuts[t],r="";if(n?r="cut":(n=i.annotations[t],r="annotation"),n){var o=n.getJSONInfo(),a=n.start;n.updateInfo(e),(e.start||e.duration)&&i.callbacks.updateVideoTime&&(e.start&&e.start!=a?i.callbacks.updateVideoTime(e.start):i.callbacks.updateVideoTime(n.end)),i.updateTrackForAnnotation(n.md5),i.unredoManager.doAddNewAction(p.ACTION_TYPE_UPDATE,t,n.getJSONInfo(),o),"cut"==r?(i.cutsHash=(0,m.OT)(i.cutsHashSource()),i.callbacks.updateCuts&&i.callbacks.updateCuts(i.cutsHash,!0)):(i.annsHash=(0,m.OT)(i.tracksHashSource()),i.callbacks.updateAnns&&i.callbacks.updateAnns(i.annsHash,!0))}})),pn(this,"deleteAction",(function(t,e){var n,r=i.cuts[t];r?(n="cut",delete i.cuts[t]):(r=i.annotations[t],i.tracks.forEach((function(e,n){e.removeAnn(t)})),n="annotation",delete i.annotations[t]),r?(r.unmount(),i.unredoManager.doAddNewAction(p.ACTION_TYPE_DELETE,t,r.getJSONInfo()),i.clearUnusedTrack(),"image"==r.type&&(i.deleteImages[r.contentImageServerKey]=r.localImageFile),"cut"==n?(i.cutsHash=(0,m.OT)(i.cutsHashSource()),i.callbacks.updateCuts&&i.callbacks.updateCuts(i.cutsHash,!0,"",e)):(i.annsHash=(0,m.OT)(i.tracksHashSource()),i.callbacks.updateAnns&&i.callbacks.updateAnns(i.annsHash,!0,"",e))):e&&e(!1)})),pn(this,"createActionWithInfo",(function(t,e){var n=t.md5;if("cut"==t.type)i.cuts[n]=new sn(i.env,t,e);else{if("text"==t.type||"link"==t.type)i.annotations[n]=new nn(i.env,t,t.type,e);else if("image"==t.type){var r=new an(i.env,t,e);if("image"==r.type){var o=i.deleteImages[r.contentImageServerKey];null!=o&&(r.localImageFile=o,r._localImageUrl=URL.createObjectURL(o)),delete i.deleteImages[r.contentImageServerKey]}i.annotations[n]=r}else"blur"==t.type?i.annotations[n]=new on(i.env,t,e):i.annotations[n]=new rn(i.env,t,e);var a=i.annotations[n];i.addAnnotaionToTrack(a)}})),pn(this,"doUndo",(function(t){var e=i;i.unredoManager.doUndo((function(n){if(n){var r=JSON.parse(n.data),o=n.md5,a=-1;if(n.actionType==p.ACTION_TYPE_ADD)"cut"==r.type?delete e.cuts[o]:(e.tracks.forEach((function(t,e){t.removeAnn(o)})),"image"==r.type&&(i.deleteImages[r.contentImageServerKey]=e.annotations[o].localImageFile),delete e.annotations[o],e.clearUnusedTrack()),o="";else if(n.actionType==p.ACTION_TYPE_DELETE)e.createActionWithInfo(r,{onUpdate:e.onAnnActionChange}),a=r.start+.1;else{var s=JSON.parse(n.prevData),c=i.getTrackIndexWithAnn(o);e.onStartDragFromTrack(o,c);var l=null;"cut"==r.type?((l=e.cuts[o]).info={},l.updateInfo(s)):((l=e.annotations[o]).info={},l.updateInfo(s),e.addAnnotaionToTrack(l)),a=s.start+.1}"cut"==r.type?e.cutsHash=(0,m.OT)(e.cutsHashSource()):e.annsHash=(0,m.OT)(e.tracksHashSource()),t&&t(o,a,"cut"==r.type?e.cutsHash:"","cut"!=r.type?e.annsHash:"")}}))})),pn(this,"doRedo",(function(t){var e=i;i.unredoManager.doRedo((function(n){if(n){var r=JSON.parse(n.data),o=n.md5,a=-1;if(n.actionType==p.ACTION_TYPE_ADD)e.createActionWithInfo(r,{onUpdate:e.onAnnActionChange}),a=r.start+.1;else if(n.actionType==p.ACTION_TYPE_DELETE)"cut"==r.type?delete e.cuts[o]:(e.tracks.forEach((function(t,e){t.removeAnn(o)})),delete e.annotations[o],e.clearUnusedTrack()),o="";else{JSON.parse(n.prevData);var s=i.getTrackIndexWithAnn(o);e.onStartDragFromTrack(o,s),"cut"==r.type?(e.cuts[o].info={},e.cuts[o].updateInfo(r)):(e.annotations[o].info={},e.annotations[o].updateInfo(r),e.addAnnotaionToTrack(e.annotations[o])),a=r.start+.1}"cut"==r.type?e.cutsHash=(0,m.OT)(e.cutsHashSource()):e.annsHash=(0,m.OT)(e.tracksHashSource()),t&&t(o,a,"cut"==r.type?e.cutsHash:"","cut"!=r.type?e.annsHash:"")}}))})),pn(this,"repaintAnnotations",(function(t,e){for(var n in i.annotations)if(i.annotations.hasOwnProperty(n)){var r=i.annotations[n];r.repaint&&r.repaint(t,e==n)}})),pn(this,"getCutsForSimulator",(function(){return Object.values(i.cuts)})),pn(this,"buildAnnsForSimulator",(function(){return Object.values(i.annotations).sort((function(t,e){return t.zIndex-e.zIndex}))})),pn(this,"getValidList",(function(t){var e=i.env.videoDuration;return!e||e<=0?i.readonly?t.sort((function(t,e){return t.start-e.start})):[]:t.filter((function(t){return t.start<e})).sort((function(t,e){return t.start-e.start})).map((function(t){return t.end>e&&(t.duration=s.ZP.minus(e,t.start)),t}))})),pn(this,"onStartDragFromTrack",(function(t,e){if(!(e<0||!i.tracks||e>=i.tracks.length)){var n=i.tracks[e];n&&n.removeAnn(t)}})),pn(this,"clearUnusedTrack",(function(){i.tracks=i.tracks.filter((function(t){return!t.isEmpty()}))})),pn(this,"moveAnnToTrack",(function(t,e){var n=i.tracks[t];if(n){if(n.addAnn(i.annotations[e]),i.annsHash=(0,m.OT)(i.tracksHashSource()),i.trackedAnnHash=i.annHash,i.callbacks.updateAnns){var r=i;setTimeout((function(){r.callbacks.updateAnns(r.annsHash,!0)}),100)}}else i.addTrackWithAnn(t,e)})),pn(this,"addTrackWithAnn",(function(t,e){var n=new xn(i.env.videoDuration);if(i.tracks.splice(t,0,n),n.addAnn(i.annotations[e]),i.annsHash=(0,m.OT)(i.tracksHashSource()),i.trackedAnnHash=i.annHash,i.callbacks.updateAnns){var r=i;setTimeout((function(){r.callbacks.updateAnns(r.annsHash,!0)}),100)}})),pn(this,"getTrackIndexWithAnn",(function(t){return i.cuts[t]?-1:i.tracks.findIndex((function(e){return e.isAnnInTrack(t)}))})),pn(this,"getValidTrackTime",(function(t,e,n){var r=i.env.processbarLength,o=i.env.videoDuration;if(!r||r<=0||!o||o<=0)return null;var a=i.tracks[e];if(!a)return null;var c=i.annotations[t];if(!c)return null;var l=s.ZP.round(r/o,4),u=s.ZP.round(s.ZP.divide(n,l),4),f=a.checkValidTime(u,c.duration);return f?{lenPerSec:l,left:s.ZP.round(s.ZP.times(f.start,l),1),width:s.ZP.round(s.ZP.times(f.duration,l),1),timeRange:{left:s.ZP.round(s.ZP.times(f.timeRange.left,l),1),right:s.ZP.round(s.ZP.times(f.timeRange.right,l),1)}}:null})),pn(this,"transferAnnsToTrack",(function(){var t=i.env.videoDuration;if(!t||t<=0)return[];var e=Object.values(i.annotations);if(e.length<=0)return[];for(var n=[new xn(t)],r=0,a=e;r<a.length;r++){var s,c=a[r],l=!1,u=cn(n);try{for(u.s();!(s=u.n()).done;){var f=s.value;if(f.annCanBeAdd(c)){f.addAnn(c),l=!0;break}}}catch(t){u.e(t)}finally{u.f()}if(!l){var d=new xn(t);n.push(d),d.addAnn(c),n.length>20&&o.ZP.warn({content:"Too many tracks may course the page slow.",duration:5})}}i.tracks=n,i.annsHash=(0,m.OT)(i.tracksHashSource(!0)),i.trackedAnnHash=(0,m.OT)(i.tracksHashSource(!1)),i.originAnnHash=i.annsHash})),pn(this,"buildAnnsForBar",(function(){var t=i.env.processbarLength,e=i.env.videoDuration;if(!t||t<=0||!e||e<=0)return[];return i.tracks.map((function(n){return gn(Object.values(n.data).sort((function(t,e){return t.sortStart-e.sortStart})),e,t)}))})),pn(this,"buildCutsForBar",(function(){var t=i.env.processbarLength,e=i.env.videoDuration;if(!t||t<=0||!e||e<=0)return[];var n=Object.values(i.cuts);return(i.respSortedCuts.length<=0||i.respSortedCuts.length!=n.length)&&(i.respSortedCuts=n.sort((function(t,e){return t.sortStart-e.sortStart}))),gn(i.respSortedCuts,e,t)})),pn(this,"getSelectedPropertyReset",(function(t){if(t&&"string"==typeof t&&t.length>0){var e=i.annotations[t];if(e)return e.reset(i.env.videoDuration)}})),pn(this,"getSelectedCanReset",(function(t){if(t&&"string"==typeof t&&t.length>0){var e=i.annotations[t];if(e)return e.canReset()}return!1})),pn(this,"getSelectedPropertyForm",(function(t){if(t&&"string"==typeof t&&t.length>0){var e=i.cuts[t];if(e||(e=i.annotations[t]),e)return e.code4Property(i.env.videoDuration)}return(0,k.jsx)(r.Z.Paragraph,{style:{color:"#979797",textAlign:"center",margin:"0 30px"},children:"Detail settings for an edit you add will appear here."})})),pn(this,"calcTimeDistance",(function(){var t=i.env.processbarLength,e=i.env.videoDuration;if(!t||t<=0||!e||e<=0)return 1;var n=s.ZP.round(s.ZP.divide(t,10*e),1);return n<1&&(n=1),n})),pn(this,"focusToAction",(function(t){if(!t||t.length<=0)return null;var e=i.annotations[t];e&&e.focus()})),pn(this,"isAnnotationBlur",(function(t){if(!t||t.length<=0)return null;var e=i.annotations[t];return!!e&&"blur"==e.type})),pn(this,"isAnnotationChanged",(function(){var t=Object.values(i.annotations).filter((function(t){return"blur"!=t.type})).map((function(t){return t.info}));if(""==i.originAnnHash&&t.length<=0)return!1;var e=(0,m.OT)(t);return i.originAnnHash!=e})),pn(this,"getSelectedAnnotation",(function(t){return!t||t.length<=0?null:i.annotations[t]})),pn(this,"getSelectedCut",(function(t){return!t||t.length<=0?null:i.cuts[t]})),this.readonly=e,this.callbacks=n||{},this.reset()}))}}]);